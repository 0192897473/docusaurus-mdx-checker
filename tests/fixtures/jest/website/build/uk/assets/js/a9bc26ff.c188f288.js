"use strict";(self.webpackChunkjest_website=self.webpackChunkjest_website||[]).push([[2247],{2599:(e,n,t)=>{t.d(n,{Z:()=>a});t(7378);var s=t(7140);const r={tabItem:"tabItem_wHwb"};var o=t(4246);function a(e){let{children:n,hidden:t,className:a}=e;return(0,o.jsx)("div",{role:"tabpanel",className:(0,s.Z)(r.tabItem,a),hidden:t,children:n})}},8447:(e,n,t)=>{t.d(n,{Z:()=>w});var s=t(7378),r=t(7140),o=t(9169),a=t(3620),i=t(9749),l=t(8981),c=t(56),u=t(8796);function d(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,s.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:t,attributes:s,default:r}}=e;return{value:n,label:t,attributes:s,default:r}}))}(t);return function(e){const n=(0,c.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:t}=e;const r=(0,a.k6)(),o=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,l._X)(o),(0,s.useCallback)((e=>{if(!o)return;const n=new URLSearchParams(r.location.search);n.set(o,e),r.replace({...r.location,search:n.toString()})}),[o,r])]}function b(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,o=h(e),[a,l]=(0,s.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const s=t.find((e=>e.default))??t[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:o}))),[c,d]=m({queryString:t,groupId:r}),[b,g]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,o]=(0,u.Nk)(t);return[r,(0,s.useCallback)((e=>{t&&o.set(e)}),[t,o])]}({groupId:r}),j=(()=>{const e=c??b;return p({value:e,tabValues:o})?e:null})();(0,i.Z)((()=>{j&&l(j)}),[j]);return{selectedValue:a,selectValue:(0,s.useCallback)((e=>{if(!p({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),g(e)}),[d,g,o]),tabValues:o}}var g=t(362);const j={tabList:"tabList_J5MA",tabItem:"tabItem_l0OV"};var x=t(4246);function f(e){let{className:n,block:t,selectedValue:s,selectValue:a,tabValues:i}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.o5)(),u=e=>{const n=e.currentTarget,t=l.indexOf(n),r=i[t].value;r!==s&&(c(n),a(r))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":t},n),children:i.map((e=>{let{value:n,label:t,attributes:o}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:s===n?0:-1,"aria-selected":s===n,ref:e=>l.push(e),onKeyDown:d,onClick:u,...o,className:(0,r.Z)("tabs__item",j.tabItem,o?.className,{"tabs__item--active":s===n}),children:t??n},n)}))})}function v(e){let{lazy:n,children:t,selectedValue:r}=e;const o=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=o.find((e=>e.props.value===r));return e?(0,s.cloneElement)(e,{className:"margin-top--md"}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==r})))})}function y(e){const n=b(e);return(0,x.jsxs)("div",{className:(0,r.Z)("tabs-container",j.tabList),children:[(0,x.jsx)(f,{...e,...n}),(0,x.jsx)(v,{...e,...n})]})}function w(e){const n=(0,g.Z)();return(0,x.jsx)(y,{...e,children:d(e.children)},String(n))}},6812:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>d});var s=t(4246),r=t(1670),o=t(8447),a=t(2599);const i={id:"troubleshooting",title:"\u0412\u0438\u0440\u0456\u0448\u0435\u043d\u043d\u044f \u043f\u0440\u043e\u0431\u043b\u0435\u043c"},l=void 0,c={unversionedId:"troubleshooting",id:"troubleshooting",title:"\u0412\u0438\u0440\u0456\u0448\u0435\u043d\u043d\u044f \u043f\u0440\u043e\u0431\u043b\u0435\u043c",description:"\u0419\u043e\u0439, \u0449\u043e\u0441\u044c \u043f\u0456\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a? \u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u0439\u0442\u0435 \u0446\u044e \u0456\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0456\u044e, \u0449\u043e\u0431 \u0440\u043e\u0437\u0432'\u044f\u0437\u0430\u0442\u0438 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0438 \u0437 Jest.",source:"@site/i18n/uk/docusaurus-plugin-content-docs/current/Troubleshooting.md",sourceDirName:".",slug:"/troubleshooting",permalink:"/uk/docs/next/troubleshooting",draft:!1,unlisted:!1,editUrl:"https://crowdin.com/project/jest-v2/uk",tags:[],version:"current",frontMatter:{id:"troubleshooting",title:"\u0412\u0438\u0440\u0456\u0448\u0435\u043d\u043d\u044f \u043f\u0440\u043e\u0431\u043b\u0435\u043c"},sidebar:"docs",previous:{title:"\u041c\u0456\u0433\u0440\u0430\u0446\u0456\u044f \u043d\u0430 Jest",permalink:"/uk/docs/next/migration-guide"},next:{title:"\u0410\u0440\u0445\u0456\u0442\u0435\u043a\u0442\u0443\u0440\u0430",permalink:"/uk/docs/next/architecture"}},u={},d=[{value:"\u0422\u0435\u0441\u0442\u0438 \u043f\u0430\u0434\u0430\u044e\u0442\u044c \u0456 \u0432\u0438 \u043d\u0435 \u0437\u043d\u0430\u0454\u0442\u0435 \u0447\u043e\u043c\u0443",id:"\u0442\u0435\u0441\u0442\u0438-\u043f\u0430\u0434\u0430\u044e\u0442\u044c-\u0456-\u0432\u0438-\u043d\u0435-\u0437\u043d\u0430\u0454\u0442\u0435-\u0447\u043e\u043c\u0443",level:2},{value:"\u041d\u0430\u043b\u0430\u0433\u043e\u0434\u0436\u0435\u043d\u043d\u044f \u0432 VS Code",id:"\u043d\u0430\u043b\u0430\u0433\u043e\u0434\u0436\u0435\u043d\u043d\u044f-\u0432-vs-code",level:2},{value:"\u041d\u0430\u043b\u0430\u0433\u043e\u0434\u0436\u0435\u043d\u043d\u044f \u0432 WebStorm",id:"\u043d\u0430\u043b\u0430\u0433\u043e\u0434\u0436\u0435\u043d\u043d\u044f-\u0432-webstorm",level:2},{value:"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0438 \u0437 \u043a\u0435\u0448\u0443\u0432\u0430\u043d\u043d\u044f\u043c",id:"\u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0438-\u0437-\u043a\u0435\u0448\u0443\u0432\u0430\u043d\u043d\u044f\u043c",level:2},{value:"\u041d\u0435\u0432\u0438\u0440\u0456\u0448\u0435\u043d\u0456 \u043f\u0440\u043e\u043c\u0456\u0441\u0438",id:"\u043d\u0435\u0432\u0438\u0440\u0456\u0448\u0435\u043d\u0456-\u043f\u0440\u043e\u043c\u0456\u0441\u0438",level:2},{value:"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0438 \u0437 watchman",id:"\u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0438-\u0437-watchman",level:2},{value:"\u041d\u0430\u0434\u0437\u0432\u0438\u0447\u0430\u0439\u043d\u043e \u043f\u043e\u0432\u0456\u043b\u044c\u043d\u0456 \u0442\u0435\u0441\u0442\u0438 \u043d\u0430 Docker \u0442\u0430/\u0430\u0431\u043e \u0441\u0435\u0440\u0432\u0435\u0440\u0456 Continuous Integration (CI)",id:"\u043d\u0430\u0434\u0437\u0432\u0438\u0447\u0430\u0439\u043d\u043e-\u043f\u043e\u0432\u0456\u043b\u044c\u043d\u0456-\u0442\u0435\u0441\u0442\u0438-\u043d\u0430-docker-\u0442\u0430\u0430\u0431\u043e-\u0441\u0435\u0440\u0432\u0435\u0440\u0456-continuous-integration-ci",level:2},{value:"<code>coveragePathIgnorePatterns</code> \u043d\u0456 \u043d\u0430 \u0449\u043e \u043d\u0435 \u0432\u043f\u043b\u0438\u0432\u0430\u0454",id:"coveragepathignorepatterns-\u043d\u0456-\u043d\u0430-\u0449\u043e-\u043d\u0435-\u0432\u043f\u043b\u0438\u0432\u0430\u0454",level:2},{value:"\u0412\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u0442\u0435\u0441\u0442\u0456\u0432",id:"\u0432\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f-\u0442\u0435\u0441\u0442\u0456\u0432",level:2},{value:"\u0412\u0441\u0435 \u0449\u0435 \u043d\u0435\u0432\u0438\u0440\u0456\u0448\u0435\u043d\u0456?",id:"\u0432\u0441\u0435-\u0449\u0435-\u043d\u0435\u0432\u0438\u0440\u0456\u0448\u0435\u043d\u0456",level:2}];function h(e){const n=Object.assign({p:"p",h2:"h2",a:"a",code:"code",pre:"pre",admonition:"admonition",em:"em"},(0,r.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"\u0419\u043e\u0439, \u0449\u043e\u0441\u044c \u043f\u0456\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a? \u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u0439\u0442\u0435 \u0446\u044e \u0456\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0456\u044e, \u0449\u043e\u0431 \u0440\u043e\u0437\u0432'\u044f\u0437\u0430\u0442\u0438 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0438 \u0437 Jest."}),"\n",(0,s.jsx)(n.h2,{id:"\u0442\u0435\u0441\u0442\u0438-\u043f\u0430\u0434\u0430\u044e\u0442\u044c-\u0456-\u0432\u0438-\u043d\u0435-\u0437\u043d\u0430\u0454\u0442\u0435-\u0447\u043e\u043c\u0443",children:"\u0422\u0435\u0441\u0442\u0438 \u043f\u0430\u0434\u0430\u044e\u0442\u044c \u0456 \u0432\u0438 \u043d\u0435 \u0437\u043d\u0430\u0454\u0442\u0435 \u0447\u043e\u043c\u0443"}),"\n",(0,s.jsxs)(n.p,{children:["\u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u0442\u0438 \u0432\u0431\u0443\u0434\u043e\u0432\u0430\u043d\u0443 \u0432 Node ",(0,s.jsx)(n.a,{href:"https://nodejs.org/api/debugger.html",children:"\u043d\u0430\u043b\u0430\u0433\u043e\u0434\u0436\u0443\u0432\u0430\u043b\u044c\u043d\u0443 \u043f\u0456\u0434\u0442\u0440\u0438\u043c\u043a\u0443"}),". \u0420\u043e\u0437\u043c\u0456\u0441\u0442\u0456\u0442\u044c ",(0,s.jsx)(n.code,{children:"debugger;"})," \u0432\u0438\u043a\u043b\u0438\u043a \u0432 \u0431\u0443\u0434\u044c-\u044f\u043a\u043e\u043c\u0443 \u0432\u0430\u0448\u043e\u043c\u0443 \u0442\u0435\u0441\u0442\u0456\u0432, \u0456 \u0442\u043e\u0434\u0456 \u0432 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0456\u0457 \u0432\u0430\u0448\u043e\u0433\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0443 \u0437\u0430\u043f\u0443\u0441\u0442\u0456\u0442\u044c:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"node --inspect-brk node_modules/.bin/jest --runInBand [any other arguments here]\n\u0430\u0431\u043e \u0434\u043b\u044f Windows\nnode --inspect-brk ./node_modules/jest/bin/jest.js --runInBand [any other arguments here]\n"})}),"\n",(0,s.jsx)(n.p,{children:"This will run Jest in a Node process that an external debugger can connect to. Note that the process will pause until the debugger has connected to it."}),"\n",(0,s.jsxs)(n.p,{children:["To debug in Google Chrome (or any Chromium-based browser), open your browser and go to ",(0,s.jsx)(n.code,{children:"chrome://inspect"}),' and click on "Open Dedicated DevTools for Node", which will give you a list of available node instances you can connect to. Click on the address displayed in the terminal (usually something like ',(0,s.jsx)(n.code,{children:"localhost:9229"}),") after running the above command, and you will be able to debug Jest using Chrome's DevTools."]}),"\n",(0,s.jsxs)(n.p,{children:['The Chrome Developer Tools will be displayed, and a breakpoint will be set at the first line of the Jest CLI script (this is done to give you time to open the developer tools and to prevent Jest from executing before you have time to do so). Click the button that looks like a "play" button in the upper right hand side of the screen to continue execution. When Jest executes the test that contains the ',(0,s.jsx)(n.code,{children:"debugger"})," statement, execution will pause and you can examine the current scope and call stack."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 cli ",(0,s.jsx)(n.code,{children:"--runInBand"})," \u0441\u043b\u0456\u0434\u043a\u0443\u0454, \u0449\u043e\u0431 Jest \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0432 \u0442\u0435\u0441\u0442\u0443\u0432\u0430\u043d\u043d\u044f \u0432 \u043e\u0434\u043d\u043e\u043c\u0443 \u0439 \u0442\u043e\u043c\u0443 \u0436 \u043f\u0440\u043e\u0446\u0435\u0441\u0456, \u0430 \u043d\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0432 \u0432\u043b\u0430\u0441\u043d\u0456 \u043f\u0440\u043e\u0446\u0435\u0441\u0438 \u0434\u043b\u044f \u043e\u043a\u0440\u0435\u043c\u0438\u0445 \u0442\u0435\u0441\u0442\u0456\u0432. Normally Jest parallelizes test runs across processes but it is hard to debug many processes at the same time."]})}),"\n",(0,s.jsx)(n.h2,{id:"\u043d\u0430\u043b\u0430\u0433\u043e\u0434\u0436\u0435\u043d\u043d\u044f-\u0432-vs-code",children:"\u041d\u0430\u043b\u0430\u0433\u043e\u0434\u0436\u0435\u043d\u043d\u044f \u0432 VS Code"}),"\n",(0,s.jsxs)(n.p,{children:["There are multiple ways to debug Jest tests with ",(0,s.jsx)(n.a,{href:"https://code.visualstudio.com",children:"Visual Studio Code's"})," built-in ",(0,s.jsx)(n.a,{href:"https://code.visualstudio.com/docs/nodejs/nodejs-debugging",children:"debugger"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"To attach the built-in debugger, run your tests as aforementioned:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"node --inspect-brk node_modules/.bin/jest --runInBand [any other arguments here]\n\u0430\u0431\u043e \u0434\u043b\u044f Windows\nnode --inspect-brk ./node_modules/jest/bin/jest.js --runInBand [any other arguments here]\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Then attach VS Code's debugger using the following ",(0,s.jsx)(n.code,{children:"launch.json"})," config:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "version": "0.2.0",\n  "configurations": [\n    {\n      "type": "node",\n      "request": "attach",\n      "name": "Attach",\n      "port": 9229\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"To automatically launch and attach to a process running your tests, use the following configuration:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "version": "0.2.0",\n  "configurations": [\n    {\n      "name": "Debug Jest Tests",\n      "type": "node",\n      "request": "launch",\n      "runtimeArgs": [\n        "--inspect-brk",\n        "${workspaceRoot}/node_modules/.bin/jest",\n        "--runInBand"\n      ],\n      "console": "integratedTerminal",\n      "internalConsoleOptions": "neverOpen"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"or the following for Windows:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "version": "0.2.0",\n  "configurations": [\n    {\n      "name": "Debug Jest Tests",\n      "type": "node",\n      "request": "launch",\n      "runtimeArgs": [\n        "--inspect-brk",\n        "${workspaceRoot}/node_modules/jest/bin/jest.js",\n        "--runInBand"\n      ],\n      "console": "integratedTerminal",\n      "internalConsoleOptions": "neverOpen"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["If you are using Facebook's ",(0,s.jsx)(n.a,{href:"https://github.com/facebookincubator/create-react-app",children:(0,s.jsx)(n.code,{children:"create-react-app"})}),", you can debug your Jest tests with the following configuration:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "version": "0.2.0",\n  "configurations": [\n    {\n      "name": "Debug CRA Tests",\n      "type": "node",\n      "request": "launch",\n      "runtimeExecutable": "${workspaceRoot}/node_modules/.bin/react-scripts",\n      "args": [\n        "test",\n        "--runInBand",\n        "--no-cache",\n        "--env=jsdom",\n        "--watchAll=false"\n      ],\n      "cwd": "${workspaceRoot}",\n      "console": "integratedTerminal",\n      "internalConsoleOptions": "neverOpen"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["More information on Node debugging can be found ",(0,s.jsx)(n.a,{href:"https://nodejs.org/api/debugger.html",children:"here"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"\u043d\u0430\u043b\u0430\u0433\u043e\u0434\u0436\u0435\u043d\u043d\u044f-\u0432-webstorm",children:"\u041d\u0430\u043b\u0430\u0433\u043e\u0434\u0436\u0435\u043d\u043d\u044f \u0432 WebStorm"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://www.jetbrains.com/webstorm/",children:"WebStorm"})," has built-in support for Jest. Read ",(0,s.jsx)(n.a,{href:"https://blog.jetbrains.com/webstorm/2018/10/testing-with-jest-in-webstorm/",children:"Testing With Jest in WebStorm"})," to learn more."]}),"\n",(0,s.jsx)(n.h2,{id:"\u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0438-\u0437-\u043a\u0435\u0448\u0443\u0432\u0430\u043d\u043d\u044f\u043c",children:"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0438 \u0437 \u043a\u0435\u0448\u0443\u0432\u0430\u043d\u043d\u044f\u043c"}),"\n",(0,s.jsx)(n.p,{children:"The transform script was changed or Babel was updated and the changes aren't being recognized by Jest?"}),"\n",(0,s.jsxs)(n.p,{children:["Retry with ",(0,s.jsx)(n.a,{href:"/uk/docs/next/cli#--cache",children:(0,s.jsx)(n.code,{children:"--no-cache"})}),". Jest caches transformed module files to speed up test execution. If you are using your own custom transformer, consider adding a ",(0,s.jsx)(n.code,{children:"getCacheKey"})," function to it: ",(0,s.jsx)(n.a,{href:"https://github.com/facebook/relay/blob/58cf36c73769690f0bbf90562707eadb062b029d/scripts/jest/preprocessor.js#L56-L61",children:"getCacheKey in Relay"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"\u043d\u0435\u0432\u0438\u0440\u0456\u0448\u0435\u043d\u0456-\u043f\u0440\u043e\u043c\u0456\u0441\u0438",children:"\u041d\u0435\u0432\u0438\u0440\u0456\u0448\u0435\u043d\u0456 \u043f\u0440\u043e\u043c\u0456\u0441\u0438"}),"\n",(0,s.jsx)(n.p,{children:"If a promise doesn't resolve at all, this error might be thrown:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"- Error: Timeout - Async callback was not invoked within timeout specified by jasmine.DEFAULT_TIMEOUT_INTERVAL.`\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Most commonly this is being caused by conflicting Promise implementations. Consider replacing the global promise implementation with your own, for example ",(0,s.jsx)(n.code,{children:"globalThis.Promise = jest.requireActual('promise');"})," and/or consolidate the used Promise libraries to a single one."]}),"\n",(0,s.jsxs)(n.p,{children:["If your test is long running, you may want to consider to increase the timeout by calling ",(0,s.jsx)(n.code,{children:"jest.setTimeout"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"jest.setTimeout(10000); // timeout \u0434\u043e\u0440\u0456\u0432\u043d\u044e\u0454 10 \u0441\u0435\u043a\u0443\u043d\u0434\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0438-\u0437-watchman",children:"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0438 \u0437 watchman"}),"\n",(0,s.jsxs)(n.p,{children:["Try running Jest with ",(0,s.jsx)(n.a,{href:"/uk/docs/next/cli#--watchman",children:(0,s.jsx)(n.code,{children:"--no-watchman"})})," or set the ",(0,s.jsx)(n.code,{children:"watchman"})," configuration option to ",(0,s.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["\u0422\u0430\u043a\u043e\u0436 \u0434\u0438\u0432. ",(0,s.jsx)(n.a,{href:"https://facebook.github.io/watchman/docs/troubleshooting",children:"\u0432\u0438\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044f \u043d\u0435\u043f\u043e\u043b\u0430\u0434\u043e\u043a watchman"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"\u043d\u0430\u0434\u0437\u0432\u0438\u0447\u0430\u0439\u043d\u043e-\u043f\u043e\u0432\u0456\u043b\u044c\u043d\u0456-\u0442\u0435\u0441\u0442\u0438-\u043d\u0430-docker-\u0442\u0430\u0430\u0431\u043e-\u0441\u0435\u0440\u0432\u0435\u0440\u0456-continuous-integration-ci",children:"\u041d\u0430\u0434\u0437\u0432\u0438\u0447\u0430\u0439\u043d\u043e \u043f\u043e\u0432\u0456\u043b\u044c\u043d\u0456 \u0442\u0435\u0441\u0442\u0438 \u043d\u0430 Docker \u0442\u0430/\u0430\u0431\u043e \u0441\u0435\u0440\u0432\u0435\u0440\u0456 Continuous Integration (CI)"}),"\n",(0,s.jsxs)(n.p,{children:["While Jest is most of the time extremely fast on modern multi-core computers with fast SSDs, it may be slow on certain setups as our users ",(0,s.jsx)(n.a,{href:"https://github.com/jestjs/jest/issues/1395",children:"have"})," ",(0,s.jsx)(n.a,{href:"https://github.com/jestjs/jest/issues/1524#issuecomment-260246008",children:"discovered"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Based on the ",(0,s.jsx)(n.a,{href:"https://github.com/jestjs/jest/issues/1524#issuecomment-262366820",children:"findings"}),", one way to mitigate this issue and improve the speed by up to 50% is to run tests sequentially."]}),"\n",(0,s.jsxs)(n.p,{children:["In order to do this you can run tests in the same thread using ",(0,s.jsx)(n.a,{href:"/uk/docs/next/cli#--runinband",children:(0,s.jsx)(n.code,{children:"--runInBand"})}),":"]}),"\n",(0,s.jsxs)(o.Z,{groupId:"npm2yarn",children:[(0,s.jsx)(a.Z,{value:"npm",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f Jest CLI\njest --runInBand\n\n# \u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f `test` \u0441\u043a\u0440\u0438\u043f\u0442\u0443 \u0432\u0430\u0448\u043e\u0433\u043e \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u043f\u0430\u043a\u0435\u0442\u0456\u0432 (\u043d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434, \u0437 create-react-app)\nyarn test --runInBand\n"})})}),(0,s.jsx)(a.Z,{value:"yarn",label:"Yarn",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f Jest CLI\njest --runInBand\n\n# \u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f `test` \u0441\u043a\u0440\u0438\u043f\u0442\u0443 \u0432\u0430\u0448\u043e\u0433\u043e \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u043f\u0430\u043a\u0435\u0442\u0456\u0432 (\u043d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434, \u0437 create-react-app)\nyarn test --runInBand\n"})})}),(0,s.jsx)(a.Z,{value:"pnpm",label:"pnpm",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f Jest CLI\njest --runInBand\n\n# \u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f `test` \u0441\u043a\u0440\u0438\u043f\u0442\u0443 \u0432\u0430\u0448\u043e\u0433\u043e \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u043f\u0430\u043a\u0435\u0442\u0456\u0432 (\u043d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434, \u0437 create-react-app)\nyarn test --runInBand\n"})})})]}),"\n",(0,s.jsxs)(n.p,{children:["Another alternative to expediting test execution time on Continuous Integration Servers such as Travis-CI is to set the max worker pool to ~",(0,s.jsx)(n.em,{children:"4"}),". Specifically on Travis-CI, this can reduce test execution time in half. Note: The Travis CI ",(0,s.jsx)(n.em,{children:"free"})," plan available for open source projects only includes 2 CPU cores."]}),"\n",(0,s.jsxs)(o.Z,{groupId:"npm2yarn",children:[(0,s.jsx)(a.Z,{value:"npm",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f Jest CLI\njest --maxWorkers=4\n\n# \u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f `test` \u0441\u043a\u0440\u0438\u043f\u0442\u0443 \u0432\u0430\u0448\u043e\u0433\u043e \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u043f\u0430\u043a\u0435\u0442\u0456\u0432 (\u043d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434, \u0437 create-react-app)\nyarn test --maxWorkers=4\n"})})}),(0,s.jsx)(a.Z,{value:"yarn",label:"Yarn",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f Jest CLI\njest --maxWorkers=4\n\n# \u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f `test` \u0441\u043a\u0440\u0438\u043f\u0442\u0443 \u0432\u0430\u0448\u043e\u0433\u043e \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u043f\u0430\u043a\u0435\u0442\u0456\u0432 (\u043d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434, \u0437 create-react-app)\nyarn test --maxWorkers=4\n"})})}),(0,s.jsx)(a.Z,{value:"pnpm",label:"pnpm",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f Jest CLI\njest --maxWorkers=4\n\n# \u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f `test` \u0441\u043a\u0440\u0438\u043f\u0442\u0443 \u0432\u0430\u0448\u043e\u0433\u043e \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u043f\u0430\u043a\u0435\u0442\u0456\u0432 (\u043d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434, \u0437 create-react-app)\nyarn test --maxWorkers=4\n"})})})]}),"\n",(0,s.jsxs)(n.p,{children:["If you use GitHub Actions, you can use ",(0,s.jsx)(n.a,{href:"https://github.com/SimenB/github-actions-cpu-cores",children:(0,s.jsx)(n.code,{children:"github-actions-cpu-cores"})})," to detect number of CPUs, and pass that to Jest."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"- name: Get number of CPU cores\n  id: cpu-cores\n  uses: SimenB/github-actions-cpu-cores@v1\n- name: run tests\n  run: yarn jest --max-workers ${{ steps.cpu-cores.outputs.count }}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Another thing you can do is use the ",(0,s.jsx)(n.a,{href:"/uk/docs/next/cli#--shard",children:(0,s.jsx)(n.code,{children:"shard"})})," flag to parallelize the test run across multiple machines."]}),"\n",(0,s.jsxs)(n.h2,{id:"coveragepathignorepatterns-\u043d\u0456-\u043d\u0430-\u0449\u043e-\u043d\u0435-\u0432\u043f\u043b\u0438\u0432\u0430\u0454",children:[(0,s.jsx)(n.code,{children:"coveragePathIgnorePatterns"})," \u043d\u0456 \u043d\u0430 \u0449\u043e \u043d\u0435 \u0432\u043f\u043b\u0438\u0432\u0430\u0454"]}),"\n",(0,s.jsxs)(n.p,{children:["Make sure you are not using the ",(0,s.jsx)(n.code,{children:"babel-plugin-istanbul"})," plugin. Jest wraps Istanbul, and therefore also tells Istanbul what files to instrument with coverage collection. When using ",(0,s.jsx)(n.code,{children:"babel-plugin-istanbul"}),", every file that is processed by Babel will have coverage collection code, hence it is not being ignored by ",(0,s.jsx)(n.code,{children:"coveragePathIgnorePatterns"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"\u0432\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f-\u0442\u0435\u0441\u0442\u0456\u0432",children:"\u0412\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u0442\u0435\u0441\u0442\u0456\u0432"}),"\n",(0,s.jsx)(n.p,{children:"Tests must be defined synchronously for Jest to be able to collect your tests."}),"\n",(0,s.jsx)(n.p,{children:"As an example to show why this is the case, imagine we wrote a test like so:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// Don't do this it will not work\nsetTimeout(() => {\n  it('passes', () => expect(1).toBe(1));\n}, 0);\n"})}),"\n",(0,s.jsxs)(n.p,{children:["When Jest runs your test to collect the ",(0,s.jsx)(n.code,{children:"test"}),"s it will not find any because we have set the definition to happen asynchronously on the next tick of the event loop. \u0426\u0435 \u043e\u0437\u043d\u0430\u0447\u0430\u0454, \u0449\u043e \u043f\u0440\u0438 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u0456 ",(0,s.jsx)(n.code,{children:"test.each"})," \u0432\u0438 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e \u0432\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u044e\u0432\u0430\u0442\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044e \u0432 \u043c\u0435\u0436\u0430\u0445 ",(0,s.jsx)(n.code,{children:"beforeEach"})," / ",(0,s.jsx)(n.code,{children:"beforeAll"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"\u0432\u0441\u0435-\u0449\u0435-\u043d\u0435\u0432\u0438\u0440\u0456\u0448\u0435\u043d\u0456",children:"\u0412\u0441\u0435 \u0449\u0435 \u043d\u0435\u0432\u0438\u0440\u0456\u0448\u0435\u043d\u0456?"}),"\n",(0,s.jsxs)(n.p,{children:["\u0414\u0438\u0432\u0456\u0442\u044c\u0441\u044f \u0432 ",(0,s.jsx)(n.a,{href:"/help.html",children:"\u0434\u043e\u043f\u043e\u043c\u043e\u0437\u0456"}),"."]})]})}const p=function(e={}){const{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,s.jsx)(n,Object.assign({},e,{children:(0,s.jsx)(h,e)})):h(e)}},1670:(e,n,t)=>{t.d(n,{Zo:()=>i,ah:()=>o});var s=t(7378);const r=s.createContext({});function o(e){const n=s.useContext(r);return s.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const a={};function i({components:e,children:n,disableParentContext:t}){let i;return i=t?"function"==typeof e?e({}):e||a:o(e),s.createElement(r.Provider,{value:i},n)}}}]);