"use strict";(self.webpackChunkjest_website=self.webpackChunkjest_website||[]).push([[4266],{391:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>a});var i=s(4246),t=s(1670);const o={id:"watch-plugins",title:"\u041f\u043b\u0430\u0433\u0456\u043d\u0438 \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f"},l=void 0,r={unversionedId:"watch-plugins",id:"version-29.4/watch-plugins",title:"\u041f\u043b\u0430\u0433\u0456\u043d\u0438 \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f",description:"\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u043f\u043b\u0430\u0433\u0456\u043d\u0456\u0432 \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f Jest \u043d\u0430\u0434\u0430\u0454 \u0441\u043f\u043e\u0441\u0456\u0431 \u0437\u0430\u0439\u0442\u0438 \u0434\u043e \u043f\u0435\u0432\u043d\u0438\u0445 \u0447\u0430\u0441\u0442\u0438\u043d Jest \u0442\u0430 \u0432\u0438\u0437\u043d\u0430\u0447\u0438\u0442\u0438 \u0437\u0430\u043f\u0438\u0442\u0438 \u043c\u0435\u043d\u044e \u0440\u0435\u0436\u0438\u043c\u0443 \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f, \u044f\u043a\u0456 \u0432\u0438\u043a\u043e\u043d\u0443\u0432\u0430\u0442\u0438\u043c\u0443\u0442\u044c \u043a\u043e\u0434 \u043f\u0440\u0438 \u043d\u0430\u0442\u0438\u0441\u043a\u0430\u043d\u043d\u0456 \u043a\u043b\u0430\u0432\u0456\u0448. \u0423 \u043f\u043e\u0454\u0434\u043d\u0430\u043d\u043d\u0456, \u0446\u0456 \u0444\u0443\u043d\u043a\u0446\u0456\u0457 \u0434\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442\u044c \u0440\u043e\u0437\u0432\u0438\u0432\u0430\u0442\u0438 \u0456\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u0438\u0439 \u0434\u043e\u0441\u0432\u0456\u0434 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u0434\u043b\u044f \u0432\u0430\u0448\u043e\u0433\u043e \u0440\u043e\u0431\u043e\u0447\u043e\u0433\u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0443.",source:"@site/i18n/uk/docusaurus-plugin-content-docs/version-29.4/WatchPlugins.md",sourceDirName:".",slug:"/watch-plugins",permalink:"/uk/docs/29.4/watch-plugins",draft:!1,unlisted:!1,editUrl:"https://crowdin.com/project/jest-v2/uk",tags:[],version:"29.4",frontMatter:{id:"watch-plugins",title:"\u041f\u043b\u0430\u0433\u0456\u043d\u0438 \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f"},sidebar:"docs",previous:{title:"\u041c\u0430\u043d\u0456\u043f\u0443\u043b\u044f\u0446\u0456\u044f DOM",permalink:"/uk/docs/29.4/tutorial-jquery"},next:{title:"\u041c\u0456\u0433\u0440\u0430\u0446\u0456\u044f \u043d\u0430 Jest",permalink:"/uk/docs/29.4/migration-guide"}},c={},a=[{value:"\u0406\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u043f\u043b\u0430\u0433\u0456\u043d\u0443 \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f",id:"\u0456\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441-\u043f\u043b\u0430\u0433\u0456\u043d\u0443-\u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f",level:2},{value:"\u0425\u0443\u043a\u0438 \u0432 Jest",id:"\u0445\u0443\u043a\u0438-\u0432-jest",level:2},{value:"<code>apply(jestHooks)</code>",id:"applyjesthooks",level:3},{value:"<code>jestHooks.shouldRunTestSuite(testSuiteInfo)</code>",id:"jesthooksshouldruntestsuitetestsuiteinfo",level:4},{value:"<code>jestHooks.onTestRunComplete(results)</code>",id:"jesthooksontestruncompleteresults",level:4},{value:"<code>jestHooks.onFileChange({projects})</code>",id:"jesthooksonfilechangeprojects",level:4},{value:"\u0406\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0456\u044f \u043c\u0435\u043d\u044e \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f",id:"\u0456\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0456\u044f-\u043c\u0435\u043d\u044e-\u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f",level:2},{value:"<code>getUsageInfo(globalConfig)</code>",id:"getusageinfoglobalconfig",level:3},{value:"<code>run(globalConfig, updateConfigAndRun)</code>",id:"runglobalconfig-updateconfigandrun",level:3},{value:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u0456 \u043a\u043b\u044e\u0447\u0456 \u043a\u043e\u043d\u0444\u0456\u0433\u0443\u0440\u0430\u0446\u0456\u0457",id:"\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u0456-\u043a\u043b\u044e\u0447\u0456-\u043a\u043e\u043d\u0444\u0456\u0433\u0443\u0440\u0430\u0446\u0456\u0457",level:4},{value:"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u043d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f",id:"\u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u0456-\u043d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f",level:2},{value:"\u0412\u0438\u0431\u0456\u0440 \u0445\u043e\u0440\u043e\u0448\u043e\u0433\u043e \u043a\u043b\u044e\u0447\u0430",id:"\u0432\u0438\u0431\u0456\u0440-\u0445\u043e\u0440\u043e\u0448\u043e\u0433\u043e-\u043a\u043b\u044e\u0447\u0430",level:2},{value:"\u041a\u043e\u043b\u0438 \u0442\u0440\u0430\u043f\u043b\u044f\u0454\u0442\u044c\u0441\u044f \u043a\u043e\u043d\u0444\u043b\u0456\u043a\u0442",id:"\u043a\u043e\u043b\u0438-\u0442\u0440\u0430\u043f\u043b\u044f\u0454\u0442\u044c\u0441\u044f-\u043a\u043e\u043d\u0444\u043b\u0456\u043a\u0442",level:3}];function d(e){const n=Object.assign({p:"p",h2:"h2",pre:"pre",code:"code",h3:"h3",h4:"h4",ul:"ul",li:"li",em:"em",admonition:"admonition",a:"a",strong:"strong"},(0,t.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u043f\u043b\u0430\u0433\u0456\u043d\u0456\u0432 \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f Jest \u043d\u0430\u0434\u0430\u0454 \u0441\u043f\u043e\u0441\u0456\u0431 \u0437\u0430\u0439\u0442\u0438 \u0434\u043e \u043f\u0435\u0432\u043d\u0438\u0445 \u0447\u0430\u0441\u0442\u0438\u043d Jest \u0442\u0430 \u0432\u0438\u0437\u043d\u0430\u0447\u0438\u0442\u0438 \u0437\u0430\u043f\u0438\u0442\u0438 \u043c\u0435\u043d\u044e \u0440\u0435\u0436\u0438\u043c\u0443 \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f, \u044f\u043a\u0456 \u0432\u0438\u043a\u043e\u043d\u0443\u0432\u0430\u0442\u0438\u043c\u0443\u0442\u044c \u043a\u043e\u0434 \u043f\u0440\u0438 \u043d\u0430\u0442\u0438\u0441\u043a\u0430\u043d\u043d\u0456 \u043a\u043b\u0430\u0432\u0456\u0448. \u0423 \u043f\u043e\u0454\u0434\u043d\u0430\u043d\u043d\u0456, \u0446\u0456 \u0444\u0443\u043d\u043a\u0446\u0456\u0457 \u0434\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442\u044c \u0440\u043e\u0437\u0432\u0438\u0432\u0430\u0442\u0438 \u0456\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u0438\u0439 \u0434\u043e\u0441\u0432\u0456\u0434 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u0434\u043b\u044f \u0432\u0430\u0448\u043e\u0433\u043e \u0440\u043e\u0431\u043e\u0447\u043e\u0433\u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0443."}),"\n",(0,i.jsx)(n.h2,{id:"\u0456\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441-\u043f\u043b\u0430\u0433\u0456\u043d\u0443-\u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f",children:"\u0406\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 \u043f\u043b\u0430\u0433\u0456\u043d\u0443 \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"class MyWatchPlugin {\n  // \u0414\u043e\u0434\u0430\u0432\u0430\u043d\u043d\u044f \u0445\u0443\u043a\u0443 \u0432 \u043f\u043e\u0434\u0456\u0457 \u0436\u0438\u0442\u0442\u0454\u0432\u043e\u0433\u043e \u0446\u0438\u043a\u043b\u0443 Jest\n  apply(jestHooks) {}\n\n  // \u041e\u0442\u0440\u0438\u043c\u0430\u043d\u043d\u044f \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044e \u0437\u0430 \u0437\u0430\u043f\u0438\u0442\u043e\u043c \u0449\u043e\u0434\u043e \u0456\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u0438\u0445 \u043f\u043b\u0430\u0433\u0456\u043d\u0456\u0432\n  getUsageInfo(globalConfig) {}\n\n  // \u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f \u043f\u0440\u0438 \u043d\u0430\u0442\u0438\u0441\u043a\u0430\u043d\u043d\u0456 \u043a\u043b\u044e\u0447\u0456\u0432 \u0437 `getUsageInfo`\n  run(globalConfig, updateConfigAndRun) {}\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u0445\u0443\u043a\u0438-\u0432-jest",children:"\u0425\u0443\u043a\u0438 \u0432 Jest"}),"\n",(0,i.jsxs)(n.p,{children:["\u0414\u043b\u044f \u043f\u0456\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044f \u0432\u0430\u0448\u043e\u0433\u043e \u043f\u043b\u0430\u0433\u0456\u043d\u0443 \u0432 Jest, \u0434\u043e\u0434\u0430\u0439\u0442\u0435 \u0448\u043b\u044f\u0445 \u0434\u043e \u043d\u044c\u043e\u0433\u043e \u0432 ",(0,i.jsx)(n.code,{children:"watchPlugins"})," \u0443 \u0432\u0430\u0448\u0456\u0439 \u043a\u043e\u043d\u0444\u0456\u0433\u0443\u0440\u0430\u0446\u0456\u0457 Jest:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",metastring:'title="jest.config.js"',children:"module.exports = {\n  // ...\n  watchPlugins: ['path/to/yourWatchPlugin'],\n};\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0446\u044c\u043a\u0456 \u043f\u043b\u0430\u0433\u0456\u043d\u0438 \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f \u043c\u043e\u0436\u0443\u0442\u044c \u0434\u043e\u0434\u0430\u0432\u0430\u0442\u0438 \u0445\u0443\u043a\u0438 \u0434\u043e \u043f\u043e\u0434\u0456\u0439 Jest. \u0426\u0456 \u0445\u0443\u043a\u0438 \u043c\u043e\u0436\u043d\u0430 \u0434\u043e\u0434\u0430\u0442\u0438 \u0437/\u0431\u0435\u0437 \u0456\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u043a\u043b\u044e\u0447\u0430 \u0432 \u043c\u0435\u043d\u044e \u0440\u0435\u0436\u0438\u043c\u0443 \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f."}),"\n",(0,i.jsx)(n.h3,{id:"applyjesthooks",children:(0,i.jsx)(n.code,{children:"apply(jestHooks)"})}),"\n",(0,i.jsxs)(n.p,{children:["Jest \u0445\u0443\u043a\u0438 \u043c\u043e\u0436\u0443\u0442\u044c \u0431\u0443\u0442\u0438 \u043f\u0440\u0438\u043a\u0440\u0456\u043f\u043b\u0435\u043d\u0456 \u0448\u043b\u044f\u0445\u043e\u043c \u0440\u0435\u0430\u043b\u0456\u0437\u0430\u0446\u0456\u0457 \u043c\u0435\u0442\u043e\u0434\u0443 ",(0,i.jsx)(n.code,{children:"apply"}),". \u0414\u0430\u043d\u0438\u0439 \u043c\u0435\u0442\u043e\u0434 \u043e\u0442\u0440\u0438\u043c\u0443\u0454 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442 ",(0,i.jsx)(n.code,{children:"jestHooks"}),", \u044f\u043a\u0438\u0439 \u0434\u043e\u0437\u0432\u043e\u043b\u044f\u0454 \u043f\u043b\u0430\u0433\u0456\u043d\u0443 \u043f\u0456\u0434\u043a\u043b\u044e\u0447\u0430\u0442\u0438\u0441\u044f \u0434\u043e \u043f\u0435\u0432\u043d\u0438\u0445 \u0447\u0430\u0441\u0442\u0438\u043d \u0436\u0438\u0442\u0442\u0454\u0432\u043e\u0433\u043e \u0446\u0438\u043a\u043b\u0443 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f \u0442\u0435\u0441\u0442\u0456\u0432."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"class MyWatchPlugin {\n  apply(jestHooks) {}\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u041d\u0438\u0436\u0447\u0435 \u043d\u0430\u0432\u0435\u0434\u0435\u043d\u0456 \u0445\u0443\u043a\u0438, \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0456 \u0432 Jest."}),"\n",(0,i.jsx)(n.h4,{id:"jesthooksshouldruntestsuitetestsuiteinfo",children:(0,i.jsx)(n.code,{children:"jestHooks.shouldRunTestSuite(testSuiteInfo)"})}),"\n",(0,i.jsxs)(n.p,{children:["\u041f\u043e\u0432\u0435\u0440\u0442\u0430\u0454 boolean (\u0430\u0431\u043e ",(0,i.jsx)(n.code,{children:"Promise<boolean>"})," \u0434\u043b\u044f \u043e\u0431\u0440\u043e\u0431\u043a\u0438 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u0438\u0445 \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u0439), \u0449\u043e\u0431 \u0432\u043a\u0430\u0437\u0430\u0442\u0438, \u0447\u0438 \u0442\u0440\u0435\u0431\u0430 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u0438 \u0442\u0435\u0441\u0442."]}),"\n",(0,i.jsx)(n.p,{children:"\u041d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"class MyWatchPlugin {\n  apply(jestHooks) {\n    jestHooks.shouldRunTestSuite(testSuiteInfo => {\n      return testSuiteInfo.testPath.includes('my-keyword');\n    });\n\n    // \u0430\u0431\u043e promise\n    jestHooks.shouldRunTestSuite(testSuiteInfo => {\n      return Promise.resolve(testSuiteInfo.testPath.includes('my-keyword'));\n    });\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"jesthooksontestruncompleteresults",children:(0,i.jsx)(n.code,{children:"jestHooks.onTestRunComplete(results)"})}),"\n",(0,i.jsx)(n.p,{children:"\u0412\u0438\u043a\u043b\u0438\u043a\u0430\u0454\u0442\u044c\u0441\u044f \u0432 \u043a\u0456\u043d\u0446\u0456 \u043a\u043e\u0436\u043d\u043e\u0433\u043e \u0437\u0430\u043f\u0443\u0441\u043a\u0443 \u0442\u0435\u0441\u0442\u0443. \u0417\u0430 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442 \u043c\u0430\u0454 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0438 \u0442\u0435\u0441\u0442\u0456\u0432."}),"\n",(0,i.jsx)(n.p,{children:"\u041d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"class MyWatchPlugin {\n  apply(jestHooks) {\n    jestHooks.onTestRunComplete(results => {\n      this._hasSnapshotFailure = results.snapshot.failure;\n    });\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"jesthooksonfilechangeprojects",children:(0,i.jsx)(n.code,{children:"jestHooks.onFileChange({projects})"})}),"\n",(0,i.jsx)(n.p,{children:"\u0412\u0438\u043a\u043b\u0438\u043a\u0430\u0454\u0442\u044c\u0441\u044f \u0437\u0430 \u043a\u043e\u0436\u043d\u043e\u0457 \u0437\u043c\u0456\u043d\u0438 \u0443 \u0444\u0430\u0439\u043b\u043e\u0432\u0456\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u0456."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"projects: Array<config: ProjectConfig, testPaths: Array<string>"}),": \u0412\u043a\u043b\u044e\u0447\u0430\u0454 \u0432\u0441\u0456 \u0442\u0435\u0441\u0442\u043e\u0432\u0456 \u0448\u043b\u044f\u0445\u0438, \u0437\u0430 \u044f\u043a\u0438\u043c\u0438 \u0441\u043b\u0456\u0434\u043a\u0443\u0454 Jest."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u041d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"class MyWatchPlugin {\n  apply(jestHooks) {\n    jestHooks.onFileChange(({projects}) => {\n      this._projects = projects;\n    });\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u0456\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0456\u044f-\u043c\u0435\u043d\u044e-\u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f",children:"\u0406\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0456\u044f \u043c\u0435\u043d\u044e \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f"}),"\n",(0,i.jsxs)(n.p,{children:["\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u043b\u044c\u043d\u0438\u0446\u044c\u043a\u0456 \u043f\u043b\u0430\u0433\u0456\u043d\u0438 \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f \u0442\u0430\u043a\u043e\u0436 \u043c\u043e\u0436\u0443\u0442\u044c \u0434\u043e\u0434\u0430\u0432\u0430\u0442\u0438 \u0430\u0431\u043e \u043f\u0435\u0440\u0435\u0432\u0438\u0437\u043d\u0430\u0447\u0430\u0442\u0438 \u0444\u0443\u043d\u043a\u0446\u0456\u043e\u043d\u0430\u043b \u0432 \u043c\u0435\u043d\u044e \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f, \u0432\u0438\u0437\u043d\u0430\u0447\u0430\u044e\u0447\u0438 \u043f\u0430\u0440\u0443 key/prompt \u0432 \u043c\u0435\u0442\u043e\u0434\u0456 ",(0,i.jsx)(n.code,{children:"getUsageInfo"})," \u0442\u0430 \u043c\u0435\u0442\u043e\u0434 ",(0,i.jsx)(n.code,{children:"run"})," \u0434\u043b\u044f \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f \u043a\u043b\u044e\u0447\u0430."]}),"\n",(0,i.jsx)(n.h3,{id:"getusageinfoglobalconfig",children:(0,i.jsx)(n.code,{children:"getUsageInfo(globalConfig)"})}),"\n",(0,i.jsxs)(n.p,{children:["\u0429\u043e\u0431 \u0434\u043e\u0434\u0430\u0442\u0438 \u043a\u043b\u044e\u0447 \u0434\u043e \u043c\u0435\u043d\u044e \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f, \u0440\u0435\u0430\u043b\u0456\u0437\u0443\u0439\u0442\u0435 \u043c\u0435\u0442\u043e\u0434 ",(0,i.jsx)(n.code,{children:"getUsageInfo"}),", \u043f\u043e\u0432\u0435\u0440\u0442\u0430\u044e\u0447\u0438 key/prompt:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"class MyWatchPlugin {\n  getUsageInfo(globalConfig) {\n    return {\n      key: 's',\n      prompt: 'do something',\n    };\n  }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This will add a line in the watch mode menu ",(0,i.jsxs)(n.em,{children:["(",(0,i.jsx)(n.code,{children:"\u203a Press s to do something."}),")"]})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"Watch Usage\n \u203a Press p to filter by a filename regex pattern.\n \u203a Press t to filter by a test name regex pattern.\n \u203a Press q to quit watch mode.\n \u203a Press s to do something. // <-- \u0446\u0435 \u043d\u0430\u0448 \u043f\u043b\u0430\u0433\u0456\u043d\n \u203a Press Enter to trigger a test run.\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"\u042f\u043a\u0449\u043e \u043a\u043b\u044e\u0447 \u0432\u0430\u0448\u043e\u0433\u043e \u043f\u043b\u0430\u0433\u0456\u043d\u0443 \u0432\u0436\u0435 \u0456\u0441\u043d\u0443\u0454 \u044f\u043a \u043a\u043b\u044e\u0447 \u0437\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c, \u0432\u0430\u0448 \u043f\u043b\u0430\u0433\u0456\u043d \u043f\u0435\u0440\u0435\u0432\u0438\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u0446\u0435\u0439 \u043a\u043b\u044e\u0447."})}),"\n",(0,i.jsx)(n.h3,{id:"runglobalconfig-updateconfigandrun",children:(0,i.jsx)(n.code,{children:"run(globalConfig, updateConfigAndRun)"})}),"\n",(0,i.jsxs)(n.p,{children:["To handle key press events from the key returned by ",(0,i.jsx)(n.code,{children:"getUsageInfo"}),", you can implement the ",(0,i.jsx)(n.code,{children:"run"})," method. This method returns a ",(0,i.jsx)(n.code,{children:"Promise<boolean>"})," that can be resolved when the plugin wants to return control to Jest. The ",(0,i.jsx)(n.code,{children:"boolean"})," specifies if Jest should rerun the tests after it gets the control back."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/jestjs/jest/blob/v29.2.1/packages/jest-types/src/Config.ts#L358-L422",children:(0,i.jsx)(n.code,{children:"globalConfig"})}),": A representation of Jest's current global configuration"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"updateConfigAndRun"}),": \u0434\u043e\u0437\u0432\u043e\u043b\u044f\u0454 \u0437\u0430\u043f\u0443\u0441\u043a \u0442\u0435\u0441\u0442\u0456\u0432 \u043f\u0430\u0440\u0430\u043b\u0435\u043b\u044c\u043d\u043e \u0440\u043e\u0431\u043e\u0442\u0456 \u0456\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u043f\u043b\u0430\u0433\u0456\u043d\u0443."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"class MyWatchPlugin {\n  run(globalConfig, updateConfigAndRun) {\n    // \u0449\u043e\u0441\u044c \u0432\u0438\u043a\u043e\u043d\u0443\u0432\u0430\u0442\u0438\u043c\u0435\u0442\u044c\u0441\u044f.\n  }\n}\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["\u042f\u043a\u0449\u043e \u0432\u0438\u043a\u043b\u0438\u0447\u0435\u0442\u0435 \u043c\u0435\u0442\u043e\u0434 ",(0,i.jsx)(n.code,{children:"updateConfigAndRun"}),", \u0432\u0430\u0448 \u043c\u0435\u0442\u043e\u0434 ",(0,i.jsx)(n.code,{children:"run"})," \u043d\u0435 \u043f\u043e\u0432\u0438\u043d\u0435\u043d \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442\u0438 \u0434\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f true, \u0431\u043e \u0446\u0435 \u043c\u043e\u0436\u0435 \u0432\u0438\u043a\u043b\u0438\u043a\u0430\u0442\u0438 \u043f\u043e\u0434\u0432\u0456\u0439\u043d\u0438\u0439 \u0437\u0430\u043f\u0443\u0441\u043a."]})}),"\n",(0,i.jsx)(n.h4,{id:"\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u0456-\u043a\u043b\u044e\u0447\u0456-\u043a\u043e\u043d\u0444\u0456\u0433\u0443\u0440\u0430\u0446\u0456\u0457",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u0456 \u043a\u043b\u044e\u0447\u0456 \u043a\u043e\u043d\u0444\u0456\u0433\u0443\u0440\u0430\u0446\u0456\u0457"}),"\n",(0,i.jsxs)(n.p,{children:["For stability and safety reasons, only part of the global configuration keys can be updated with ",(0,i.jsx)(n.code,{children:"updateConfigAndRun"}),". The current white list is as follows:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"configuration#bail-number--boolean",children:(0,i.jsx)(n.code,{children:"bail"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"cli#--changedsince",children:(0,i.jsx)(n.code,{children:"changedSince"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"configuration#collectcoverage-boolean",children:(0,i.jsx)(n.code,{children:"collectCoverage"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"configuration#collectcoveragefrom-array",children:(0,i.jsx)(n.code,{children:"collectCoverageFrom"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"configuration#coveragedirectory-string",children:(0,i.jsx)(n.code,{children:"coverageDirectory"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"configuration#coveragereporters-arraystring",children:(0,i.jsx)(n.code,{children:"coverageReporters"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"configuration#notify-boolean",children:(0,i.jsx)(n.code,{children:"notify"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"configuration#notifymode-string",children:(0,i.jsx)(n.code,{children:"notifyMode"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"configuration#onlyfailures-boolean",children:(0,i.jsx)(n.code,{children:"onlyFailures"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"configuration#reporters-arraymodulename--modulename-options",children:(0,i.jsx)(n.code,{children:"reporters"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"cli#--testnamepatternregex",children:(0,i.jsx)(n.code,{children:"testNamePattern"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"cli#--testpathpatternregex",children:(0,i.jsx)(n.code,{children:"testPathPattern"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"cli#--updatesnapshot",children:(0,i.jsx)(n.code,{children:"updateSnapshot"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"configuration#verbose-boolean",children:(0,i.jsx)(n.code,{children:"verbose"})})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u0456-\u043d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f",children:"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u043d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f"}),"\n",(0,i.jsx)(n.p,{children:"Plugins can be customized via your Jest configuration."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",metastring:'title="jest.config.js"',children:"module.exports = {\n  // ...\n  watchPlugins: [\n    [\n      'path/to/yourWatchPlugin',\n      {\n        key: 'k', // <- your custom key\n        prompt: 'show a custom prompt',\n      },\n    ],\n  ],\n};\n"})}),"\n",(0,i.jsx)(n.p,{children:"Recommended config names:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"key"}),": \u0437\u043c\u0456\u043d\u044e\u0454 \u043a\u043b\u044e\u0447 \u043f\u043b\u0430\u0433\u0456\u043d\u0443."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"prompt"}),": \u0434\u043e\u0437\u0432\u043e\u043b\u044f\u0454 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0435\u0432\u0456 \u043d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u0442\u0438 \u0442\u0435\u043a\u0441\u0442 \u0443 \u0437\u0430\u043f\u0438\u0442\u0456 \u043f\u043b\u0430\u0433\u0456\u043d\u0443."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"If the user provided a custom configuration, it will be passed as an argument to the plugin constructor."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"class MyWatchPlugin {\n  constructor({config}) {}\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u0432\u0438\u0431\u0456\u0440-\u0445\u043e\u0440\u043e\u0448\u043e\u0433\u043e-\u043a\u043b\u044e\u0447\u0430",children:"\u0412\u0438\u0431\u0456\u0440 \u0445\u043e\u0440\u043e\u0448\u043e\u0433\u043e \u043a\u043b\u044e\u0447\u0430"}),"\n",(0,i.jsxs)(n.p,{children:["Jest allows third-party plugins to override some of its built-in feature keys, but not all. Specifically, the following keys are ",(0,i.jsx)(n.strong,{children:"not overwritable"}),"\xa0:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"c"})," (\u043e\u0447\u0438\u0449\u0435\u043d\u043d\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0456\u0432 \u0444\u0456\u043b\u044c\u0442\u0440\u0443)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"i"})," (\u0456\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u0435 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u043d\u0435\u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u043d\u0438\u0445 \u0437\u043d\u0456\u043c\u043a\u0456\u0432)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"q"})," (\u0432\u0438\u0445\u0456\u0434)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"u"})," (\u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0432\u0441\u0456\u0445 \u043d\u0435\u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u043d\u0438\u0445 \u0437\u043d\u0456\u043c\u043a\u0456\u0432)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"w"})," (\u0432\u0438\u0432\u0456\u0434 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f \u0440\u0435\u0436\u0438\u043c\u0443 \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f / \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0438\u0445 \u0434\u0456\u0439)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The following keys for built-in functionality ",(0,i.jsx)(n.strong,{children:"can be overwritten"}),"\xa0:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"p"})," (\u043f\u0430\u0442\u0435\u0440\u043d \u0456\u043c\u0435\u043d\u0456 \u0442\u0435\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0443)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"p"})," (\u043f\u0430\u0442\u0435\u0440\u043d \u0456\u043c\u0435\u043d\u0456 \u0442\u0435\u0441\u0442\u0443)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Any key not used by built-in functionality can be claimed, as you would expect. Try to avoid using keys that are difficult to obtain on various keyboards (e.g. ",(0,i.jsx)(n.code,{children:"\xe9"}),", ",(0,i.jsx)(n.code,{children:"\u20ac"}),"), or not visible by default (e.g. many Mac keyboards do not have visual hints for characters such as ",(0,i.jsx)(n.code,{children:"|"}),", ",(0,i.jsx)(n.code,{children:"\\"}),", ",(0,i.jsx)(n.code,{children:"["}),", etc.)"]}),"\n",(0,i.jsx)(n.h3,{id:"\u043a\u043e\u043b\u0438-\u0442\u0440\u0430\u043f\u043b\u044f\u0454\u0442\u044c\u0441\u044f-\u043a\u043e\u043d\u0444\u043b\u0456\u043a\u0442",children:"\u041a\u043e\u043b\u0438 \u0442\u0440\u0430\u043f\u043b\u044f\u0454\u0442\u044c\u0441\u044f \u043a\u043e\u043d\u0444\u043b\u0456\u043a\u0442"}),"\n",(0,i.jsx)(n.p,{children:"Should your plugin attempt to overwrite a reserved key, Jest will error out with a descriptive message, something like:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"\n\u041f\u043b\u0430\u0433\u0456\u043d \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f YourFaultyPlugin \u0441\u043f\u0440\u043e\u0431\u0443\u0432\u0430\u0432 \u0437\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438 \u043a\u043b\u044e\u0447 `q`, \u044f\u043a\u0438\u0439 \u0437\u0430\u0440\u0435\u0437\u0435\u0440\u0432\u043e\u0432\u0430\u043d\u0438\u0439 \u0432\u043d\u0443\u0442\u0440\u0456\u0448\u043d\u044c\u043e \u0434\u043b\u044f \u0432\u0438\u0445\u043e\u0434\u0443 \u0437 \u0440\u0435\u0436\u0438\u043c\u0443 \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f. Please change the configuration key for this plugin.\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Third-party plugins are also forbidden to overwrite a key reserved already by another third-party plugin present earlier in the configured plugins list (",(0,i.jsx)(n.code,{children:"watchPlugins"})," array setting). When this happens, you\u2019ll also get an error message that tries to help you fix that:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"\n\u041f\u043b\u0430\u0433\u0456\u043d \u0441\u043f\u043e\u0441\u0442\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f YourFaultyPlugin \u0456 TheirFaultyPlugin \u043e\u0431\u0438\u0434\u0432\u0430 \u043d\u0430\u043c\u0430\u0433\u0430\u044e\u0442\u044c\u0441\u044f \u0437\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438 \u043a\u043b\u044e\u0447 `x`. Please change the key configuration for one of the conflicting plugins to avoid overlap.\n\n"})})]})}const h=function(e={}){const{wrapper:n}=Object.assign({},(0,t.ah)(),e.components);return n?(0,i.jsx)(n,Object.assign({},e,{children:(0,i.jsx)(d,e)})):d(e)}},1670:(e,n,s)=>{s.d(n,{Zo:()=>r,ah:()=>o});var i=s(7378);const t=i.createContext({});function o(e){const n=i.useContext(t);return i.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const l={};function r({components:e,children:n,disableParentContext:s}){let r;return r=s?"function"==typeof e?e({}):e||l:o(e),i.createElement(t.Provider,{value:r},n)}}}]);