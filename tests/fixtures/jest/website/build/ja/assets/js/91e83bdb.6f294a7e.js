"use strict";(self.webpackChunkjest_website=self.webpackChunkjest_website||[]).push([[631],{910:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>j,contentTitle:()=>a,default:()=>p,frontMatter:()=>d,metadata:()=>m,toc:()=>h});var t=s(4246),o=s(1670),i=s(8447),c=s(2599),l=s(482),r=s(6294);const d={id:"jest-object",title:"Jest\u30aa\u30d6\u30b8\u30a7\u30af\u30c8"},a=void 0,m={unversionedId:"jest-object",id:"version-29.4/jest-object",title:"Jest\u30aa\u30d6\u30b8\u30a7\u30af\u30c8",description:"jest \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u3001\u3059\u3079\u3066\u306e\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u5185\u3067\u81ea\u52d5\u7684\u306b\u30b9\u30b3\u30fc\u30d7\u3055\u308c\u307e\u3059\u3002 jest \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30e1\u30bd\u30c3\u30c9\u306f\u30e2\u30c3\u30af\u306e\u4f5c\u6210\u306b\u5f79\u7acb\u3061\u3001Jest\u306e\u5168\u4f53\u7684\u306a\u52d5\u4f5c\u3092\u5236\u5fa1\u3067\u304d\u307e\u3059\u3002 import  from '@jest/globals' \u3092\u4ecb\u3057\u3066\u660e\u793a\u7684\u306b\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002",source:"@site/i18n/ja/docusaurus-plugin-content-docs/version-29.4/JestObjectAPI.md",sourceDirName:".",slug:"/jest-object",permalink:"/ja/docs/29.4/jest-object",draft:!1,unlisted:!1,editUrl:"https://crowdin.com/project/jest-v2/ja",tags:[],version:"29.4",frontMatter:{id:"jest-object",title:"Jest\u30aa\u30d6\u30b8\u30a7\u30af\u30c8"},sidebar:"api",previous:{title:"\u30e2\u30c3\u30af\u95a2\u6570",permalink:"/ja/docs/29.4/mock-function-api"},next:{title:"Jest\u306e\u8a2d\u5b9a",permalink:"/ja/docs/29.4/configuration"}},j={},h=[{value:"\u30e1\u30bd\u30c3\u30c9",id:"\u30e1\u30bd\u30c3\u30c9",level:2},{value:"\u30e2\u30c3\u30af\u30e2\u30b8\u30e5\u30fc\u30eb",id:"\u30e2\u30c3\u30af\u30e2\u30b8\u30e5\u30fc\u30eb",level:2},{value:"<code>jest.disableAutomock()</code>",id:"jestdisableautomock",level:3},{value:"<code>jest.enableAutomock()</code>",id:"jestenableautomock",level:3},{value:"<code>jest.createMockFromModule(moduleName)</code>",id:"jestcreatemockfrommodulemodulename",level:3},{value:"<code>\u95a2\u6570</code>",id:"\u95a2\u6570",level:4},{value:"<code>\u30af\u30e9\u30b9</code>",id:"\u30af\u30e9\u30b9",level:4},{value:"<code>\u30aa\u30d6\u30b8\u30a7\u30af\u30c8</code>",id:"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8",level:4},{value:"<code> </code>",id:"-",level:4},{value:"<code>\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u578b</code>",id:"\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u578b",level:4},{value:"<code>jest.mock(moduleName, factory, options)</code>",id:"jestmockmodulename-factory-options",level:3},{value:"<code>jest.Mocked&lt;Source&gt;</code>",id:"jestmockedsource",level:3},{value:"<code>jest.mocked(source, options?)</code>",id:"jestmockedsource-options",level:3},{value:"<code>jest.unmock(moduleName)</code>",id:"jestunmockmodulename",level:3},{value:"<code>jest.deepUnmock(moduleName)</code>",id:"jestdeepunmockmodulename",level:3},{value:"<code>jest.doMock(moduleName, factory, options)</code>",id:"jestdomockmodulename-factory-options",level:3},{value:"<code>jest.dontMock(moduleName)</code>",id:"jestdontmockmodulename",level:3},{value:"<code>jest.setMock(moduleName, moduleExports)</code>",id:"jestsetmockmodulename-moduleexports",level:3},{value:"<code>jest.requireActual(moduleName)</code>",id:"jestrequireactualmodulename",level:3},{value:"<code>jest.requireMock(moduleName)</code>",id:"jestrequiremockmodulename",level:3},{value:"<code>jest.resetModules()</code>",id:"jestresetmodules",level:3},{value:"<code>jest.isolateModules(fn)</code>",id:"jestisolatemodulesfn",level:3},{value:"<code>jest.isolateModulesAsync(fn)</code>",id:"jestisolatemodulesasyncfn",level:3},{value:"\u30e2\u30c3\u30af\u95a2\u6570",id:"\u30e2\u30c3\u30af\u95a2\u6570",level:2},{value:"<code>jest.fn(implementation?)</code>",id:"jestfnimplementation",level:3},{value:"<code>jest.isMockFunction(fn)</code>",id:"jestismockfunctionfn",level:3},{value:"<code>jest.replaceProperty(object, propertyKey, value)</code>",id:"jestreplacepropertyobject-propertykey-value",level:3},{value:"<code>jest.spyOn(object, methodName)</code>",id:"jestspyonobject-methodname",level:3},{value:"<code>jest.spyOn(object, methodName, accessType?)</code>",id:"jestspyonobject-methodname-accesstype",level:3},{value:"<code>jest.Replaced&lt;Source&gt;</code>",id:"jestreplacedsource",level:3},{value:"<code>jest.Spied&lt;Source&gt;</code>",id:"jestspiedsource",level:3},{value:"<code>jest.clearAllMocks()</code>",id:"jestclearallmocks",level:3},{value:"<code>jest.resetAllMocks()</code>",id:"jestresetallmocks",level:3},{value:"<code>jest.restoreAllMocks()</code>",id:"jestrestoreallmocks",level:3},{value:"Fake Timers",id:"fake-timers",level:2},{value:"<code>jest.useFakeTimers(fakeTimersConfig?)</code>",id:"jestusefaketimersfaketimersconfig",level:3},{value:"<code>jest.useRealTimers()</code>",id:"jestuserealtimers",level:3},{value:"<code>jest.runAllTicks()</code>",id:"jestrunallticks",level:3},{value:"<code>jest.runAllTimers()</code>",id:"jestrunalltimers",level:3},{value:"<code>jest.runAllImmediates()</code>",id:"jestrunallimmediates",level:3},{value:"<code>jest.advanceTimersByTime(msToRun)</code>",id:"jestadvancetimersbytimemstorun",level:3},{value:"<code>jest.runOnlyPendingTimers()</code>",id:"jestrunonlypendingtimers",level:3},{value:"<code>jest.advanceTimersToNextTimer(steps)</code>",id:"jestadvancetimerstonexttimersteps",level:3},{value:"<code>jest.clearAllTimers()</code>",id:"jestclearalltimers",level:3},{value:"<code>jest.getTimerCount()</code>",id:"jestgettimercount",level:3},{value:"<code>jest.now()</code>",id:"jestnow",level:3},{value:"<code>jest.setSystemTime(now?: number | Date)</code>",id:"jestsetsystemtimenow-number--date",level:3},{value:"<code>jest.getRealSystemTime()</code>",id:"jestgetrealsystemtime",level:3},{value:"\u305d\u306e\u4ed6",id:"\u305d\u306e\u4ed6",level:2},{value:"<code>jest.getSeed()</code>",id:"jestgetseed",level:3},{value:"<code>jest.isEnvironmentTornDown()</code>",id:"jestisenvironmenttorndown",level:3},{value:"<code>jest.retryTimes(numRetries, options?)</code>",id:"jestretrytimesnumretries-options",level:3},{value:"<code>jest.setTimeout(timeout)</code>",id:"jestsettimeouttimeout",level:3}];function u(e){const n=Object.assign({p:"p",code:"code",h2:"h2",hr:"hr",h3:"h3",admonition:"admonition",a:"a",pre:"pre",h4:"h4",ul:"ul",li:"li",strong:"strong"},(0,o.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"jest"})," \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u3001\u3059\u3079\u3066\u306e\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u5185\u3067\u81ea\u52d5\u7684\u306b\u30b9\u30b3\u30fc\u30d7\u3055\u308c\u307e\u3059\u3002 ",(0,t.jsx)(n.code,{children:"jest"})," \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30e1\u30bd\u30c3\u30c9\u306f\u30e2\u30c3\u30af\u306e\u4f5c\u6210\u306b\u5f79\u7acb\u3061\u3001Jest\u306e\u5168\u4f53\u7684\u306a\u52d5\u4f5c\u3092\u5236\u5fa1\u3067\u304d\u307e\u3059\u3002 ",(0,t.jsx)(n.code,{children:"import {jest} from '@jest/globals'"})," \u3092\u4ecb\u3057\u3066\u660e\u793a\u7684\u306b\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002"]}),"\n","\n",(0,t.jsx)(l.ZP,{}),"\n",(0,t.jsx)(n.h2,{id:"\u30e1\u30bd\u30c3\u30c9",children:"\u30e1\u30bd\u30c3\u30c9"}),"\n","\n","\n",(0,t.jsx)(r.Z,{toc:h.slice(1)}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\u30e2\u30c3\u30af\u30e2\u30b8\u30e5\u30fc\u30eb",children:"\u30e2\u30c3\u30af\u30e2\u30b8\u30e5\u30fc\u30eb"}),"\n",(0,t.jsx)(n.h3,{id:"jestdisableautomock",children:(0,t.jsx)(n.code,{children:"jest.disableAutomock()"})}),"\n",(0,t.jsx)(n.p,{children:"\u30e2\u30b8\u30e5\u30fc\u30eb\u30ed\u30fc\u30c0\u30fc\u306e\u81ea\u52d5\u30e2\u30c3\u30af\u6a5f\u80fd\u3092\u7121\u52b9\u306b\u3057\u307e\u3059\u3002"}),"\n",(0,t.jsxs)(n.admonition,{type:"info",children:[(0,t.jsxs)(n.p,{children:["Automatic mocking should be enabled via ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/configuration#automock-boolean",children:(0,t.jsx)(n.code,{children:"automock"})})," configuration option for this method to have any effect. Also see documentation of the configuration option for more details."]}),(0,t.jsxs)(i.Z,{groupId:"code-examples",children:[(0,t.jsx)(c.Z,{value:"js",label:"JavaScript",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",metastring:"tab",children:"/** @type {import('jest').Config} */\nconst config = {\n  automock: true,\n};\n\nmodule.exports = config;\n"})})}),(0,t.jsx)(c.Z,{value:"ts",label:"TypeScript",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:"tab",children:"import type {Config} from 'jest';\n\nconst config: Config = {\n  automock: true,\n};\n\nexport default config;\n"})})})]})]}),"\n",(0,t.jsxs)(n.p,{children:["After ",(0,t.jsx)(n.code,{children:"disableAutomock()"})," is called, all ",(0,t.jsx)(n.code,{children:"require()"}),"s will return the real versions of each module (rather than a mocked version)."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",metastring:'title="utils.js"',children:"export default {\n  authorize: () => {\n    return 'token';\n  },\n};\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",metastring:'title="__tests__/disableAutomocking.js"',children:"import utils from '../utils';\n\njest.disableAutomock();\n\ntest('original implementation', () => {\n  // now we have the original implementation,\n  // even if we set the automocking in a jest configuration\n  expect(utils.authorize()).toBe('token');\n});\n"})}),"\n",(0,t.jsx)(n.p,{children:'\u3053\u306e\u95a2\u6570\u306f\u30e2\u30c3\u30af\u3057\u305f\u3044\u4f9d\u5b58\u95a2\u4fc2\u304c\u3001\u30e2\u30c3\u30af\u304c\u8981\u3089\u306a\u3044\u3082\u306e\u3088\u308a\u3082\u306f\u308b\u304b\u306b\u5c11\u306a\u3044\u30b7\u30ca\u30ea\u30aa\u304c\u3042\u308b\u5834\u5408\u306b\u4fbf\u5229\u3067\u3059\u3002 \u4f8b\u3048\u3070\u3001"implementation details"\u3068\u3057\u3066\u5206\u985e\u3055\u308c\u308b\u306e\u304c\u59a5\u5f53\u306a\u5927\u91cf\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u6301\u3064\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30c6\u30b9\u30c8\u66f8\u304f\u5834\u5408\u3001\u305d\u308c\u3089\u3092\u30e2\u30c3\u30af\u3057\u305f\u3044\u3068\u306f\u601d\u308f\u306a\u3044\u3067\u3057\u3087\u3046\u3002'}),"\n",(0,t.jsxs)(n.p,{children:['Examples of dependencies that might be considered "implementation details" are things ranging from language built-ins (e.g. ',(0,t.jsx)(n.code,{children:"Array.prototype"})," methods) to highly common utility methods (e.g. ",(0,t.jsx)(n.code,{children:"underscore"}),", ",(0,t.jsx)(n.code,{children:"lodash"}),", array utilities, etc) and entire libraries like ",(0,t.jsx)(n.code,{children:"React.js"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u306e\u305f\u3081\u306b",(0,t.jsx)(n.code,{children:"jest"}),"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["When using ",(0,t.jsx)(n.code,{children:"babel-jest"}),", calls to ",(0,t.jsx)(n.code,{children:"disableAutomock()"})," will automatically be hoisted to the top of the code block. Use ",(0,t.jsx)(n.code,{children:"autoMockOff()"})," if you want to explicitly avoid this behavior."]})}),"\n",(0,t.jsx)(n.h3,{id:"jestenableautomock",children:(0,t.jsx)(n.code,{children:"jest.enableAutomock()"})}),"\n",(0,t.jsx)(n.p,{children:"\u30e2\u30b8\u30e5\u30fc\u30eb\u30ed\u30fc\u30c0\u30fc\u3067\u81ea\u52d5\u30e2\u30c3\u30af\u6a5f\u80fd\u3092\u6709\u52b9\u5316\u3057\u307e\u3059\u3002"}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["For more details on automatic mocking see documentation of ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/configuration#automock-boolean",children:(0,t.jsx)(n.code,{children:"automock"})})," configuration option."]})}),"\n",(0,t.jsx)(n.p,{children:"\u4f8b:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",metastring:'title="utils.js"',children:"export default {\n  authorize: () => {\n    return 'token';\n  },\n  isAuthorized: secret => secret === 'wizard',\n};\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",metastring:'title="__tests__/enableAutomocking.js"',children:"jest.enableAutomock();\n\nimport utils from '../utils';\n\ntest('original implementation', () => {\n  // now we have the mocked implementation,\n  expect(utils.authorize._isMockFunction).toBeTruthy();\n  expect(utils.isAuthorized._isMockFunction).toBeTruthy();\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u306e\u305f\u3081\u306b",(0,t.jsx)(n.code,{children:"jest"}),"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"babel-jest"}),"\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001",(0,t.jsx)(n.code,{children:"enableAutomock"}),"\u306e\u547c\u3073\u51fa\u3057\u306f\u81ea\u52d5\u7684\u306b\u30b3\u30fc\u30c9\u306e\u5148\u982d\u3067\u884c\u308f\u308c\u307e\u3059\u3002 \u3053\u306e\u52d5\u4f5c\u3092\u907f\u3051\u308b\u306b\u306f",(0,t.jsx)(n.code,{children:"autoMockOn"})," \u3092\u660e\u793a\u7684\u306b\u4f7f\u7528\u3057\u3066\u4e0b\u3055\u3044\u3002"]})}),"\n",(0,t.jsx)(n.h3,{id:"jestcreatemockfrommodulemodulename",children:(0,t.jsx)(n.code,{children:"jest.createMockFromModule(moduleName)"})}),"\n",(0,t.jsx)(n.p,{children:"\u4e0e\u3048\u3089\u308c\u305f\u540d\u524d\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u5bfe\u3057\u3066\u81ea\u52d5\u30e2\u30c3\u30af\u5316\u30b7\u30b9\u30c6\u30e0\u3092\u5229\u7528\u3057\u3066\u30e2\u30c3\u30af\u5316\u3057\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002"}),"\n",(0,t.jsxs)(n.p,{children:["This is useful when you want to create a ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/manual-mocks",children:"manual mock"})," that extends the automatic mock's behavior:"]}),"\n",(0,t.jsxs)(i.Z,{groupId:"code-examples",children:[(0,t.jsxs)(c.Z,{value:"js",label:"JavaScript",children:[(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",metastring:'tab={"span":2} title="utils.js"',children:"module.exports = {\n  authorize: () => {\n    return 'token';\n  },\n  isAuthorized: secret => secret === 'wizard',\n};\n"})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",metastring:'title="__tests__/createMockFromModule.test.js"',children:"const utils = jest.createMockFromModule('../utils');\n\nutils.isAuthorized = jest.fn(secret => secret === 'not wizard');\n\ntest('implementation created by jest.createMockFromModule', () => {\n  expect(jest.isMockFunction(utils.authorize)).toBe(true);\n  expect(utils.isAuthorized('not wizard')).toBe(true);\n});\n"})})]}),(0,t.jsxs)(c.Z,{value:"ts",label:"TypeScript",children:[(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:'tab={"span":2} title="utils.ts"',children:"export const utils = {\n  authorize: () => {\n    return 'token';\n  },\n  isAuthorized: (secret: string) => secret === 'wizard',\n};\n"})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:'title="__tests__/createMockFromModule.test.ts"',children:"const {utils} =\n  jest.createMockFromModule<typeof import('../utils')>('../utils');\n\nutils.isAuthorized = jest.fn((secret: string) => secret === 'not wizard');\n\ntest('implementation created by jest.createMockFromModule', () => {\n  expect(jest.isMockFunction(utils.authorize)).toBe(true);\n  expect(utils.isAuthorized('not wizard')).toBe(true);\n});\n"})})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"createMockFromModule"})," \u304c\u4ee5\u4e0b\u306e\u30c7\u30fc\u30bf\u578b\u3092\u30e2\u30c3\u30af\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002"]}),"\n",(0,t.jsx)(n.h4,{id:"\u95a2\u6570",children:(0,t.jsx)(n.code,{children:"\u95a2\u6570"})}),"\n",(0,t.jsxs)(n.p,{children:["Creates a new ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/mock-function-api",children:"mock function"}),". The new function has no formal parameters and when called will return ",(0,t.jsx)(n.code,{children:"undefined"}),". This functionality also applies to ",(0,t.jsx)(n.code,{children:"async"})," functions."]}),"\n",(0,t.jsx)(n.h4,{id:"\u30af\u30e9\u30b9",children:(0,t.jsx)(n.code,{children:"\u30af\u30e9\u30b9"})}),"\n",(0,t.jsx)(n.p,{children:"Creates a new class. The interface of the original class is maintained, all of the class member functions and properties will be mocked."}),"\n",(0,t.jsx)(n.h4,{id:"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8",children:(0,t.jsx)(n.code,{children:"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8"})}),"\n",(0,t.jsx)(n.p,{children:"\u30c7\u30a3\u30fc\u30d7\u30af\u30ed\u30fc\u30f3\u3055\u308c\u305f\u65b0\u3057\u3044\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30ad\u30fc\u306f\u7dad\u6301\u3055\u308c\u3001\u305d\u306e\u5024\u306f\u30e2\u30c3\u30af\u3055\u308c\u307e\u3059\u3002"}),"\n",(0,t.jsx)(n.h4,{id:"-",children:(0,t.jsx)(n.code,{children:" "})}),"\n",(0,t.jsx)(n.p,{children:"Creates a new empty array, ignoring the original."}),"\n",(0,t.jsx)(n.h4,{id:"\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u578b",children:(0,t.jsx)(n.code,{children:"\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u578b"})}),"\n",(0,t.jsx)(n.p,{children:"Creates a new property with the same primitive value as the original property."}),"\n",(0,t.jsx)(n.p,{children:"\u4f8b:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",metastring:'title="example.js"',children:"module.exports = {\n  function: function square(a, b) {\n    return a * b;\n  },\n  asyncFunction: async function asyncSquare(a, b) {\n    const result = (await a) * b;\n    return result;\n  },\n  class: new (class Bar {\n    constructor() {\n      this.array = [1, 2, 3];\n    }\n    foo() {}\n  })(),\n  object: {\n    baz: 'foo',\n    bar: {\n      fiz: 1,\n      buzz: [1, 2, 3],\n    },\n  },\n  array: [1, 2, 3],\n  number: 123,\n  string: 'baz',\n  boolean: true,\n  symbol: Symbol.for('a.b.c'),\n};\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",metastring:'title="__tests__/example.test.js"',children:"const example = jest.createMockFromModule('../example');\n\ntest('should run example code', () => {\n  // creates a new mocked function with no formal arguments.\n  expect(example.function.name).toBe('square');\n  expect(example.function).toHaveLength(0);\n\n  // async functions get the same treatment as standard synchronous functions.\n  expect(example.asyncFunction.name).toBe('asyncSquare');\n  expect(example.asyncFunction).toHaveLength(0);\n\n  // creates a new class with the same interface, member functions and properties are mocked.\n  expect(example.class.constructor.name).toBe('Bar');\n  expect(example.class.foo.name).toBe('foo');\n  expect(example.class.array).toHaveLength(0);\n\n  // creates a deeply cloned version of the original object.\n  expect(example.object).toEqual({\n    baz: 'foo',\n    bar: {\n      fiz: 1,\n      buzz: [],\n    },\n  });\n\n  // creates a new empty array, ignoring the original array.\n  expect(example.array).toHaveLength(0);\n\n  // creates a new property with the same primitive value as the original property.\n  expect(example.number).toBe(123);\n  expect(example.string).toBe('baz');\n  expect(example.boolean).toBe(true);\n  expect(example.symbol).toEqual(Symbol.for('a.b.c'));\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"jestmockmodulename-factory-options",children:(0,t.jsx)(n.code,{children:"jest.mock(moduleName, factory, options)"})}),"\n",(0,t.jsxs)(n.p,{children:["require\u3055\u308c\u305f\u969b\u306b\u81ea\u52d5\u30e2\u30c3\u30af\u5316\u3055\u308c\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30e2\u30c3\u30af\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 ",(0,t.jsx)(n.code,{children:"factory"})," \u3068 ",(0,t.jsx)(n.code,{children:"options"}),"\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3059\u3002 \u4f8b\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",metastring:'title="banana.js"',children:"module.exports = () => 'banana';\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",metastring:'title="__tests__/test.js"',children:"jest.mock('../banana');\n\nconst banana = require('../banana'); // banana will be explicitly mocked.\n\nbanana(); // will return 'undefined' because the function is auto-mocked.\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u7b2c\uff12\u5f15\u6570\u306fJest\u306e\u81ea\u52d5\u30e2\u30c3\u30af\u306b\u3088\u308b\u8a2d\u5b9a\u3092\u7528\u3044\u308b\u4ee3\u308f\u308a\u306b\u660e\u793a\u7684\u306b\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30d5\u30a1\u30af\u30c8\u30ea\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002"}),"\n",(0,t.jsxs)(i.Z,{groupId:"code-examples",children:[(0,t.jsx)(c.Z,{value:"js",label:"JavaScript",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",metastring:"tab",children:"jest.mock('../moduleName', () => {\n  return jest.fn(() => 42);\n});\n\n// This runs the function specified as second argument to `jest.mock`.\nconst moduleName = require('../moduleName');\nmoduleName(); // Will return '42';\n"})})}),(0,t.jsx)(c.Z,{value:"ts",label:"TypeScript",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:"tab",children:"// The optional type argument provides typings for the module factory\njest.mock<typeof import('../moduleName')>('../moduleName', () => {\n  return jest.fn(() => 42);\n});\n\n// This runs the function specified as second argument to `jest.mock`.\nconst moduleName = require('../moduleName');\nmoduleName(); // Will return '42';\n"})})})]}),"\n",(0,t.jsxs)(n.p,{children:["\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u306eES6\u30e2\u30b8\u30e5\u30fc\u30eb\u3067 ",(0,t.jsx)(n.code,{children:"factory"})," \u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u3001 ",(0,t.jsx)(n.code,{children:"__esModule: true"})," \u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u901a\u5e38\u3001\u3053\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306f Babel / TypeScript \u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u307e\u3059\u304c\u3001\u3053\u3053\u3067\u306f\u624b\u52d5\u3067\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u30c7\u30d5\u30a9\u30eb\u30c8\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u5834\u5408\u3001\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089 ",(0,t.jsx)(n.code,{children:"default"})," \u3068\u3044\u3046\u540d\u524d\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"import moduleName, {foo} from '../moduleName';\n\njest.mock('../moduleName', () => {\n  return {\n    __esModule: true,\n    default: jest.fn(() => 42),\n    foo: jest.fn(() => 43),\n  };\n});\n\nmoduleName(); // 42\u3092\u8fd4\u3057\u307e\u3059\nfoo(); // 43\u3092\u8fd4\u3057\u307e\u3059\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u7b2c\uff13\u5f15\u6570\u306f\u4eee\u60f3\u30e2\u30c3\u30af\u3092\u4f5c\u6210\u3059\u308b\u306e\u306b\u4f7f\u7528\u3057\u307e\u3059 - \u3053\u308c\u306f\u30b7\u30b9\u30c6\u30e0\u5185\u306e\u3069\u3053\u306b\u3082\u5b58\u5728\u3057\u306a\u3044\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30e2\u30c3\u30af\u3067\u3059\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"jest.mock(\n  '../moduleName',\n  () => {\n    /*\n     * Custom implementation of a module that doesn't exist in JS,\n     * like a generated module or a native module in react-native.\n     */\n  },\n  {virtual: true},\n);\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"caution",children:(0,t.jsxs)(n.p,{children:["Importing a module in a setup file (as specified by ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/configuration#setupfilesafterenv-array",children:(0,t.jsx)(n.code,{children:"setupFilesAfterEnv"})}),") will prevent mocking for the module in question, as well as all the modules that it imports."]})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"jest.mock"}),"\u306b\u3088\u308a\u30e2\u30c3\u30af\u3055\u308c\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u3001",(0,t.jsx)(n.code,{children:"jest.mock"}),"\u3092\u547c\u3073\u51fa\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u5185\u3067\u306e\u307f\u30e2\u30c3\u30af\u3055\u308c\u307e\u3059\u3002 \u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30e2\u30c3\u30af\u3057\u305f\u30c6\u30b9\u30c8\u306e\u5f8c\u306b\u5b9f\u884c\u3057\u305f\u3068\u3057\u3066\u3082\u3001\u305d\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u5225\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u306f\u3001\u672c\u7269\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u30a4\u30f3\u30dd\u30fc\u30c8\u3055\u308c\u307e\u3059\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u306e\u305f\u3081\u306b",(0,t.jsx)(n.code,{children:"jest"}),"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["Writing tests in TypeScript? Use the ",(0,t.jsx)(n.a,{href:"MockFunctionAPI.md/#jestmockedsource",children:(0,t.jsx)(n.code,{children:"jest.Mocked"})})," utility type or the ",(0,t.jsx)(n.a,{href:"MockFunctionAPI.md/#jestmockedsource-options",children:(0,t.jsx)(n.code,{children:"jest.mocked()"})})," helper method to have your mocked modules typed."]})}),"\n",(0,t.jsx)(n.h3,{id:"jestmockedsource",children:(0,t.jsx)(n.code,{children:"jest.Mocked<Source>"})}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"MockFunctionAPI.md/#jestmockedsource",children:"TypeScript Usage"})," chapter of Mock Functions page for documentation."]}),"\n",(0,t.jsx)(n.h3,{id:"jestmockedsource-options",children:(0,t.jsx)(n.code,{children:"jest.mocked(source, options?)"})}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"MockFunctionAPI.md/#jestmockedsource-options",children:"TypeScript Usage"})," chapter of Mock Functions page for documentation."]}),"\n",(0,t.jsx)(n.h3,{id:"jestunmockmodulename",children:(0,t.jsx)(n.code,{children:"jest.unmock(moduleName)"})}),"\n",(0,t.jsxs)(n.p,{children:["\u6307\u5b9a\u3057\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u3064\u3044\u3066",(0,t.jsx)(n.code,{children:"require()"}),"\u3057\u305f\u969b\u306b\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\u30b7\u30b9\u30c6\u30e0\u306f\u6c7a\u3057\u3066\u30e2\u30c3\u30af\u3057\u305f\u3082\u306e\u3092\u8fd4\u3055\u306a\u3044\u3053\u3068\u3092\u8a2d\u5b9a\u3057\u307e\u3059(\u4f8b\u3048\u3070\u5e38\u306b\u672c\u7269\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u8fd4\u3059\u3079\u304d\u5834\u5408\u306a\u3069)\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\u3053\u306eAPI\u306e\u6700\u3082\u4e00\u822c\u7684\u306a\u7528\u9014\u306f\u3001\u6307\u5b9a\u3055\u308c\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4e0e\u3048\u3089\u308c\u305f\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3067\u30c6\u30b9\u30c8\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u308b\u5834\u5408(\u305d\u306e\u305f\u3081\u81ea\u52d5\u7684\u306b\u30e2\u30c3\u30af\u3092\u3057\u305f\u304f\u306a\u3044\u5834\u5408) \u3067\u3059\u3002"}),"\n",(0,t.jsxs)(n.p,{children:["\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u306e\u305f\u3081\u306b",(0,t.jsx)(n.code,{children:"jest"}),"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"jestdeepunmockmodulename",children:(0,t.jsx)(n.code,{children:"jest.deepUnmock(moduleName)"})}),"\n",(0,t.jsx)(n.p,{children:"Indicates that the module system should never return a mocked version of the specified module and its dependencies."}),"\n",(0,t.jsxs)(n.p,{children:["\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u306e\u305f\u3081\u306b",(0,t.jsx)(n.code,{children:"jest"}),"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"jestdomockmodulename-factory-options",children:(0,t.jsx)(n.code,{children:"jest.doMock(moduleName, factory, options)"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"babel-jest"}),"\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001 ",(0,t.jsx)(n.code,{children:"mock"})," \u306e\u547c\u3073\u51fa\u3057\u306f\u81ea\u52d5\u7684\u306b\u30b3\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u306e\u5148\u982d\u3067\u884c\u308f\u308c\u307e\u3059\u3002 \u3053\u306e\u632f\u308b\u821e\u3044\u3092\u660e\u793a\u7684\u306b\u907f\u3051\u308b\u306b\u306f\u3053\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\u3053\u306e\u95a2\u6570\u304c\u6709\u7528\u306a\u4f8b\u306e\uff11\u3064\u3068\u3057\u3066\u3001\u540c\u4e00\u30d5\u30a1\u30a4\u30eb\u5185\u3067\u7570\u306a\u308b\u632f\u308b\u821e\u3044\u306e\u30e2\u30c3\u30af\u3092\u4f7f\u7528\u3057\u305f\u3044\u5834\u5408\u304c\u6319\u3052\u3089\u308c\u307e\u3059:"}),"\n",(0,t.jsxs)(i.Z,{groupId:"code-examples",children:[(0,t.jsx)(c.Z,{value:"js",label:"JavaScript",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",metastring:"tab",children:"beforeEach(() => {\n  jest.resetModules();\n});\n\ntest('moduleName 1', () => {\n  jest.doMock('../moduleName', () => {\n    return jest.fn(() => 1);\n  });\n  const moduleName = require('../moduleName');\n  expect(moduleName()).toBe(1);\n});\n\ntest('moduleName 2', () => {\n  jest.doMock('../moduleName', () => {\n    return jest.fn(() => 2);\n  });\n  const moduleName = require('../moduleName');\n  expect(moduleName()).toBe(2);\n});\n"})})}),(0,t.jsx)(c.Z,{value:"ts",label:"TypeScript",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:"tab",children:"beforeEach(() => {\n  jest.resetModules();\n});\n\ntest('moduleName 1', () => {\n  // The optional type argument provides typings for the module factory\n  jest.doMock<typeof import('../moduleName')>('../moduleName', () => {\n    return jest.fn(() => 1);\n  });\n  const moduleName = require('../moduleName');\n  expect(moduleName()).toBe(1);\n});\n\ntest('moduleName 2', () => {\n  jest.doMock<typeof import('../moduleName')>('../moduleName', () => {\n    return jest.fn(() => 2);\n  });\n  const moduleName = require('../moduleName');\n  expect(moduleName()).toBe(2);\n});\n"})})})]}),"\n",(0,t.jsxs)(n.p,{children:["ES6 \u30a4\u30f3\u30dd\u30fc\u30c8\u3067 ",(0,t.jsx)(n.code,{children:"jest.doMock()"})," \u3092\u4f7f\u7528\u3059\u308b\u306b\u306f\u3001\u8ffd\u52a0\u306e\u624b\u9806\u304c\u5fc5\u8981\u3067\u3059\u3002 \u30c6\u30b9\u30c8\u3067 ",(0,t.jsx)(n.code,{children:"require"})," \u3092\u4f7f\u7528\u3057\u305f\u304f\u306a\u3044\u5834\u5408\u306f\u3001\u6b21\u306e\u624b\u9806\u306b\u5f93\u3063\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"__esModule: true"})," \u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059 (\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f ",(0,t.jsx)(n.a,{href:"#jestmockmodulename-factory-options",children:(0,t.jsx)(n.code,{children:"jest.mock()"})})," API \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044)\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:["\u9759\u7684ES6\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u306f\u30d5\u30a1\u30a4\u30eb\u306e\u5148\u982d\u3067\u884c\u308f\u308c\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u4ee3\u308f\u308a\u306b ",(0,t.jsx)(n.code,{children:"import()"})," \u3092\u4f7f\u7528\u3057\u3066\u52d5\u7684\u306b\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:["\u6700\u5f8c\u306b\u3001\u52d5\u7684\u30a4\u30f3\u30dd\u30fc\u30c8\u3092\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u74b0\u5883\u304c\u5fc5\u8981\u3067\u3059\u3002 \u521d\u671f\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306f\u3001 ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/getting-started#using-babel",children:"Using Babel"})," \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u6b21\u306b\u3001\u30d7\u30e9\u30b0\u30a4\u30f3 ",(0,t.jsx)(n.a,{href:"https://www.npmjs.com/package/babel-plugin-dynamic-import-node",children:"babel-plugin-dynamic-import-node"}),"\u3001\u307e\u305f\u306f\u540c\u7b49\u306e\u3082\u306e\u3092 Babel \u306e\u8a2d\u5b9a\u306b\u8ffd\u52a0\u3057\u3066\u3001Node \u3067\u306e\u52d5\u7684\u30a4\u30f3\u30dd\u30fc\u30c8\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"beforeEach(() => {\n  jest.resetModules();\n});\n\ntest('moduleName 1', () => {\n  jest.doMock('../moduleName', () => {\n    return {\n      __esModule: true,\n      default: 'default1',\n      foo: 'foo1',\n    };\n  });\n  return import('../moduleName').then(moduleName => {\n    expect(moduleName.default).toBe('default1');\n    expect(moduleName.foo).toBe('foo1');\n  });\n});\n\ntest('moduleName 2', () => {\n  jest.doMock('../moduleName', () => {\n    return {\n      __esModule: true,\n      default: 'default2',\n      foo: 'foo2',\n    };\n  });\n  return import('../moduleName').then(moduleName => {\n    expect(moduleName.default).toBe('default2');\n    expect(moduleName.foo).toBe('foo2');\n  });\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u306e\u305f\u3081\u306b",(0,t.jsx)(n.code,{children:"jest"}),"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"jestdontmockmodulename",children:(0,t.jsx)(n.code,{children:"jest.dontMock(moduleName)"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"babel-jest"}),"\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001 ",(0,t.jsx)(n.code,{children:"unmock"})," \u306e\u547c\u3073\u51fa\u3057\u306f\u81ea\u52d5\u7684\u306b\u30b3\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u306e\u5148\u982d\u3067\u884c\u308f\u308c\u307e\u3059\u3002 \u3053\u306e\u632f\u308b\u821e\u3044\u3092\u660e\u793a\u7684\u306b\u907f\u3051\u308b\u306b\u306f\u3053\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u306e\u305f\u3081\u306b",(0,t.jsx)(n.code,{children:"jest"}),"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"jestsetmockmodulename-moduleexports",children:(0,t.jsx)(n.code,{children:"jest.setMock(moduleName, moduleExports)"})}),"\n",(0,t.jsx)(n.p,{children:"\u6307\u5b9a\u3055\u308c\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u3064\u3044\u3066\u30e2\u30b8\u30e5\u30fc\u30eb\u30b7\u30b9\u30c6\u30e0\u304c\u8fd4\u3059\u3079\u304d\u30e2\u30c3\u30af\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u660e\u793a\u7684\u306b\u4e0e\u3048\u307e\u3059\u3002"}),"\n",(0,t.jsxs)(n.p,{children:["On occasion, there are times where the automatically generated mock the module system would normally provide you isn't adequate enough for your testing needs. \u901a\u5e38\u305d\u306e\u3088\u3046\u306a\u72b6\u6cc1\u3067\u306f\u5f53\u8a72\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u3088\u308a\u9069\u3057\u305f",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/manual-mocks",children:"\u30de\u30cb\u30e5\u30a2\u30eb\u30e2\u30c3\u30af"}),"\u3092\u4f5c\u6210\u3059\u308b\u3079\u304d\u3067\u3059\u3002 \u3057\u304b\u3057\u3068\u3066\u3082\u7a00\u3067\u3059\u304c\u3001\u30de\u30cb\u30e5\u30a2\u30eb\u30e2\u30c3\u30af\u3067\u3059\u3089\u76ee\u7684\u306b\u5bfe\u3057\u3066\u9069\u5207\u3067\u306a\u304f\u30c6\u30b9\u30c8\u5185\u3067\u30e2\u30c3\u30af\u3092\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u30b1\u30fc\u30b9\u304c\u3042\u308a\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\u3053\u308c\u3089\u306e\u7a00\u306a\u30b7\u30ca\u30ea\u30aa\u3067\u306f\u3001\u3053\u306eAPI\u3067\u30e2\u30b8\u30e5\u30fc\u30eb\u30b7\u30b9\u30c6\u30e0\u306e\u30e2\u30c3\u30af\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30ec\u30b8\u30b9\u30c8\u30ea\u306e\u30b9\u30ed\u30c3\u30c8\u306b\u624b\u52d5\u3067\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002"}),"\n",(0,t.jsxs)(n.p,{children:["\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u306e\u305f\u3081\u306b",(0,t.jsx)(n.code,{children:"jest"}),"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["It is recommended to use ",(0,t.jsx)(n.a,{href:"#jestmockmodulename-factory-options",children:(0,t.jsx)(n.code,{children:"jest.mock()"})})," instead. ",(0,t.jsx)(n.code,{children:"jest.mock"}),"API\u306e\u7b2c\uff12\u5f15\u6570\u306f\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3055\u308c\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u4ee3\u66ff\u3068\u306a\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30d5\u30a1\u30af\u30c8\u30ea\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002"]})}),"\n",(0,t.jsx)(n.h3,{id:"jestrequireactualmodulename",children:(0,t.jsx)(n.code,{children:"jest.requireActual(moduleName)"})}),"\n",(0,t.jsx)(n.p,{children:"\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u30e2\u30c3\u30af\u3057\u305f\u3082\u306e\u3092\u53d7\u3051\u53d6\u308b\u8a2d\u5b9a\u3067\u3042\u308b\u304b\u3092\u78ba\u8a8d\u305b\u305a\u3001\u30e2\u30c3\u30af\u3067\u306f\u306a\u3044\u672c\u7269\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u8fd4\u3059\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002"}),"\n",(0,t.jsxs)(i.Z,{groupId:"code-examples",children:[(0,t.jsx)(c.Z,{value:"js",label:"JavaScript",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",metastring:"tab",children:"jest.mock('../myModule', () => {\n  // Require the original module to not be mocked...\n  const originalModule = jest.requireActual('../myModule');\n\n  return {\n    __esModule: true, // Use it when dealing with esModules\n    ...originalModule,\n    getRandom: jest.fn(() => 10),\n  };\n});\n\nconst getRandom = require('../myModule').getRandom;\n\ngetRandom(); // Always returns 10\n"})})}),(0,t.jsx)(c.Z,{value:"ts",label:"TypeScript",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:"tab",children:"jest.mock('../myModule', () => {\n  // Require the original module to not be mocked...\n  const originalModule =\n    jest.requireActual<typeof import('../myModule')>('../myModule');\n\n  return {\n    __esModule: true, // Use it when dealing with esModules\n    ...originalModule,\n    getRandom: jest.fn(() => 10),\n  };\n});\n\nconst getRandom = require('../myModule').getRandom;\n\ngetRandom(); // Always returns 10\n"})})})]}),"\n",(0,t.jsx)(n.h3,{id:"jestrequiremockmodulename",children:(0,t.jsx)(n.code,{children:"jest.requireMock(moduleName)"})}),"\n",(0,t.jsx)(n.p,{children:"\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u901a\u5e38\u901a\u308arequire\u3055\u308c\u308b\u304b\u3092\u78ba\u8a8d\u305b\u305a\u3001\u672c\u7269\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u306f\u306a\u3044\u30e2\u30c3\u30af\u3092\u8fd4\u3059\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"jestresetmodules",children:(0,t.jsx)(n.code,{children:"jest.resetModules()"})}),"\n",(0,t.jsx)(n.p,{children:"\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30ec\u30b8\u30b9\u30c8\u30ea - \u5168\u3066\u306erequire\u3055\u308c\u305f\u30e2\u30b8\u30e5\u30fc\u30eb - \u3092\u30ea\u30bb\u30c3\u30c8\u3057\u307e\u3059 \u3002 \u30c6\u30b9\u30c8\u9593\u3067\u30ed\u30fc\u30ab\u30eb\u306e\u72b6\u614b\u304c\u7af6\u5408\u3057\u3046\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u72b6\u614b\u3092\u30c6\u30b9\u30c8\u3054\u3068\u306b\u5207\u308a\u96e2\u3059\u306e\u306b\u5f79\u7acb\u3061\u307e\u3059\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u4f8b:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const sum1 = require('../sum');\njest.resetModules();\nconst sum2 = require('../sum');\nsum1 === sum2;\n// > false (Both sum modules are separate \"instances\" of the sum module.)\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u30c6\u30b9\u30c8\u306b\u304a\u3051\u308b\u4f8b:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"beforeEach(() => {\n  jest.resetModules();\n});\n\ntest('works', () => {\n  const sum = require('../sum');\n});\n\ntest('works too', () => {\n  const sum = require('../sum');\n  // sum is a different copy of the sum module from the previous test.\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u306e\u305f\u3081\u306b",(0,t.jsx)(n.code,{children:"jest"}),"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"jestisolatemodulesfn",children:(0,t.jsx)(n.code,{children:"jest.isolateModules(fn)"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"jest.isolateModules(fn)"})," goes a step further than ",(0,t.jsx)(n.code,{children:"jest.resetModules()"})," and creates a sandbox registry for the modules that are loaded inside the callback function. This is useful to isolate specific modules for every test so that local module state doesn't conflict between tests."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"let myModule;\njest.isolateModules(() => {\n  myModule = require('myModule');\n});\n\nconst otherCopyOfMyModule = require('myModule');\n"})}),"\n",(0,t.jsx)(n.h3,{id:"jestisolatemodulesasyncfn",children:(0,t.jsx)(n.code,{children:"jest.isolateModulesAsync(fn)"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"jest.isolateModulesAsync()"})," is the equivalent of ",(0,t.jsx)(n.code,{children:"jest.isolateModules()"}),", but for async callbacks. The caller is expected to ",(0,t.jsx)(n.code,{children:"await"})," the completion of ",(0,t.jsx)(n.code,{children:"isolateModulesAsync"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"let myModule;\nawait jest.isolateModulesAsync(async () => {\n  myModule = await import('myModule');\n  // do async stuff here\n});\n\nconst otherCopyOfMyModule = await import('myModule');\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u30e2\u30c3\u30af\u95a2\u6570",children:"\u30e2\u30c3\u30af\u95a2\u6570"}),"\n",(0,t.jsx)(n.h3,{id:"jestfnimplementation",children:(0,t.jsx)(n.code,{children:"jest.fn(implementation?)"})}),"\n",(0,t.jsxs)(n.p,{children:["\u65b0\u3057\u3044\u3001\u672a\u4f7f\u7528\u306e",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/mock-function-api",children:"\u30e2\u30c3\u30af\u95a2\u6570"}),"\u3092\u8fd4\u3057\u307e\u3059\u3002 \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u30e2\u30c3\u30af\u306b\u5bfe\u3059\u308b\u5b9f\u88c5\u3092\u53d7\u3051\u53d6\u308a\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const mockFn = jest.fn();\nmockFn();\nexpect(mockFn).toHaveBeenCalled();\n\n// With a mock implementation:\nconst returnsTrue = jest.fn(() => true);\nconsole.log(returnsTrue()); // true;\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["See the ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/mock-function-api#jestfnimplementation",children:"Mock Functions"})," page for details on TypeScript usage."]})}),"\n",(0,t.jsx)(n.h3,{id:"jestismockfunctionfn",children:(0,t.jsx)(n.code,{children:"jest.isMockFunction(fn)"})}),"\n",(0,t.jsx)(n.p,{children:"\u4e0e\u3048\u3089\u308c\u305f\u95a2\u6570\u304c\u30e2\u30c3\u30af\u95a2\u6570\u304c\u3069\u3046\u304b\u3092\u8fd4\u3057\u307e\u3059\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"jestreplacepropertyobject-propertykey-value",children:(0,t.jsx)(n.code,{children:"jest.replaceProperty(object, propertyKey, value)"})}),"\n",(0,t.jsxs)(n.p,{children:["Replace ",(0,t.jsx)(n.code,{children:"object[propertyKey]"})," with a ",(0,t.jsx)(n.code,{children:"value"}),". The property must already exist on the object. The same property might be replaced multiple times. Returns a Jest ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/mock-function-api#replaced-properties",children:"replaced property"}),"."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["To mock properties that are defined as getters or setters, use ",(0,t.jsx)(n.a,{href:"#jestspyonobject-methodname-accesstype",children:(0,t.jsx)(n.code,{children:"jest.spyOn(object, methodName, accessType)"})})," instead. To mock functions, use ",(0,t.jsx)(n.a,{href:"#jestspyonobject-methodname",children:(0,t.jsx)(n.code,{children:"jest.spyOn(object, methodName)"})})," instead."]})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["All properties replaced with ",(0,t.jsx)(n.code,{children:"jest.replaceProperty"})," could be restored to the original value by calling ",(0,t.jsx)(n.a,{href:"#jestrestoreallmocks",children:"jest.restoreAllMocks"})," on ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/api#aftereachfn-timeout",children:"afterEach"})," method."]})}),"\n",(0,t.jsx)(n.p,{children:"\u4f8b:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const utils = {\n  isLocalhost() {\n    return process.env.HOSTNAME === 'localhost';\n  },\n};\n\nmodule.exports = utils;\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u30c6\u30b9\u30c8\u306e\u4f8b:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const utils = require('./utils');\n\nafterEach(() => {\n  // restore replaced property\n  jest.restoreAllMocks();\n});\n\ntest('isLocalhost returns true when HOSTNAME is localhost', () => {\n  jest.replaceProperty(process, 'env', {HOSTNAME: 'localhost'});\n  expect(utils.isLocalhost()).toBe(true);\n});\n\ntest('isLocalhost returns false when HOSTNAME is not localhost', () => {\n  jest.replaceProperty(process, 'env', {HOSTNAME: 'not-localhost'});\n  expect(utils.isLocalhost()).toBe(false);\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"jestspyonobject-methodname",children:(0,t.jsx)(n.code,{children:"jest.spyOn(object, methodName)"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"jest.fn"}),"\u3068\u540c\u69d8\u306e\u95a2\u6570\u3092\u4f5c\u6210\u3057\u307e\u3059\u304c\u3001\u5f15\u6570\u306b\u4e0e\u3048\u3089\u308c\u305f",(0,t.jsx)(n.code,{children:"object[methodName]"}),"\u3078\u306e\u30b3\u30fc\u30eb\u3082\u5b9f\u88c5\u3057\u307e\u3059\u3002 Jest\u306e ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/mock-function-api",children:"\u30e2\u30c3\u30af\u95a2\u6570"}),"\u3092\u8fd4\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["By default, ",(0,t.jsx)(n.code,{children:"jest.spyOn"})," also calls the ",(0,t.jsx)(n.strong,{children:"spied"})," method. \u3053\u308c\u306f\u4ed6\u306e\u5927\u62b5\u306e\u30c6\u30b9\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u306f\u7570\u306a\u308b\u632f\u308b\u821e\u3044\u3067\u3059\u3002 If you want to overwrite the original function, you can use ",(0,t.jsx)(n.code,{children:"jest.spyOn(object, methodName).mockImplementation(() => customImplementation)"})," or ",(0,t.jsx)(n.code,{children:"object[methodName] = jest.fn(() => customImplementation)"}),"."]})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["Since ",(0,t.jsx)(n.code,{children:"jest.spyOn"})," is a mock, you could restore the initial state by calling ",(0,t.jsx)(n.a,{href:"#jestrestoreallmocks",children:(0,t.jsx)(n.code,{children:"jest.restoreAllMocks"})})," in the body of the callback passed to the ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/api#aftereachfn-timeout",children:"afterEach"})," hook."]})}),"\n",(0,t.jsx)(n.p,{children:"\u4f8b:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const video = {\n  play() {\n    return true;\n  },\n};\n\nmodule.exports = video;\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u30c6\u30b9\u30c8\u306e\u4f8b:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const video = require('./video');\n\nafterEach(() => {\n  // restore the spy created with spyOn\n  jest.restoreAllMocks();\n});\n\ntest('plays video', () => {\n  const spy = jest.spyOn(video, 'play');\n  const isPlaying = video.play();\n\n  expect(spy).toHaveBeenCalled();\n  expect(isPlaying).toBe(true);\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"jestspyonobject-methodname-accesstype",children:(0,t.jsx)(n.code,{children:"jest.spyOn(object, methodName, accessType?)"})}),"\n",(0,t.jsxs)(n.p,{children:["Jest 22.1.0+ \u304b\u3089\u306f ",(0,t.jsx)(n.code,{children:"jest.spyOn"})," \u30e1\u30bd\u30c3\u30c9\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u7b2c3\u5f15\u6570 ",(0,t.jsx)(n.code,{children:"accessType"})," \u3092\u53d6\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002 \u3053\u306e\u5f15\u6570\u306b\u306f ",(0,t.jsx)(n.code,{children:"'get'"})," \u307e\u305f\u306f ",(0,t.jsx)(n.code,{children:"'set'"})," \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u305d\u308c\u305e\u308c\u30b2\u30c3\u30bf\u3084\u30bb\u30c3\u30bf\u3092\u30b9\u30d1\u30a4\u3057\u305f\u3044\u5834\u5408\u306b\u4fbf\u5229\u3067\u3059\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\u4f8b:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const video = {\n  // it's a getter!\n  get play() {\n    return true;\n  },\n};\n\nmodule.exports = video;\n\nconst audio = {\n  _volume: false,\n  // it's a setter!\n  set volume(value) {\n    this._volume = value;\n  },\n  get volume() {\n    return this._volume;\n  },\n};\n\nmodule.exports = audio;\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u30c6\u30b9\u30c8\u306e\u4f8b:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const audio = require('./audio');\nconst video = require('./video');\n\nafterEach(() => {\n  // restore the spy created with spyOn\n  jest.restoreAllMocks();\n});\n\ntest('plays video', () => {\n  const spy = jest.spyOn(video, 'play', 'get'); // we pass 'get'\n  const isPlaying = video.play();\n\n  expect(spy).toHaveBeenCalled();\n  expect(isPlaying).toBe(true);\n});\n\ntest('plays audio', () => {\n  const spy = jest.spyOn(audio, 'volume', 'set'); // we pass 'set'\n  audio.volume = 100;\n\n  expect(spy).toHaveBeenCalled();\n  expect(audio.volume).toBe(100);\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"jestreplacedsource",children:(0,t.jsx)(n.code,{children:"jest.Replaced<Source>"})}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/mock-function-api#replacedpropertyreplacevaluevalue",children:"TypeScript Usage"})," chapter of Mock Functions page for documentation."]}),"\n",(0,t.jsx)(n.h3,{id:"jestspiedsource",children:(0,t.jsx)(n.code,{children:"jest.Spied<Source>"})}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/mock-function-api#jestspiedsource",children:"TypeScript Usage"})," chapter of Mock Functions page for documentation."]}),"\n",(0,t.jsx)(n.h3,{id:"jestclearallmocks",children:(0,t.jsx)(n.code,{children:"jest.clearAllMocks()"})}),"\n",(0,t.jsxs)(n.p,{children:["Clears the ",(0,t.jsx)(n.code,{children:"mock.calls"}),", ",(0,t.jsx)(n.code,{children:"mock.instances"}),", ",(0,t.jsx)(n.code,{children:"mock.contexts"})," and ",(0,t.jsx)(n.code,{children:"mock.results"})," properties of all mocks. Equivalent to calling ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/mock-function-api#mockfnmockclear",children:(0,t.jsx)(n.code,{children:".mockClear()"})})," on every mocked function."]}),"\n",(0,t.jsxs)(n.p,{children:["\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u306e\u305f\u3081\u306b",(0,t.jsx)(n.code,{children:"jest"}),"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"jestresetallmocks",children:(0,t.jsx)(n.code,{children:"jest.resetAllMocks()"})}),"\n",(0,t.jsxs)(n.p,{children:["Resets the state of all mocks. Equivalent to calling ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/mock-function-api#mockfnmockreset",children:(0,t.jsx)(n.code,{children:".mockReset()"})})," on every mocked function."]}),"\n",(0,t.jsxs)(n.p,{children:["\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u306e\u305f\u3081\u306b",(0,t.jsx)(n.code,{children:"jest"}),"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"jestrestoreallmocks",children:(0,t.jsx)(n.code,{children:"jest.restoreAllMocks()"})}),"\n",(0,t.jsxs)(n.p,{children:["Restores all mocks and replaced properties back to their original value. Equivalent to calling ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/mock-function-api#mockfnmockrestore",children:(0,t.jsx)(n.code,{children:".mockRestore()"})})," on every mocked function and ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/mock-function-api#replacedpropertyrestore",children:(0,t.jsx)(n.code,{children:".restore()"})})," on every replaced property. Beware that ",(0,t.jsx)(n.code,{children:"jest.restoreAllMocks()"})," only works for mocks created with ",(0,t.jsx)(n.a,{href:"#jestspyonobject-methodname",children:(0,t.jsx)(n.code,{children:"jest.spyOn()"})})," and properties replaced with ",(0,t.jsx)(n.a,{href:"#jestreplacepropertyobject-propertykey-value",children:(0,t.jsx)(n.code,{children:"jest.replaceProperty()"})}),"; other mocks will require you to manually restore them."]}),"\n",(0,t.jsx)(n.h2,{id:"fake-timers",children:"Fake Timers"}),"\n",(0,t.jsx)(n.h3,{id:"jestusefaketimersfaketimersconfig",children:(0,t.jsx)(n.code,{children:"jest.useFakeTimers(fakeTimersConfig?)"})}),"\n",(0,t.jsxs)(n.p,{children:["Instructs Jest to use fake versions of the global date, performance, time and timer APIs. Fake timers implementation is backed by ",(0,t.jsx)(n.a,{href:"https://github.com/sinonjs/fake-timers",children:(0,t.jsx)(n.code,{children:"@sinonjs/fake-timers"})}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Fake timers will swap out ",(0,t.jsx)(n.code,{children:"Date"}),", ",(0,t.jsx)(n.code,{children:"performance.now()"}),", ",(0,t.jsx)(n.code,{children:"queueMicrotask()"}),", ",(0,t.jsx)(n.code,{children:"setImmediate()"}),", ",(0,t.jsx)(n.code,{children:"clearImmediate()"}),", ",(0,t.jsx)(n.code,{children:"setInterval()"}),", ",(0,t.jsx)(n.code,{children:"clearInterval()"}),", ",(0,t.jsx)(n.code,{children:"setTimeout()"}),", ",(0,t.jsx)(n.code,{children:"clearTimeout()"})," with an implementation that gets its time from the fake clock."]}),"\n",(0,t.jsxs)(n.p,{children:["In Node environment ",(0,t.jsx)(n.code,{children:"process.hrtime"}),", ",(0,t.jsx)(n.code,{children:"process.nextTick()"})," and in JSDOM environment ",(0,t.jsx)(n.code,{children:"requestAnimationFrame()"}),", ",(0,t.jsx)(n.code,{children:"cancelAnimationFrame()"}),", ",(0,t.jsx)(n.code,{children:"requestIdleCallback()"}),", ",(0,t.jsx)(n.code,{children:"cancelIdleCallback()"})," will be replaced as well."]}),"\n",(0,t.jsx)(n.p,{children:"Configuration options:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"type FakeableAPI =\n  | 'Date'\n  | 'hrtime'\n  | 'nextTick'\n  | 'performance'\n  | 'queueMicrotask'\n  | 'requestAnimationFrame'\n  | 'cancelAnimationFrame'\n  | 'requestIdleCallback'\n  | 'cancelIdleCallback'\n  | 'setImmediate'\n  | 'clearImmediate'\n  | 'setInterval'\n  | 'clearInterval'\n  | 'setTimeout'\n  | 'clearTimeout';\n\ntype FakeTimersConfig = {\n  /**\n   * If set to `true` all timers will be advanced automatically by 20 milliseconds\n   * every 20 milliseconds. A custom time delta may be provided by passing a number.\n   * The default is `false`.\n   */\n  advanceTimers?: boolean | number;\n  /**\n   * List of names of APIs that should not be faked. The default is `[]`, meaning\n   * all APIs are faked.\n   */\n  doNotFake?: Array<FakeableAPI>;\n  /**\n   * Use the old fake timers implementation instead of one backed by `@sinonjs/fake-timers`.\n   * The default is `false`.\n   */\n  legacyFakeTimers?: boolean;\n  /** Sets current system time to be used by fake timers. The default is `Date.now()`. */\n  now?: number | Date;\n  /**\n   * The maximum number of recursive timers that will be run when calling `jest.runAllTimers()`.\n   * The default is `100_000` timers.\n   */\n  timerLimit?: number;\n};\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Calling ",(0,t.jsx)(n.code,{children:"jest.useFakeTimers()"})," will use fake timers for all tests within the file, until original timers are restored with ",(0,t.jsx)(n.code,{children:"jest.useRealTimers()"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["You can call ",(0,t.jsx)(n.code,{children:"jest.useFakeTimers()"})," or ",(0,t.jsx)(n.code,{children:"jest.useRealTimers()"})," from anywhere: top level, inside an ",(0,t.jsx)(n.code,{children:"test"})," block, etc. Keep in mind that this is a ",(0,t.jsx)(n.strong,{children:"global operation"})," and will affect other tests within the same file. Calling ",(0,t.jsx)(n.code,{children:"jest.useFakeTimers()"})," once again in the same test file would reset the internal state (e.g. timer count) and reinstall fake timers using the provided options:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"test('advance the timers automatically', () => {\n  jest.useFakeTimers({advanceTimers: true});\n  // ...\n});\n\ntest('do not advance the timers and do not fake `performance`', () => {\n  jest.useFakeTimers({doNotFake: ['performance']});\n  // ...\n});\n\ntest('uninstall fake timers for the rest of tests in the file', () => {\n  jest.useRealTimers();\n  // ...\n});\n"})}),"\n",(0,t.jsxs)(n.admonition,{title:"Legacy Fake Timers",type:"info",children:[(0,t.jsx)(n.p,{children:"For some reason you might have to use legacy implementation of fake timers. It can be enabled like this (additional options are not supported):"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"jest.useFakeTimers({\n  legacyFakeTimers: true,\n});\n"})}),(0,t.jsxs)(n.p,{children:["Legacy fake timers will swap out ",(0,t.jsx)(n.code,{children:"setImmediate()"}),", ",(0,t.jsx)(n.code,{children:"clearImmediate()"}),", ",(0,t.jsx)(n.code,{children:"setInterval()"}),", ",(0,t.jsx)(n.code,{children:"clearInterval()"}),", ",(0,t.jsx)(n.code,{children:"setTimeout()"}),", ",(0,t.jsx)(n.code,{children:"clearTimeout()"})," with Jest ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/mock-function-api",children:"mock functions"}),". In Node environment ",(0,t.jsx)(n.code,{children:"process.nextTick()"})," and in JSDOM environment ",(0,t.jsx)(n.code,{children:"requestAnimationFrame()"}),", ",(0,t.jsx)(n.code,{children:"cancelAnimationFrame()"})," will be also replaced."]})]}),"\n",(0,t.jsxs)(n.p,{children:["\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u306e\u305f\u3081\u306b",(0,t.jsx)(n.code,{children:"jest"}),"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"jestuserealtimers",children:(0,t.jsx)(n.code,{children:"jest.useRealTimers()"})}),"\n",(0,t.jsxs)(n.p,{children:["Instructs Jest to restore the original implementations of the global date, performance, time and timer APIs. For example, you may call ",(0,t.jsx)(n.code,{children:"jest.useRealTimers()"})," inside ",(0,t.jsx)(n.code,{children:"afterEach"})," hook to restore timers after each test:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"afterEach(() => {\n  jest.useRealTimers();\n});\n\ntest('do something with fake timers', () => {\n  jest.useFakeTimers();\n  // ...\n});\n\ntest('do something with real timers', () => {\n  // ...\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u306e\u305f\u3081\u306b",(0,t.jsx)(n.code,{children:"jest"}),"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"jestrunallticks",children:(0,t.jsx)(n.code,{children:"jest.runAllTicks()"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"micro"}),"-task \u30ad\u30e5\u30fc\u3092\u51e6\u7406\u3057\u307e\u3059(\u901a\u5e38\u306fnode\u3067",(0,t.jsx)(n.code,{children:"process.nextTick"}),"\u7d4c\u7531\u3067\u3084\u308a\u53d6\u308a\u3057\u307e\u3059)\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u3053\u306eAPI\u304c\u547c\u3070\u308c\u305f\u5834\u5408\u3001",(0,t.jsx)(n.code,{children:"process.nextTick"}),"\u7d4c\u7531\u3067\u30ad\u30e5\u30fc\u30a4\u30f3\u30b0\u3055\u308c\u305f\u5168\u3066\u306e\u4fdd\u7559\u4e2d\u306emicro-task\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002 \u3055\u3089\u306b\u3001\u305d\u308c\u3089micro-task\u81ea\u8eab\u304c\u65b0\u3057\u3044micro-task\u3092\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u30ad\u30e5\u30fc\u304b\u3089micro-task\u304c\u7121\u304f\u306a\u308b\u307e\u3067\u7d99\u7d9a\u7684\u306b\u51e6\u7406\u3055\u308c\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"jestrunalltimers",children:(0,t.jsx)(n.code,{children:"jest.runAllTimers()"})}),"\n",(0,t.jsxs)(n.p,{children:["Exhausts both the ",(0,t.jsx)(n.strong,{children:"macro"}),"-task queue (i.e., all tasks queued by ",(0,t.jsx)(n.code,{children:"setTimeout()"}),", ",(0,t.jsx)(n.code,{children:"setInterval()"}),", and ",(0,t.jsx)(n.code,{children:"setImmediate()"}),") and the ",(0,t.jsx)(n.strong,{children:"micro"}),"-task queue (usually interfaced in node via ",(0,t.jsx)(n.code,{children:"process.nextTick"}),")."]}),"\n",(0,t.jsx)(n.p,{children:"When this API is called, all pending macro-tasks and micro-tasks will be executed. If those tasks themselves schedule new tasks, those will be continually exhausted until there are no more tasks remaining in the queue."}),"\n",(0,t.jsxs)(n.p,{children:["\u3053\u306eAPI\u306f ",(0,t.jsx)(n.code,{children:"setTimeout()"})," \u3084 ",(0,t.jsx)(n.code,{children:"setInterval()"}),"\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u304c\u5b9f\u884c\u3055\u308c\u305f\u5f8c\u3067\u306e\u307f\u767a\u751f\u3059\u308b\u3088\u3046\u306a\u52d5\u4f5c\u3092\u540c\u671f\u3057\u3066\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u3001\u30c6\u30b9\u30c8\u4e2d\u306b\u540c\u671f\u7684\u306bsetTimeouts\u95a2\u6570\u3092\u52d5\u4f5c\u3055\u305b\u308b\u5834\u5408\u306b\u4fbf\u5229\u3067\u3059\u3002 \u8a73\u7d30\u306b\u3064\u3044\u3066\u306f ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/timer-mocks",children:" Timer mocks "})," \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"jestrunallimmediates",children:(0,t.jsx)(n.code,{children:"jest.runAllImmediates()"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"setImmediate()"})," \u306b\u3088\u3063\u3066\u30ad\u30e5\u30fc\u30a4\u30f3\u30b0\u3055\u308c\u305f\u5168\u3066\u306e\u30bf\u30b9\u30af\u3092\u51e6\u7406\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"This function is only available when using legacy fake timers implementation."})}),"\n",(0,t.jsx)(n.h3,{id:"jestadvancetimersbytimemstorun",children:(0,t.jsx)(n.code,{children:"jest.advanceTimersByTime(msToRun)"})}),"\n",(0,t.jsxs)(n.p,{children:["macro task\u30ad\u30e5\u30fc\u306e\u307f\u3092\u5b9f\u884c\u3057\u307e\u3059(\u3064\u307e\u308a\u3001 ",(0,t.jsx)(n.code,{children:"setTimeout()"})," \u304b ",(0,t.jsx)(n.code,{children:"setInterval()"})," \u3084 ",(0,t.jsx)(n.code,{children:"setImmediate()"}),"\u306b\u3088\u3063\u3066\u30ad\u30e5\u30fc\u30a4\u30f3\u30b0\u3055\u308c\u305f\u5168\u3066\u306e\u30bf\u30b9\u30af\u3067\u3059)\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u3053\u306e API \u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u3068\u3001\u3059\u3079\u3066\u306e\u30bf\u30a4\u30de\u30fc\u306f ",(0,t.jsx)(n.code,{children:"msToRun"})," \u30df\u30ea\u79d2\u3067\u9032\u307f\u307e\u3059\u3002 \u3053\u306e\u30bf\u30a4\u30e0\u30d5\u30ec\u30fc\u30e0\u3067\u5b9f\u884c\u3055\u308c\u308b\u3067\u3042\u308d\u3046\u3001\u5168\u3066\u306e ",(0,t.jsx)(n.code,{children:"setTimeout()"})," \u307e\u305f\u306f ",(0,t.jsx)(n.code,{children:"setInterval()"}),' \u7d4c\u7531\u3067\u30ad\u30e5\u30fc\u30a4\u30f3\u30b0\u3055\u308c\u305f\u4fdd\u7559\u4e2d\u306e "macro-tasks" \u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002 Additionally, if those macro-tasks schedule new macro-tasks that would be executed within the same time frame, those will be executed until there are no more macro-tasks remaining in the queue, that should be run within ',(0,t.jsx)(n.code,{children:"msToRun"})," milliseconds."]}),"\n",(0,t.jsx)(n.h3,{id:"jestrunonlypendingtimers",children:(0,t.jsx)(n.code,{children:"jest.runOnlyPendingTimers()"})}),"\n",(0,t.jsxs)(n.p,{children:["\u73fe\u6642\u70b9\u3067\u4fdd\u7559\u4e2d\u306emacro-task\u306e\u307f\u3092\u5b9f\u884c\u3057\u307e\u3059(\u3064\u307e\u308a\u3053\u306e\u6642\u70b9\u307e\u3067\u306b",(0,t.jsx)(n.code,{children:"setTimeout()"})," \u304b ",(0,t.jsx)(n.code,{children:"setInterval()"}),"\u306b\u3088\u3063\u3066\u30ad\u30e5\u30fc\u30a4\u30f3\u30b0\u3055\u308c\u305f\u30bf\u30b9\u30af\u306e\u307f\u3067\u3059)\u3002 \u305d\u306e\u6642\u70b9\u3067\u4fdd\u7559\u4e2d\u306e macro-tasks\u304c\u65b0\u3057\u3044 macro-task\u3092\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u305d\u308c\u3089\u306e\u65b0\u3057\u3044\u30bf\u30b9\u30af\u306f\u3053\u306eAPI\u304b\u3089\u306e\u547c\u3073\u51fa\u3057\u3067\u306f\u5b9f\u884c\u3055\u308c\u307e\u305b\u3093\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u3053\u306eAPI\u306f\u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u304c",(0,t.jsx)(n.code,{children:"setTimeout()"}),"\u304c\u65b0\u305f\u306a",(0,t.jsx)(n.code,{children:"setTimeout()"}),"\u3092\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u5185\u3067\u518d\u5e30\u7684\u306b\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3057\u3066\u3044\u308b\u3088\u3046\u306a\u30b7\u30ca\u30ea\u30aa\u306b\u5f79\u7acb\u3061\u307e\u3059(\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u5185\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u306f\u505c\u6b62\u3057\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u3059) \u3053\u308c\u3089\u306e\u30b7\u30ca\u30ea\u30aa\u3067\u306f\u3001\u4e00\u5ea6\u306b\uff11\u56de\u305a\u3064\u6642\u9593\u3092\u9032\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u4e8b\u304c\u4fbf\u5229\u306a\u306e\u3067\u3059\u3002 \u3053\u308c\u3089\u306e\u30b7\u30ca\u30ea\u30aa\u3067\u306f\u3001\u4e00\u5ea6\u306b\uff11\u56de\u305a\u3064\u6642\u9593\u3092\u9032\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u4e8b\u304c\u4fbf\u5229\u306a\u306e\u3067\u3059\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"jestadvancetimerstonexttimersteps",children:(0,t.jsx)(n.code,{children:"jest.advanceTimersToNextTimer(steps)"})}),"\n",(0,t.jsx)(n.p,{children:"Advances all timers by the needed milliseconds so that only the next timeouts/intervals will run."}),"\n",(0,t.jsxs)(n.p,{children:["Optionally, you can provide ",(0,t.jsx)(n.code,{children:"steps"}),", so it will run ",(0,t.jsx)(n.code,{children:"steps"})," amount of next timeouts/intervals."]}),"\n",(0,t.jsx)(n.h3,{id:"jestclearalltimers",children:(0,t.jsx)(n.code,{children:"jest.clearAllTimers()"})}),"\n",(0,t.jsx)(n.p,{children:"\u30bf\u30a4\u30de\u30fc\u30b7\u30b9\u30c6\u30e0\u304c\u4fdd\u7559\u3057\u3066\u3044\u308b\u3042\u3089\u3086\u308b\u30bf\u30a4\u30de\u30fc\u3092\u524a\u9664\u3057\u307e\u3059\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u3064\u307e\u308a\u3001(\u307e\u3060\u5b9f\u884c\u3055\u308c\u3066\u3044\u306a\u3044) \u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3055\u308c\u305f\u5168\u3066\u306e\u30bf\u30a4\u30de\u30fc\u306b\u3064\u3044\u3066\u3001\u524a\u9664\u3055\u308c\u3001\u5c06\u6765\u306b\u308f\u305f\u3063\u3066\u5b9f\u884c\u3055\u308c\u308b\u3053\u3068\u306f\u306a\u3044\u3068\u3044\u3046\u4e8b\u3067\u3059\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"jestgettimercount",children:(0,t.jsx)(n.code,{children:"jest.getTimerCount()"})}),"\n",(0,t.jsx)(n.p,{children:"Returns the number of fake timers still left to run."}),"\n",(0,t.jsx)(n.h3,{id:"jestnow",children:(0,t.jsx)(n.code,{children:"jest.now()"})}),"\n",(0,t.jsxs)(n.p,{children:["Returns the time in ms of the current clock. This is equivalent to ",(0,t.jsx)(n.code,{children:"Date.now()"})," if real timers are in use, or if ",(0,t.jsx)(n.code,{children:"Date"})," is mocked. In other cases (such as legacy timers) it may be useful for implementing custom mocks of ",(0,t.jsx)(n.code,{children:"Date.now()"}),", ",(0,t.jsx)(n.code,{children:"performance.now()"}),", etc."]}),"\n",(0,t.jsx)(n.h3,{id:"jestsetsystemtimenow-number--date",children:(0,t.jsx)(n.code,{children:"jest.setSystemTime(now?: number | Date)"})}),"\n",(0,t.jsxs)(n.p,{children:["\u507d\u306e\u30bf\u30a4\u30de\u30fc\u3067\u4f7f\u7528\u3055\u308c\u308b\u73fe\u5728\u30b7\u30b9\u30c6\u30e0\u6642\u523b\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002 \u30d7\u30ed\u30b0\u30e9\u30e0\u5b9f\u884c\u4e2d\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u3088\u308b\u30b7\u30b9\u30c6\u30e0\u30af\u30ed\u30c3\u30af\u306e\u5909\u66f4\u3059\u308b\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\u3057\u307e\u3059\u3002 \u73fe\u5728\u306e\u6642\u523b\u306b\u5f71\u97ff\u3057\u307e\u3059\u304c\u3001\u4f8b\u3048\u3070\u8d77\u52d5\u30bf\u30a4\u30de\u306e\u3088\u3046\u306a\u3001\u305d\u308c\u81ea\u4f53\u306e\u5185\u90e8\u3067\u767a\u751f\u3059\u308b\u3082\u306e\u306b\u306f\u5f71\u97ff\u3057\u307e\u305b\u3093\u3002 ",(0,t.jsx)(n.code,{children:"jest.setSystemTime()"})," \u304c\u547c\u3073\u51fa\u3055\u308c\u306a\u304b\u3063\u305f\u5834\u5408\u3068\u540c\u69d8\u306b\u3001\u6b63\u78ba\u306b\u8d77\u52d5\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"This function is not available when using legacy fake timers implementation."})}),"\n",(0,t.jsx)(n.h3,{id:"jestgetrealsystemtime",children:(0,t.jsx)(n.code,{children:"jest.getRealSystemTime()"})}),"\n",(0,t.jsxs)(n.p,{children:["\u6642\u523b\u3092\u30e2\u30c3\u30af\u3057\u3066\u3044\u308b\u5834\u5408\u3001 ",(0,t.jsx)(n.code,{children:"Date.now()"})," \u3082\u30e2\u30c3\u30af\u3055\u308c\u307e\u3059\u3002 \u4f55\u3089\u304b\u306e\u7406\u7531\u3067\u672c\u5cf6\u306e\u73fe\u5728\u6642\u523b\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u3053\u306e\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"This function is not available when using legacy fake timers implementation."})}),"\n",(0,t.jsx)(n.h2,{id:"\u305d\u306e\u4ed6",children:"\u305d\u306e\u4ed6"}),"\n",(0,t.jsx)(n.h3,{id:"jestgetseed",children:(0,t.jsx)(n.code,{children:"jest.getSeed()"})}),"\n",(0,t.jsx)(n.p,{children:"Every time Jest runs a seed value is randomly generated which you could use in a pseudorandom number generator or anywhere else."}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["Use the ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/cli#--showseed",children:(0,t.jsx)(n.code,{children:"--showSeed"})})," flag to print the seed in the test report summary. To manually set the value of the seed use ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/cli#--seednum",children:(0,t.jsx)(n.code,{children:"--seed=<num>"})})," CLI argument."]})}),"\n",(0,t.jsx)(n.h3,{id:"jestisenvironmenttorndown",children:(0,t.jsx)(n.code,{children:"jest.isEnvironmentTornDown()"})}),"\n",(0,t.jsxs)(n.p,{children:["Returns ",(0,t.jsx)(n.code,{children:"true"})," if test environment has been torn down."]}),"\n",(0,t.jsx)(n.h3,{id:"jestretrytimesnumretries-options",children:(0,t.jsx)(n.code,{children:"jest.retryTimes(numRetries, options?)"})}),"\n",(0,t.jsx)(n.p,{children:"Runs failed tests n-times until they pass or until the max number of retries is exhausted."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"jest.retryTimes(3);\n\ntest('will fail', () => {\n  expect(true).toBe(false);\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:["If ",(0,t.jsx)(n.code,{children:"logErrorsBeforeRetry"})," option is enabled, error(s) that caused the test to fail will be logged to the console."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"jest.retryTimes(3, {logErrorsBeforeRetry: true});\n\ntest('will fail', () => {\n  expect(true).toBe(false);\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u306e\u305f\u3081\u306b",(0,t.jsx)(n.code,{children:"jest"}),"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(n.admonition,{type:"caution",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"jest.retryTimes()"})," must be declared at the top level of a test file or in a ",(0,t.jsx)(n.code,{children:"describe"})," block."]})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["This function is only available with the default ",(0,t.jsx)(n.a,{href:"https://github.com/jestjs/jest/tree/main/packages/jest-circus",children:"jest-circus"})," runner."]})}),"\n",(0,t.jsx)(n.h3,{id:"jestsettimeouttimeout",children:(0,t.jsx)(n.code,{children:"jest.setTimeout(timeout)"})}),"\n",(0,t.jsx)(n.p,{children:"Set the default timeout interval (in milliseconds) for all tests and before/after hooks in the test file. \u3053\u308c\u306f\u3053\u306e\u95a2\u6570\u304c\u547c\u3073\u51fa\u3055\u308c\u305f\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u306b\u306e\u307f\u5f71\u97ff\u3057\u307e\u3059\u3002 The default timeout interval is 5 seconds if this method is not called."}),"\n",(0,t.jsx)(n.p,{children:"\u4f8b:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"jest.setTimeout(1000); // 1 second\n"})}),"\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsxs)(n.p,{children:["To set timeout intervals on different tests in the same file, use the ",(0,t.jsxs)(n.a,{href:"/ja/docs/29.4/api#testname-fn-timeout",children:[(0,t.jsx)(n.code,{children:"timeout"})," option on each individual test"]}),"."]}),(0,t.jsxs)(n.p,{children:["If you want to set the timeout for all test files, use ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/configuration#testtimeout-number",children:(0,t.jsx)(n.code,{children:"testTimeout"})})," configuration option."]})]})]})}const p=function(e={}){const{wrapper:n}=Object.assign({},(0,o.ah)(),e.components);return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(u,e)})):u(e)}},482:(e,n,s)=>{s.d(n,{ZP:()=>c});var t=s(4246),o=s(1670);function i(e){const n=Object.assign({admonition:"admonition",p:"p",pre:"pre",code:"code",a:"a"},(0,o.ah)(),e.components);return(0,t.jsxs)(n.admonition,{type:"info",children:[(0,t.jsx)(n.p,{children:"\u3053\u306e\u30da\u30fc\u30b8\u306e TypeScript \u306e\u4f8b\u306f\u3001Jest \u306eAPI\u3092\u660e\u793a\u7684\u306b\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u305f\u5834\u5408\u306b\u306e\u307f\u52d5\u4f5c\u3057\u307e\u3059\u3002"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"import {expect, jest, test} from '@jest/globals';\n"})}),(0,t.jsxs)(n.p,{children:["Consult the ",(0,t.jsx)(n.a,{href:"/ja/docs/29.4/getting-started#using-typescript",children:"Getting Started"})," guide for details on how to setup Jest with TypeScript."]})]})}const c=function(e={}){const{wrapper:n}=Object.assign({},(0,o.ah)(),e.components);return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(i,e)})):i(e)}}}]);