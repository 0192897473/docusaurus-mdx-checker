"use strict";(self.webpackChunkjest_website=self.webpackChunkjest_website||[]).push([[7636],{8505:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>t,contentTitle:()=>a,default:()=>u,frontMatter:()=>c,metadata:()=>r,toc:()=>d});var l=o(4246),s=o(1670);const c={id:"es6-class-mocks",title:"ES6 \u30af\u30e9\u30b9\u306e\u30e2\u30c3\u30af"},a=void 0,r={unversionedId:"es6-class-mocks",id:"es6-class-mocks",title:"ES6 \u30af\u30e9\u30b9\u306e\u30e2\u30c3\u30af",description:"Jest \u306f\u3001\u30c6\u30b9\u30c8\u3057\u305f\u3044\u30d5\u30a1\u30a4\u30eb\u306b\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u305f ES6 \u30af\u30e9\u30b9\u3092\u30e2\u30c3\u30af\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002",source:"@site/i18n/ja/docusaurus-plugin-content-docs/current/Es6ClassMocks.md",sourceDirName:".",slug:"/es6-class-mocks",permalink:"/ja/docs/next/es6-class-mocks",draft:!1,unlisted:!1,editUrl:"https://crowdin.com/project/jest-v2/ja",tags:[],version:"current",frontMatter:{id:"es6-class-mocks",title:"ES6 \u30af\u30e9\u30b9\u306e\u30e2\u30c3\u30af"},sidebar:"docs",previous:{title:"\u30de\u30cb\u30e5\u30a2\u30eb\u30e2\u30c3\u30af",permalink:"/ja/docs/next/manual-mocks"},next:{title:"\u30e2\u30b8\u30e5\u30fc\u30eb\u30e2\u30c3\u30af\u306e\u30d0\u30a4\u30d1\u30b9",permalink:"/ja/docs/next/bypassing-module-mocks"}},t={},d=[{value:"ES6 \u30af\u30e9\u30b9\u306e\u4f8b",id:"es6-\u30af\u30e9\u30b9\u306e\u4f8b",level:2},{value:"ES6 \u30af\u30e9\u30b9\u306e\u30e2\u30c3\u30af\u3092\u4f5c\u308b4\u3064\u306e\u65b9\u6cd5",id:"es6-\u30af\u30e9\u30b9\u306e\u30e2\u30c3\u30af\u3092\u4f5c\u308b4\u3064\u306e\u65b9\u6cd5",level:2},{value:"\u81ea\u52d5\u30e2\u30c3\u30af",id:"\u81ea\u52d5\u30e2\u30c3\u30af",level:3},{value:"\u30de\u30cb\u30e5\u30a2\u30eb\u30e2\u30c3\u30af",id:"\u30de\u30cb\u30e5\u30a2\u30eb\u30e2\u30c3\u30af",level:3},{value:"<code>jest.mock()</code> \u3092\u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u5f15\u6570\u3067\u547c\u3076",id:"jestmock-\u3092\u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u5f15\u6570\u3067\u547c\u3076",level:3},{value:"<code>mockImplementation()</code> \u307e\u305f\u306f <code>mockImplementationOnce()</code> \u3092\u4f7f\u7528\u3057\u305f\u30e2\u30c3\u30af\u3092\u7f6e\u304d\u63db\u3048\u308b",id:"mockimplementation-\u307e\u305f\u306f-mockimplementationonce-\u3092\u4f7f\u7528\u3057\u305f\u30e2\u30c3\u30af\u3092\u7f6e\u304d\u63db\u3048\u308b",level:3},{value:"\u8e0f\u307f\u8fbc\u3093\u3060\u8a71: \u30e2\u30c3\u30af\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u95a2\u6570\u3092\u7406\u89e3\u3059\u308b",id:"\u8e0f\u307f\u8fbc\u3093\u3060\u8a71-\u30e2\u30c3\u30af\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u95a2\u6570\u3092\u7406\u89e3\u3059\u308b",level:2},{value:"\u30de\u30cb\u30e5\u30a2\u30eb\u30e2\u30c3\u30af\u306f1\u3064\u306e ES6 \u30af\u30e9\u30b9\u3067\u3042\u308b",id:"\u30de\u30cb\u30e5\u30a2\u30eb\u30e2\u30c3\u30af\u306f1\u3064\u306e-es6-\u30af\u30e9\u30b9\u3067\u3042\u308b",level:3},{value:"\u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4f7f\u7528\u3057\u3066\u30e2\u30c3\u30af\u3059\u308b",id:"\u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4f7f\u7528\u3057\u3066\u30e2\u30c3\u30af\u3059\u308b",level:3},{value:"* \u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u306f\u95a2\u6570\u3092\u8fd4\u3055\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044",id:"-\u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u306f\u95a2\u6570\u3092\u8fd4\u3055\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044",level:4},{value:"Mocking a specific method of a class",id:"mocking-a-specific-method-of-a-class",level:2},{value:"Static, getter and setter methods",id:"static-getter-and-setter-methods",level:3},{value:"\u4f7f\u7528\u72b6\u6cc1\u3092\u30c8\u30e9\u30c3\u30af\u3057\u7d9a\u3051\u308b (\u30e2\u30c3\u30af\u3092\u30b9\u30d1\u30a4\u3059\u308b)",id:"\u4f7f\u7528\u72b6\u6cc1\u3092\u30c8\u30e9\u30c3\u30af\u3057\u7d9a\u3051\u308b-\u30e2\u30c3\u30af\u3092\u30b9\u30d1\u30a4\u3059\u308b",level:2},{value:"\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u30b9\u30d1\u30a4\u3059\u308b",id:"\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u30b9\u30d1\u30a4\u3059\u308b",level:3},{value:"Mocking non-default class exports",id:"mocking-non-default-class-exports",level:3},{value:"\u30af\u30e9\u30b9\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u30b9\u30d1\u30a4\u3059\u308b",id:"\u30af\u30e9\u30b9\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u30b9\u30d1\u30a4\u3059\u308b",level:3},{value:"\u30c6\u30b9\u30c8\u9593\u3067\u306e\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7",id:"\u30c6\u30b9\u30c8\u9593\u3067\u306e\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7",level:3},{value:"\u5b8c\u5168\u306b\u52d5\u4f5c\u3059\u308b\u30b3\u30fc\u30c9\u4f8b",id:"\u5b8c\u5168\u306b\u52d5\u4f5c\u3059\u308b\u30b3\u30fc\u30c9\u4f8b",level:2}];function i(e){const n=Object.assign({p:"p",a:"a",h2:"h2",code:"code",pre:"pre",h3:"h3",admonition:"admonition",em:"em",strong:"strong",h4:"h4"},(0,s.ah)(),e.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.p,{children:"Jest \u306f\u3001\u30c6\u30b9\u30c8\u3057\u305f\u3044\u30d5\u30a1\u30a4\u30eb\u306b\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u305f ES6 \u30af\u30e9\u30b9\u3092\u30e2\u30c3\u30af\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002"}),"\n",(0,l.jsxs)(n.p,{children:["ES6 \u30af\u30e9\u30b9\u3068\u3044\u3046\u306e\u306f\u3001\u3044\u304f\u3064\u304b\u306e\u7cd6\u8863\u69cb\u6587\u3092\u52a0\u3048\u305f\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u95a2\u6570\u3067\u3059\u3002 \u3057\u305f\u304c\u3063\u3066\u3001ES6 \u30af\u30e9\u30b9\u306e\u30e2\u30c3\u30af\u306f\u3001\u4f55\u3089\u304b\u306e\u95a2\u6570\u3067\u3042\u308b\u304b\u3001\u3082\u3046\u4e00\u3064\u306e ES6 \u30af\u30e9\u30b9 (\u7e70\u308a\u8fd4\u3057\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u5225\u306e\u95a2\u6570\u3067\u3059) \u306b\u306a\u308a\u307e\u3059\u3002 \u305d\u306e\u305f\u3081\u3001",(0,l.jsx)(n.a,{href:"/ja/docs/next/mock-functions",children:"\u30e2\u30c3\u30af\u95a2\u6570"}),"\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u30e2\u30c3\u30af\u3092\u4f5c\u6210\u3067\u304d\u307e\u3059\u3002"]}),"\n",(0,l.jsx)(n.h2,{id:"es6-\u30af\u30e9\u30b9\u306e\u4f8b",children:"ES6 \u30af\u30e9\u30b9\u306e\u4f8b"}),"\n",(0,l.jsxs)(n.p,{children:["\u5177\u4f53\u4f8b\u3068\u3057\u3066\u3001\u97f3\u697d\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u751f\u3059\u308b\u30af\u30e9\u30b9 ",(0,l.jsx)(n.code,{children:"SoundPlayer"})," \u3068\u305d\u306e\u30af\u30e9\u30b9\u3092\u4f7f\u7528\u3059\u308b\u6d88\u8cbb\u8005\u30af\u30e9\u30b9 ",(0,l.jsx)(n.code,{children:"SoundPlayerConsumer"})," \u306b\u3064\u3044\u3066\u8003\u3048\u3066\u307f\u307e\u3057\u3087\u3046\u3002 ",(0,l.jsx)(n.code,{children:"SoundPlayerConsumer"})," \u306e\u30c6\u30b9\u30c8\u5185\u3067\u3001",(0,l.jsx)(n.code,{children:"SoundPlayer"})," \u30af\u30e9\u30b9\u3092\u30e2\u30c3\u30af\u3059\u308b\u306b\u306f\u3001\u6b21\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3092\u66f8\u304d\u307e\u3059\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",metastring:'title="sound-player.js"',children:"export default class SoundPlayer {\n  constructor() {\n    this.foo = 'bar';\n  }\n\n  playSoundFile(fileName) {\n    console.log('Playing sound file ' + fileName);\n  }\n}\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",metastring:'title="sound-player-consumer.js"',children:"import SoundPlayer from './sound-player';\n\nexport default class SoundPlayerConsumer {\n  constructor() {\n    this.soundPlayer = new SoundPlayer();\n  }\n\n  playSomethingCool() {\n    const coolSoundFileName = 'song.mp3';\n    this.soundPlayer.playSoundFile(coolSoundFileName);\n  }\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"es6-\u30af\u30e9\u30b9\u306e\u30e2\u30c3\u30af\u3092\u4f5c\u308b4\u3064\u306e\u65b9\u6cd5",children:"ES6 \u30af\u30e9\u30b9\u306e\u30e2\u30c3\u30af\u3092\u4f5c\u308b4\u3064\u306e\u65b9\u6cd5"}),"\n",(0,l.jsx)(n.h3,{id:"\u81ea\u52d5\u30e2\u30c3\u30af",children:"\u81ea\u52d5\u30e2\u30c3\u30af"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"jest.mock('./sound-player')"}),' \u3092\u547c\u3076\u3068\u3001\u4fbf\u5229\u306a "\u81ea\u52d5\u30e2\u30c3\u30af" \u3092\u8fd4\u3057\u3066\u304f\u308c\u307e\u3059\u3002 \u3053\u308c\u306f\u3001\u30af\u30e9\u30b9\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304a\u3088\u3073\u3059\u3079\u3066\u306e\u30e1\u30bd\u30c3\u30c9\u306e\u547c\u3073\u51fa\u3057\u3092\u30b9\u30d1\u30a4\u3059\u308b\u306e\u306b\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002 \u3053\u306e\u95a2\u6570\u306f ES6 \u30af\u30e9\u30b9\u3092\u30e2\u30c3\u30af\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306b\u7f6e\u304d\u63db\u3048\u3001\u3059\u3079\u3066\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u3001\u5e38\u306b ',(0,l.jsx)(n.code,{children:"undefined"})," \u3092\u8fd4\u3059",(0,l.jsx)(n.a,{href:"/ja/docs/next/mock-functions",children:"\u30e2\u30c3\u30af\u95a2\u6570"}),"\u306b\u7f6e\u304d\u63db\u3048\u307e\u3059\u3002 \u30e1\u30bd\u30c3\u30c9\u306e\u547c\u3073\u51fa\u3057\u306f ",(0,l.jsx)(n.code,{children:"theAutomaticMock.mock.instances[index].methodName.mock.calls"})," \u306b\u4fdd\u5b58\u3055\u308c\u307e\u3059\u3002"]}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsxs)(n.p,{children:["If you use arrow functions in your classes, they will ",(0,l.jsx)(n.em,{children:"not"})," be part of the mock. \u306a\u305c\u306a\u3089\u3001\u30a2\u30ed\u30fc\u95a2\u6570\u306f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30d7\u30ed\u30c8\u30bf\u30a4\u30d7\u306b\u306f\u73fe\u308c\u305a\u3001\u5358\u306b\u95a2\u6570\u3078\u306e\u53c2\u7167\u3092\u4fdd\u6301\u3057\u3066\u3044\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u904e\u304e\u306a\u3044\u305f\u3081\u3067\u3059\u3002"]})}),"\n",(0,l.jsx)(n.p,{children:"\u30af\u30e9\u30b9\u306e\u5b9f\u88c5\u3092\u7f6e\u304d\u63db\u3048\u308b\u5fc5\u8981\u304c\u306a\u3044\u5834\u5408\u306f\u3001\u3053\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u306e\u304c\u6700\u3082\u7c21\u5358\u306a\u9078\u629e\u80a2\u3067\u3059\u3002 \u4f8b\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"import SoundPlayer from './sound-player';\nimport SoundPlayerConsumer from './sound-player-consumer';\njest.mock('./sound-player'); // SoundPlayer is now a mock constructor\n\nbeforeEach(() => {\n  // Clear all instances and calls to constructor and all methods:\n  SoundPlayer.mockClear();\n});\n\nit('We can check if the consumer called the class constructor', () => {\n  const soundPlayerConsumer = new SoundPlayerConsumer();\n  expect(SoundPlayer).toHaveBeenCalledTimes(1);\n});\n\nit('We can check if the consumer called a method on the class instance', () => {\n  // Show that mockClear() is working:\n  expect(SoundPlayer).not.toHaveBeenCalled();\n\n  const soundPlayerConsumer = new SoundPlayerConsumer();\n  // Constructor should have been called again:\n  expect(SoundPlayer).toHaveBeenCalledTimes(1);\n\n  const coolSoundFileName = 'song.mp3';\n  soundPlayerConsumer.playSomethingCool();\n\n  // mock.instances is available with automatic mocks:\n  const mockSoundPlayerInstance = SoundPlayer.mock.instances[0];\n  const mockPlaySoundFile = mockSoundPlayerInstance.playSoundFile;\n  expect(mockPlaySoundFile.mock.calls[0][0]).toBe(coolSoundFileName);\n  // Equivalent to above check:\n  expect(mockPlaySoundFile).toHaveBeenCalledWith(coolSoundFileName);\n  expect(mockPlaySoundFile).toHaveBeenCalledTimes(1);\n});\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u30de\u30cb\u30e5\u30a2\u30eb\u30e2\u30c3\u30af",children:"\u30de\u30cb\u30e5\u30a2\u30eb\u30e2\u30c3\u30af"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.a,{href:"/ja/docs/next/manual-mocks",children:"\u30de\u30cb\u30e5\u30a2\u30eb\u30e2\u30c3\u30af"}),"\u3092\u4f5c\u308b\u306b\u306f\u3001\u30e2\u30c3\u30af\u306e\u5b9f\u88c5\u3092 ",(0,l.jsx)(n.code,{children:"__mocks__"})," \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002 \u3053\u308c\u306b\u3088\u308a\u3001\u7279\u5b9a\u306e\u5b9f\u88c5\u3092\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u5168\u4f53\u3067\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",metastring:'title="__mocks__/sound-player.js"',children:"// Import this named export into your test file:\nexport const mockPlaySoundFile = jest.fn();\nconst mock = jest.fn().mockImplementation(() => {\n  return {playSoundFile: mockPlaySoundFile};\n});\n\nexport default mock;\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u3059\u3079\u3066\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u5171\u6709\u3055\u308c\u308b\u3001\u30e2\u30c3\u30af\u3068\u30e2\u30c3\u30af\u30e1\u30bd\u30c3\u30c9\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u307e\u3059\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",metastring:'title="sound-player-consumer.test.js"',children:"import SoundPlayer, {mockPlaySoundFile} from './sound-player';\nimport SoundPlayerConsumer from './sound-player-consumer';\njest.mock('./sound-player'); // SoundPlayer is now a mock constructor\n\nbeforeEach(() => {\n  // Clear all instances and calls to constructor and all methods:\n  SoundPlayer.mockClear();\n  mockPlaySoundFile.mockClear();\n});\n\nit('We can check if the consumer called the class constructor', () => {\n  const soundPlayerConsumer = new SoundPlayerConsumer();\n  expect(SoundPlayer).toHaveBeenCalledTimes(1);\n});\n\nit('We can check if the consumer called a method on the class instance', () => {\n  const soundPlayerConsumer = new SoundPlayerConsumer();\n  const coolSoundFileName = 'song.mp3';\n  soundPlayerConsumer.playSomethingCool();\n  expect(mockPlaySoundFile).toHaveBeenCalledWith(coolSoundFileName);\n});\n"})}),"\n",(0,l.jsxs)(n.h3,{id:"jestmock-\u3092\u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u5f15\u6570\u3067\u547c\u3076",children:[(0,l.jsx)(n.a,{href:"/ja/docs/next/jest-object#jestmockmodulename-factory-options",children:(0,l.jsx)(n.code,{children:"jest.mock()"})})," \u3092\u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u5f15\u6570\u3067\u547c\u3076"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"jest.mock(path, moduleFactory)"})," \u306f",(0,l.jsx)(n.strong,{children:"\u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea"}),"\u5f15\u6570\u3092\u53d6\u308a\u307e\u3059\u3002 \u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u3068\u306f\u3001\u30e2\u30c3\u30af\u3092\u8fd4\u3059\u95a2\u6570\u306e\u3053\u3068\u3067\u3059\u3002"]}),"\n",(0,l.jsx)(n.p,{children:"\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u95a2\u6570\u3092\u30e2\u30c3\u30af\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u306f\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u95a2\u6570\u3092\u8fd4\u3055\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002 \u8a00\u3044\u63db\u3048\u308b\u3068\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u306f\u95a2\u6570\u3092\u8fd4\u3059\u95a2\u6570\u3001\u3064\u307e\u308a\u9ad8\u968e\u95a2\u6570 (high-order function; HOF) \u3067\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"import SoundPlayer from './sound-player';\nconst mockPlaySoundFile = jest.fn();\njest.mock('./sound-player', () => {\n  return jest.fn().mockImplementation(() => {\n    return {playSoundFile: mockPlaySoundFile};\n  });\n});\n"})}),"\n",(0,l.jsx)(n.admonition,{type:"caution",children:(0,l.jsxs)(n.p,{children:["Since calls to ",(0,l.jsx)(n.code,{children:"jest.mock()"})," are hoisted to the top of the file, Jest prevents access to out-of-scope variables. By default, you cannot first define a variable and then use it in the factory. Jest will disable this check for variables that start with the word ",(0,l.jsx)(n.code,{children:"mock"}),". However, it is still up to you to guarantee that they will be initialized on time. Be aware of ",(0,l.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let#temporal_dead_zone_tdz",children:"Temporal Dead Zone"}),"."]})}),"\n",(0,l.jsxs)(n.p,{children:["For example, the following will throw an out-of-scope error due to the use of ",(0,l.jsx)(n.code,{children:"fake"})," instead of ",(0,l.jsx)(n.code,{children:"mock"})," in the variable declaration."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"// \u6ce8\u610f: \u3053\u308c\u306f\u5931\u6557\u3057\u307e\u3059\nimport SoundPlayer from './sound-player';\nconst fakePlaySoundFile = jest.fn();\njest.mock('./sound-player', () => {\n  return jest.fn().mockImplementation(() => {\n    return {playSoundFile: fakePlaySoundFile};\n  });\n});\n"})}),"\n",(0,l.jsxs)(n.p,{children:["The following will throw a ",(0,l.jsx)(n.code,{children:"ReferenceError"})," despite using ",(0,l.jsx)(n.code,{children:"mock"})," in the variable declaration, as the ",(0,l.jsx)(n.code,{children:"mockSoundPlayer"})," is not wrapped in an arrow function and thus accessed before initialization after hoisting."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"import SoundPlayer from './sound-player';\nconst mockSoundPlayer = jest.fn().mockImplementation(() => {\n  return {playSoundFile: mockPlaySoundFile};\n});\n// results in a ReferenceError\njest.mock('./sound-player', () => {\n  return mockSoundPlayer;\n});\n"})}),"\n",(0,l.jsxs)(n.h3,{id:"mockimplementation-\u307e\u305f\u306f-mockimplementationonce-\u3092\u4f7f\u7528\u3057\u305f\u30e2\u30c3\u30af\u3092\u7f6e\u304d\u63db\u3048\u308b",children:[(0,l.jsx)(n.a,{href:"/ja/docs/next/mock-function-api#mockfnmockimplementationfn",children:(0,l.jsx)(n.code,{children:"mockImplementation()"})})," \u307e\u305f\u306f ",(0,l.jsx)(n.a,{href:"/ja/docs/next/mock-function-api#mockfnmockimplementationoncefn",children:(0,l.jsx)(n.code,{children:"mockImplementationOnce()"})})," \u3092\u4f7f\u7528\u3057\u305f\u30e2\u30c3\u30af\u3092\u7f6e\u304d\u63db\u3048\u308b"]}),"\n",(0,l.jsxs)(n.p,{children:["\u4ee5\u4e0a\u3059\u3079\u3066\u306e\u30e2\u30c3\u30af\u3067\u5b9f\u88c5\u3092\u5909\u66f4\u3059\u308b\u306b\u306f\u30011\u3064\u306e\u30c6\u30b9\u30c8\u307e\u305f\u306f\u3059\u3079\u3066\u306e\u30c6\u30b9\u30c8\u306b\u5bfe\u3057\u3066\u3001\u65e2\u5b58\u306e\u30e2\u30c3\u30af\u306e\u4e2d\u3067 ",(0,l.jsx)(n.code,{children:"mockImplementation()"})," \u3092\u547c\u3073\u51fa\u3057\u307e\u3059\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:["jest.mock \u306e\u547c\u3073\u51fa\u3057\u306f\u30b3\u30fc\u30c9\u306e\u30c8\u30c3\u30d7\u306b\u5f15\u304d\u4e0a\u3052\u3089\u308c\u307e\u3059\u3002 \u305f\u3068\u3048\u3070 ",(0,l.jsx)(n.code,{children:"beforeAll()"})," \u306e\u4e2d\u306a\u3069\u3067\u5f8c\u304b\u3089\u30e2\u30c3\u30af\u3092\u6307\u5b9a\u3059\u308b\u306b\u306f\u3001\u30d5\u30a1\u30af\u30c8\u30ea\u5f15\u6570\u3067\u6307\u5b9a\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u3001",(0,l.jsx)(n.code,{children:"mockImplementation()"})," (\u307e\u305f\u306f ",(0,l.jsx)(n.code,{children:"mockImplementationOnce()"}),") \u3092\u65e2\u5b58\u306e\u30e2\u30c3\u30af\u306e\u4e2d\u3067\u547c\u3073\u51fa\u3057\u307e\u3059\u3002 \u3053\u308c\u306b\u3088\u308a\u3001\u30c6\u30b9\u30c8\u9593\u3067\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u30e2\u30c3\u30af\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"import SoundPlayer from './sound-player';\nimport SoundPlayerConsumer from './sound-player-consumer';\n\njest.mock('./sound-player');\n\ndescribe('When SoundPlayer throws an error', () => {\n  beforeAll(() => {\n    SoundPlayer.mockImplementation(() => {\n      return {\n        playSoundFile: () => {\n          throw new Error('Test error');\n        },\n      };\n    });\n  });\n\n  it('Should throw an error when calling playSomethingCool', () => {\n    const soundPlayerConsumer = new SoundPlayerConsumer();\n    expect(() => soundPlayerConsumer.playSomethingCool()).toThrow();\n  });\n});\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u8e0f\u307f\u8fbc\u3093\u3060\u8a71-\u30e2\u30c3\u30af\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u95a2\u6570\u3092\u7406\u89e3\u3059\u308b",children:"\u8e0f\u307f\u8fbc\u3093\u3060\u8a71: \u30e2\u30c3\u30af\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u95a2\u6570\u3092\u7406\u89e3\u3059\u308b"}),"\n",(0,l.jsxs)(n.p,{children:["\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u95a2\u6570\u3092\u69cb\u7bc9\u3059\u308b\u6642\u3001",(0,l.jsx)(n.code,{children:"jest.fn().mockImplementation()"})," \u3092\u4f7f\u7528\u3057\u305f\u30e2\u30c3\u30af\u306f\u5b9f\u969b\u3088\u308a\u3082\u8907\u96d1\u306a\u898b\u305f\u76ee\u306b\u306a\u308a\u307e\u3059\u3002 \u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u306f\u3001\u30e2\u30c3\u30af\u306e\u52d5\u4f5c\u3092\u8aac\u660e\u3057\u306a\u304c\u3089\u3001\u30b7\u30f3\u30d7\u30eb\u306a\u30ab\u30b9\u30bf\u30e0\u30e2\u30c3\u30af\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002"]}),"\n",(0,l.jsx)(n.h3,{id:"\u30de\u30cb\u30e5\u30a2\u30eb\u30e2\u30c3\u30af\u306f1\u3064\u306e-es6-\u30af\u30e9\u30b9\u3067\u3042\u308b",children:"\u30de\u30cb\u30e5\u30a2\u30eb\u30e2\u30c3\u30af\u306f1\u3064\u306e ES6 \u30af\u30e9\u30b9\u3067\u3042\u308b"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"__mocks__"})," \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306b\u30e2\u30c3\u30af\u30af\u30e9\u30b9\u3068\u540c\u3058\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u4f7f\u7528\u3057\u305f ES6 \u30af\u30e9\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u3068\u3001\u30e2\u30c3\u30af\u3068\u3057\u3066\u6a5f\u80fd\u3057\u307e\u3059\u3002 \u3053\u306e\u30af\u30e9\u30b9\u306f\u5b9f\u969b\u306e\u30af\u30e9\u30b9\u306e\u4ee3\u308f\u308a\u306b\u4f7f\u308f\u308c\u307e\u3059\u3002 \u3053\u308c\u306b\u3088\u308a\u3001\u30af\u30e9\u30b9\u306b\u30c6\u30b9\u30c8\u5b9f\u88c5\u3092\u6ce8\u5165\u3067\u304d\u307e\u3059\u304c\u3001\u95a2\u6570\u547c\u3073\u51fa\u3057\u3092\u30b9\u30d1\u30a4\u3059\u308b\u624b\u6bb5\u306f\u63d0\u4f9b\u3055\u308c\u307e\u305b\u3093\u3002"]}),"\n",(0,l.jsx)(n.p,{children:"\u5177\u4f53\u4f8b\u3068\u3057\u3066\u3001\u30e2\u30c3\u30af\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",metastring:'title="__mocks__/sound-player.js"',children:"export default class SoundPlayer {\n  constructor() {\n    console.log('Mock SoundPlayer: constructor was called');\n  }\n\n  playSoundFile() {\n    console.log('Mock SoundPlayer: playSoundFile was called');\n  }\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4f7f\u7528\u3057\u3066\u30e2\u30c3\u30af\u3059\u308b",children:"\u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4f7f\u7528\u3057\u3066\u30e2\u30c3\u30af\u3059\u308b"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"jest.mock(path, moduleFactory)"})," \u306b\u6e21\u3055\u308c\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u306f\u3001function* \u3092\u8fd4\u3059\u9ad8\u968e\u95a2\u6570\u306b\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002 \u3053\u3046\u3059\u308b\u3053\u3068\u3067\u3001\u30e2\u30c3\u30af\u306b\u5bfe\u3057\u3066 ",(0,l.jsx)(n.code,{children:"new"})," \u3092\u547c\u3076\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u7e70\u308a\u8fd4\u3057\u307e\u3059\u304c\u3001\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u3001\u30c6\u30b9\u30c8\u306b\u7570\u306a\u308b\u52d5\u4f5c\u3092\u633f\u5165\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u304c\u3001\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u3092\u30b9\u30d1\u30a4\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002"]}),"\n",(0,l.jsx)(n.h4,{id:"-\u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u306f\u95a2\u6570\u3092\u8fd4\u3055\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044",children:"* \u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u306f\u95a2\u6570\u3092\u8fd4\u3055\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044"}),"\n",(0,l.jsx)(n.p,{children:"\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u95a2\u6570\u3092\u30e2\u30c3\u30af\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u306f\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u95a2\u6570\u3092\u8fd4\u3055\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002 \u8a00\u3044\u63db\u3048\u308b\u3068\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u306f\u95a2\u6570\u3092\u8fd4\u3059\u95a2\u6570\u3001\u3064\u307e\u308a\u9ad8\u968e\u95a2\u6570 (high-order function; HOF) \u3067\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"jest.mock('./sound-player', () => {\n  return function () {\n    return {playSoundFile: () => {}};\n  };\n});\n"})}),"\n",(0,l.jsxs)(n.admonition,{type:"note",children:[(0,l.jsxs)(n.p,{children:["The mock can't be an arrow function because calling ",(0,l.jsx)(n.code,{children:"new"})," on an arrow function is not allowed in JavaScript. \u305d\u306e\u305f\u3081\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u95a2\u6570\u306f\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002"]}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"jest.mock('./sound-player', () => {\n  return () => {\n    // Does not work; arrow functions can't be called with new\n    return {playSoundFile: () => {}};\n  };\n});\n"})}),(0,l.jsxs)(n.p,{children:["\u3053\u306e\u3088\u3046\u306b\u66f8\u304f\u3068\u3001babel-preset-env \u306a\u3069\u3067 ES5 \u306b\u30c8\u30e9\u30f3\u30b9\u30d1\u30a4\u30eb\u3057\u306a\u3044\u9650\u308a\u3001",(0,l.jsx)(n.em,{children:(0,l.jsx)(n.strong,{children:"TypeError: _soundPlayer2.default is not a constructor"})})," \u3068\u3044\u3046\u4f8b\u5916\u304c\u767a\u751f\u3057\u307e\u3059\u3002 (ES5 \u306b\u306f\u30a2\u30ed\u30fc\u95a2\u6570\u3084\u30af\u30e9\u30b9\u304c\u5b58\u5728\u3057\u306a\u3044\u305f\u3081\u3001\u4e21\u65b9\u3068\u3082\u5358\u7d14\u306a\u95a2\u6570\u306b\u5909\u63db\u3055\u308c\u308b\u305f\u3081\u3067\u3059\u3002"]})]}),"\n",(0,l.jsx)(n.h2,{id:"mocking-a-specific-method-of-a-class",children:"Mocking a specific method of a class"}),"\n",(0,l.jsxs)(n.p,{children:["Lets say that you want to mock or spy on the method ",(0,l.jsx)(n.code,{children:"playSoundFile"})," within the class ",(0,l.jsx)(n.code,{children:"SoundPlayer"}),". A simple example:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"// your jest test file below\nimport SoundPlayer from './sound-player';\nimport SoundPlayerConsumer from './sound-player-consumer';\n\nconst playSoundFileMock = jest\n  .spyOn(SoundPlayer.prototype, 'playSoundFile')\n  .mockImplementation(() => {\n    console.log('mocked function');\n  }); // comment this line if just want to \"spy\"\n\nit('player consumer plays music', () => {\n  const player = new SoundPlayerConsumer();\n  player.playSomethingCool();\n  expect(playSoundFileMock).toHaveBeenCalled();\n});\n"})}),"\n",(0,l.jsx)(n.h3,{id:"static-getter-and-setter-methods",children:"Static, getter and setter methods"}),"\n",(0,l.jsxs)(n.p,{children:["Lets imagine our class ",(0,l.jsx)(n.code,{children:"SoundPlayer"})," has a getter method ",(0,l.jsx)(n.code,{children:"foo"})," and a static method ",(0,l.jsx)(n.code,{children:"brand"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"export default class SoundPlayer {\n  constructor() {\n    this.foo = 'bar';\n  }\n\n  playSoundFile(fileName) {\n    console.log('Playing sound file ' + fileName);\n  }\n\n  get foo() {\n    return 'bar';\n  }\n  static brand() {\n    return 'player-brand';\n  }\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:"You can mock/spy on them easily, here is an example:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"// your jest test file below\nimport SoundPlayer from './sound-player';\n\nconst staticMethodMock = jest\n  .spyOn(SoundPlayer, 'brand')\n  .mockImplementation(() => 'some-mocked-brand');\n\nconst getterMethodMock = jest\n  .spyOn(SoundPlayer.prototype, 'foo', 'get')\n  .mockImplementation(() => 'some-mocked-result');\n\nit('custom methods are called', () => {\n  const player = new SoundPlayer();\n  const foo = player.foo;\n  const brand = SoundPlayer.brand();\n\n  expect(staticMethodMock).toHaveBeenCalled();\n  expect(getterMethodMock).toHaveBeenCalled();\n});\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u4f7f\u7528\u72b6\u6cc1\u3092\u30c8\u30e9\u30c3\u30af\u3057\u7d9a\u3051\u308b-\u30e2\u30c3\u30af\u3092\u30b9\u30d1\u30a4\u3059\u308b",children:"\u4f7f\u7528\u72b6\u6cc1\u3092\u30c8\u30e9\u30c3\u30af\u3057\u7d9a\u3051\u308b (\u30e2\u30c3\u30af\u3092\u30b9\u30d1\u30a4\u3059\u308b)"}),"\n",(0,l.jsx)(n.p,{children:"\u30c6\u30b9\u30c8\u306e\u5b9f\u88c5\u3092\u6ce8\u5165\u3059\u308b\u306e\u306f\u4fbf\u5229\u3067\u3059\u304c\u3001\u304a\u305d\u3089\u304f\u3001\u30af\u30e9\u30b9\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3084\u30e1\u30bd\u30c3\u30c9\u304c\u6b63\u3057\u3044\u5f15\u6570\u3067\u547c\u3070\u308c\u305f\u304b\u3069\u3046\u304b\u3082\u78ba\u8a8d\u3057\u305f\u3044\u3068\u8003\u3048\u308b\u3067\u3057\u3087\u3046\u3002"}),"\n",(0,l.jsx)(n.h3,{id:"\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u30b9\u30d1\u30a4\u3059\u308b",children:"\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u30b9\u30d1\u30a4\u3059\u308b"}),"\n",(0,l.jsxs)(n.p,{children:["\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u547c\u3073\u51fa\u3057\u3092\u8ffd\u8de1\u3059\u308b\u306b\u306f\u3001\u9ad8\u968e\u95a2\u6570\u304c\u8fd4\u3059\u95a2\u6570\u3092 Jest \u306e\u30e2\u30c3\u30af\u95a2\u6570\u306b\u7f6e\u63db\u3057\u307e\u3059\u3002 \u30e2\u30c3\u30af\u95a2\u6570\u306f ",(0,l.jsx)(n.a,{href:"/ja/docs/next/jest-object#jestfnimplementation",children:(0,l.jsx)(n.code,{children:"jest.fn()"})})," \u3067\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u95a2\u6570\u306e\u5b9f\u88c5\u306f ",(0,l.jsx)(n.code,{children:"mockImplementation()"})," \u3067\u6307\u5b9a\u3057\u307e\u3059\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"import SoundPlayer from './sound-player';\njest.mock('./sound-player', () => {\n  // Works and lets you check for constructor calls:\n  return jest.fn().mockImplementation(() => {\n    return {playSoundFile: () => {}};\n  });\n});\n"})}),"\n",(0,l.jsxs)(n.p,{children:["This will let us inspect usage of our mocked class, using ",(0,l.jsx)(n.code,{children:"SoundPlayer.mock.calls"}),": ",(0,l.jsx)(n.code,{children:"expect(SoundPlayer).toHaveBeenCalled();"})," or near-equivalent: ",(0,l.jsx)(n.code,{children:"expect(SoundPlayer.mock.calls.length).toBeGreaterThan(0);"})]}),"\n",(0,l.jsx)(n.h3,{id:"mocking-non-default-class-exports",children:"Mocking non-default class exports"}),"\n",(0,l.jsxs)(n.p,{children:["\u30af\u30e9\u30b9\u304c\u30e2\u30b8\u30e5\u30fc\u30eb\u304b\u3089\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a8\u30af\u30b9\u30dd\u30fc\u30c8",(0,l.jsx)(n.strong,{children:"\u3067\u306f\u306a\u3044"}),"\u5834\u5408\u3001\u30af\u30e9\u30b9\u306e\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u540d\u3068\u540c\u3058\u30ad\u30fc\u3092\u6301\u3064\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"import {SoundPlayer} from './sound-player';\njest.mock('./sound-player', () => {\n  // \u6a5f\u80fd\u3059\u308b\u306e\u3067\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u30fc\u306e\u547c\u3073\u51fa\u3057\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059:\n  return {\n    SoundPlayer: jest.fn().mockImplementation(() => {\n      return {playSoundFile: () => {}};\n    }),\n  };\n});\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u30af\u30e9\u30b9\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u30b9\u30d1\u30a4\u3059\u308b",children:"\u30af\u30e9\u30b9\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u30b9\u30d1\u30a4\u3059\u308b"}),"\n",(0,l.jsxs)(n.p,{children:["\u30e2\u30c3\u30af\u30af\u30e9\u30b9\u306f\u3001\u4efb\u610f\u306e\u30e1\u30f3\u30d0\u30fc\u95a2\u6570 (\u30b3\u30fc\u30c9\u4f8b\u3067\u306f ",(0,l.jsx)(n.code,{children:"playSoundFile"}),") \u3092\u63d0\u4f9b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u3082\u3057\u5fc5\u8981\u306a\u95a2\u6570\u304c\u306a\u3051\u308c\u3070\u3001\u5b58\u5728\u3057\u306a\u3044\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u305f\u6642\u306b\u30a8\u30e9\u30fc\u304c\u8d77\u3053\u308a\u307e\u3059\u3002 \u3057\u304b\u3057\u3001\u304a\u305d\u3089\u304f\u671f\u5f85\u901a\u308a\u306e\u5f15\u6570\u3067\u547c\u3073\u51fa\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u3001\u3053\u308c\u3089\u306e\u30e1\u30bd\u30c3\u30c9\u306e\u547c\u3073\u51fa\u3057\u306b\u5bfe\u3057\u3066\u3082\u30b9\u30d1\u30a4\u3057\u305f\u3044\u3068\u8003\u3048\u308b\u3067\u3057\u3087\u3046\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:["\u30c6\u30b9\u30c8\u4e2d\u306f\u3001\u30e2\u30c3\u30af\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u95a2\u6570\u304c\u547c\u3070\u308c\u308b\u305f\u3073\u306b\u3001\u65b0\u3057\u3044\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u4f5c\u3089\u308c\u307e\u3059\u3002 \u3053\u308c\u3089\u3059\u3079\u3066\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30e1\u30bd\u30c3\u30c9\u306e\u547c\u3073\u51fa\u3057\u3092\u30b9\u30d1\u30a4\u3059\u308b\u305f\u3081\u306b\u3001",(0,l.jsx)(n.code,{children:"playSoundFile"})," \u3068\u305d\u306e\u4ed6\u306e\u30e2\u30c3\u30af\u95a2\u6570\u3092\u4f5c\u6210\u3057\u3001\u30c6\u30b9\u30c8\u4e2d\u306b\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u305d\u306e\u540c\u4e00\u306e\u30e2\u30c3\u30af\u95a2\u6570\u3078\u306e\u53c2\u7167\u3092\u4fdd\u5b58\u3057\u3066\u304a\u304d\u307e\u3059\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"import SoundPlayer from './sound-player';\nconst mockPlaySoundFile = jest.fn();\njest.mock('./sound-player', () => {\n  return jest.fn().mockImplementation(() => {\n    return {playSoundFile: mockPlaySoundFile};\n    // Now we can track calls to playSoundFile\n  });\n});\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u3053\u306e\u30b3\u30fc\u30c9\u3068\u540c\u7b49\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u30e2\u30c3\u30af\u306f\u3001\u6b21\u306e\u3088\u3046\u306b\u66f8\u3051\u308b\u3067\u3057\u3087\u3046\u3002"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",metastring:'title="__mocks__/sound-player.js"',children:"// Import this named export into your test file\nexport const mockPlaySoundFile = jest.fn();\nconst mock = jest.fn().mockImplementation(() => {\n  return {playSoundFile: mockPlaySoundFile};\n});\n\nexport default mock;\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u4f7f\u7528\u4f8b\u306f\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u3068\u540c\u69d8\u3067\u3059\u304c\u3001",(0,l.jsx)(n.code,{children:"jest.mock()"})," \u306e\u7b2c2\u5f15\u6570\u3092\u7701\u7565\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u70b9\u3068\u3001\u30e2\u30c3\u30af\u3057\u305f\u30e1\u30bd\u30c3\u30c9\u304c\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u5185\u306b\u306f\u306a\u3044\u306e\u3067\u3001\u305d\u308c\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u70b9\u304c\u7570\u306a\u308a\u307e\u3059\u3002 ",(0,l.jsx)(n.code,{children:"__mocks__"})," \u3092\u542b\u307e\u306a\u3044\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u30d1\u30b9\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,l.jsx)(n.h3,{id:"\u30c6\u30b9\u30c8\u9593\u3067\u306e\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7",children:"\u30c6\u30b9\u30c8\u9593\u3067\u306e\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7"}),"\n",(0,l.jsxs)(n.p,{children:["\u30e2\u30c3\u30af\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u95a2\u6570\u3068\u30e1\u30bd\u30c3\u30c9\u306e\u547c\u3073\u51fa\u3057\u306e\u8a18\u9332\u3092\u30af\u30ea\u30a2\u3059\u308b\u306b\u306f\u3001",(0,l.jsx)(n.a,{href:"/ja/docs/next/mock-function-api#mockfnmockclear",children:(0,l.jsx)(n.code,{children:"mockClear()"})})," \u3092 ",(0,l.jsx)(n.code,{children:"beforeEach()"})," \u95a2\u6570\u306e\u4e2d\u3067\u547c\u3073\u307e\u3059\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"beforeEach(() => {\n  SoundPlayer.mockClear();\n  mockPlaySoundFile.mockClear();\n});\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u5b8c\u5168\u306b\u52d5\u4f5c\u3059\u308b\u30b3\u30fc\u30c9\u4f8b",children:"\u5b8c\u5168\u306b\u52d5\u4f5c\u3059\u308b\u30b3\u30fc\u30c9\u4f8b"}),"\n",(0,l.jsxs)(n.p,{children:["\u4ee5\u4e0b\u306b\u5b8c\u5168\u306b\u52d5\u4f5c\u3059\u308b\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u4f8b\u3092\u6319\u3052\u307e\u3059\u3002 \u3053\u306e\u30b3\u30fc\u30c9\u3067\u306f\u3001",(0,l.jsx)(n.code,{children:"jest.mock"})," \u306b\u5bfe\u3057\u3066\u30e2\u30b8\u30e5\u30fc\u30eb\u30d5\u30a1\u30af\u30c8\u30ea\u5f15\u6570\u3092\u4e0e\u3048\u3066\u3044\u307e\u3059\u3002"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",metastring:'title="sound-player-consumer.test.js"',children:"import SoundPlayer from './sound-player';\nimport SoundPlayerConsumer from './sound-player-consumer';\n\nconst mockPlaySoundFile = jest.fn();\njest.mock('./sound-player', () => {\n  return jest.fn().mockImplementation(() => {\n    return {playSoundFile: mockPlaySoundFile};\n  });\n});\n\nbeforeEach(() => {\n  SoundPlayer.mockClear();\n  mockPlaySoundFile.mockClear();\n});\n\nit('The consumer should be able to call new() on SoundPlayer', () => {\n  const soundPlayerConsumer = new SoundPlayerConsumer();\n  // Ensure constructor created the object:\n  expect(soundPlayerConsumer).toBeTruthy();\n});\n\nit('We can check if the consumer called the class constructor', () => {\n  const soundPlayerConsumer = new SoundPlayerConsumer();\n  expect(SoundPlayer).toHaveBeenCalledTimes(1);\n});\n\nit('We can check if the consumer called a method on the class instance', () => {\n  const soundPlayerConsumer = new SoundPlayerConsumer();\n  const coolSoundFileName = 'song.mp3';\n  soundPlayerConsumer.playSomethingCool();\n  expect(mockPlaySoundFile.mock.calls[0][0]).toBe(coolSoundFileName);\n});\n"})})]})}const u=function(e={}){const{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,l.jsx)(n,Object.assign({},e,{children:(0,l.jsx)(i,e)})):i(e)}},1670:(e,n,o)=>{o.d(n,{Zo:()=>r,ah:()=>c});var l=o(7378);const s=l.createContext({});function c(e){const n=l.useContext(s);return l.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const a={};function r({components:e,children:n,disableParentContext:o}){let r;return r=o?"function"==typeof e?e({}):e||a:c(e),l.createElement(s.Provider,{value:r},n)}}}]);