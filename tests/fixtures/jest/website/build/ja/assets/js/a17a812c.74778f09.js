"use strict";(self.webpackChunkjest_website=self.webpackChunkjest_website||[]).push([[4234],{7165:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>a});var t=n(4246),c=n(1670);const r={id:"bypassing-module-mocks",title:"\u30e2\u30b8\u30e5\u30fc\u30eb\u30e2\u30c3\u30af\u306e\u30d0\u30a4\u30d1\u30b9"},o=void 0,i={unversionedId:"bypassing-module-mocks",id:"version-29.5/bypassing-module-mocks",title:"\u30e2\u30b8\u30e5\u30fc\u30eb\u30e2\u30c3\u30af\u306e\u30d0\u30a4\u30d1\u30b9",description:"Jest\u3067\u306f\u3001\u3069\u3093\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u3082\u30c6\u30b9\u30c8\u5185\u3067\u30e2\u30c3\u30af\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u305d\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u5185\u304b\u3089\u95a2\u6570\u304c\u6b63\u3057\u304f\u547c\u3073\u51fa\u3055\u308c\u3066\u3044\u308b\u304b\u3092\u30c6\u30b9\u30c8\u3059\u308b\u306e\u306b\u5f79\u7acb\u3061\u307e\u3059\u3002 \u305f\u3060\u3057\u3001 \u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3067\u30e2\u30c3\u30af\u3055\u308c\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u4e00\u90e8\u3092\u4f7f\u7528\u3057\u305f\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002 \u305d\u306e\u5834\u5408\u3001\u30e2\u30c3\u30af\u5316\u3055\u308c\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u306f\u306a\u304f\u5143\u306e\u5b9f\u88c5\u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002",source:"@site/i18n/ja/docusaurus-plugin-content-docs/version-29.5/BypassingModuleMocks.md",sourceDirName:".",slug:"/bypassing-module-mocks",permalink:"/ja/docs/29.5/bypassing-module-mocks",draft:!1,unlisted:!1,editUrl:"https://crowdin.com/project/jest-v2/ja",tags:[],version:"29.5",frontMatter:{id:"bypassing-module-mocks",title:"\u30e2\u30b8\u30e5\u30fc\u30eb\u30e2\u30c3\u30af\u306e\u30d0\u30a4\u30d1\u30b9"},sidebar:"docs",previous:{title:"ES6 \u30af\u30e9\u30b9\u306e\u30e2\u30c3\u30af",permalink:"/ja/docs/29.5/es6-class-mocks"},next:{title:"ECMAScript \u30e2\u30b8\u30e5\u30fc\u30eb",permalink:"/ja/docs/29.5/ecmascript-modules"}},d={},a=[];function l(e){const s=Object.assign({p:"p",em:"em",code:"code",pre:"pre"},(0,c.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.p,{children:["Jest\u3067\u306f\u3001\u3069\u3093\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u3082\u30c6\u30b9\u30c8\u5185\u3067\u30e2\u30c3\u30af\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u305d\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u5185\u304b\u3089\u95a2\u6570\u304c\u6b63\u3057\u304f\u547c\u3073\u51fa\u3055\u308c\u3066\u3044\u308b\u304b\u3092\u30c6\u30b9\u30c8\u3059\u308b\u306e\u306b\u5f79\u7acb\u3061\u307e\u3059\u3002 \u305f\u3060\u3057\u3001 ",(0,t.jsx)(s.em,{children:"\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb"}),"\u3067\u30e2\u30c3\u30af\u3055\u308c\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u4e00\u90e8\u3092\u4f7f\u7528\u3057\u305f\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002 \u305d\u306e\u5834\u5408\u3001\u30e2\u30c3\u30af\u5316\u3055\u308c\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u306f\u306a\u304f\u5143\u306e\u5b9f\u88c5\u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsxs)(s.p,{children:["\u6b21\u306e ",(0,t.jsx)(s.code,{children:"createUser"})," \u95a2\u6570\u306e\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u3092\u66f8\u304f\u5834\u5408\u3092\u8003\u3048\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-javascript",metastring:'title="createUser.js"',children:"import fetch from 'node-fetch';\n\nexport const createUser = async () => {\n  const response = await fetch('https://website.com/users', {method: 'POST'});\n  const userId = await response.text();\n  return userId;\n};\n"})}),"\n",(0,t.jsxs)(s.p,{children:["\u30c6\u30b9\u30c8\u3067\u306f\u3001\u5b9f\u969b\u306b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u884c\u308f\u306a\u304f\u3066\u3082\u547c\u3073\u51fa\u3055\u308c\u308b\u3088\u3046\u306b\u3001 ",(0,t.jsx)(s.code,{children:"fetch"})," \u95a2\u6570\u3092\u30e2\u30c3\u30af\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u305f\u3060\u3057\u3001 \u4f5c\u6210\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u306eID\u3092\u53d6\u5f97\u3059\u308b\u306e\u306b\u4f7f\u308f\u308c\u3066\u3044\u308b\u306e\u3067\u3001",(0,t.jsx)(s.code,{children:"fetch"})," \u306e\u623b\u308a\u5024\u3092 ( ",(0,t.jsx)(s.code,{children:"Promise"}),"\u306b\u30e9\u30c3\u30d7\u3055\u308c\u305f)",(0,t.jsx)(s.code,{children:"Response"})," \u3067\u30e2\u30c3\u30af\u3059\u308b\u4e8b\u3082\u5fc5\u8981\u3067\u3059\u3002 \u3067\u3059\u304b\u3089\u3001\u6700\u521d\u306f\u6b21\u306e\u3088\u3046\u306a\u30c6\u30b9\u30c8\u3092\u66f8\u304f\u3053\u3068\u3067\u3057\u3087\u3046\u3002"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-javascript",children:"jest.mock('node-fetch');\n\nimport fetch, {Response} from 'node-fetch';\nimport {createUser} from './createUser';\n\ntest('createUser calls fetch with the right args and returns the user id', async () => {\n  fetch.mockReturnValue(Promise.resolve(new Response('4')));\n\n  const userId = await createUser();\n\n  expect(fetch).toHaveBeenCalledTimes(1);\n  expect(fetch).toHaveBeenCalledWith('https://website.com/users', {\n    method: 'POST',\n  });\n  expect(userId).toBe('4');\n});\n"})}),"\n",(0,t.jsxs)(s.p,{children:["\u3057\u304b\u3057\u3001\u4e0a\u8a18\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u305f\u5834\u5408\u3001",(0,t.jsx)(s.code,{children:"createUser"}),"\u95a2\u6570\u306f\u6b21\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u3092\u51fa\u529b\u3057\u3066\u5931\u6557\u3059\u308b\u3067\u3057\u3087\u3046\uff1a  ",(0,t.jsx)(s.code,{children:"TypeError: response.text is not a function"})," \u3053\u308c\u306f\u3001 ",(0,t.jsx)(s.code,{children:"jest.mock"})," \u3092\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u6700\u521d\u306b\u547c\u3073\u51fa\u3057\u305f\u3053\u3068\u3067\u3001",(0,t.jsx)(s.code,{children:"node-fetch"}),"\u304b\u3089 import \u3057\u305f ",(0,t.jsx)(s.code,{children:"Response"})," \u30af\u30e9\u30b9\u304c\u30e2\u30c3\u30af\u3055\u308c\u3001\u672c\u6765\u3042\u308b\u3079\u304d\u632f\u308b\u821e\u3044\u3092\u3057\u306a\u304f\u306a\u3063\u305f\u305f\u3081\u3067\u3059\u3002"]}),"\n",(0,t.jsxs)(s.p,{children:["\u3053\u306e\u3088\u3046\u306a\u554f\u984c\u3092\u56de\u907f\u3059\u308b\u305f\u3081\u306b\u3001Jest \u306f ",(0,t.jsx)(s.code,{children:"jest.requireActual"})," \u30d8\u30eb\u30d1\u30fc\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002 \u4e0a\u8a18\u306e\u30c6\u30b9\u30c8\u3092\u6a5f\u80fd\u3055\u305b\u308b\u306b\u306f\u3001\u6b21\u306e\u3088\u3046\u306b\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u5185\u306eimport\u6587\u3092\u5909\u66f4\u3057\u307e\u3059\u3002"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-javascript",children:"// BEFORE\njest.mock('node-fetch');\nimport fetch, {Response} from 'node-fetch';\n"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-javascript",children:"// AFTER\njest.mock('node-fetch');\nimport fetch from 'node-fetch';\nconst {Response} = jest.requireActual('node-fetch');\n"})}),"\n",(0,t.jsxs)(s.p,{children:["\u3053\u308c\u306b\u3088\u308a\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u306f\u30e2\u30c3\u30af\u5316\u3055\u308c\u305f\u3082\u306e\u3067\u306f\u306a\u304f\u3001\u5b9f\u969b\u306e ",(0,t.jsx)(s.code,{children:"Response"})," \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092 ",(0,t.jsx)(s.code,{children:"node-fetch"}),"\u304b\u3089 import \u3067\u304d\u307e\u3059\u3002 \u3064\u307e\u308a\u3001\u30c6\u30b9\u30c8\u304c\u6b63\u3057\u304f\u30d1\u30b9\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002"]})]})}const p=function(e={}){const{wrapper:s}=Object.assign({},(0,c.ah)(),e.components);return s?(0,t.jsx)(s,Object.assign({},e,{children:(0,t.jsx)(l,e)})):l(e)}},1670:(e,s,n)=>{n.d(s,{Zo:()=>i,ah:()=>r});var t=n(7378);const c=t.createContext({});function r(e){const s=t.useContext(c);return t.useMemo((()=>"function"==typeof e?e(s):{...s,...e}),[s,e])}const o={};function i({components:e,children:s,disableParentContext:n}){let i;return i=n?"function"==typeof e?e({}):e||o:r(e),t.createElement(c.Provider,{value:i},s)}}}]);