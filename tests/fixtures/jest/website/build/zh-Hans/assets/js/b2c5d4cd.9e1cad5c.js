"use strict";(self.webpackChunkjest_website=self.webpackChunkjest_website||[]).push([[9859],{1524:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>l});var t=s(4246),o=s(1670);const c={id:"using-matchers",title:"\u5339\u914d\u5668\u7684\u4f7f\u7528"},i=void 0,r={unversionedId:"using-matchers",id:"version-29.6/using-matchers",title:"\u5339\u914d\u5668\u7684\u4f7f\u7528",description:"Jest\u4f7f\u7528\u201c\u5339\u914d\u5668\u201d\u7684\u673a\u5236\u8ba9\u4f60\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u65b9\u6cd5\u8fdb\u884c\u6d4b\u8bd5 \u8fd9\u7bc7\u6587\u6863\u5c06\u5411\u4f60\u4ecb\u7ecd\u4e00\u4e9b\u5e38\u7528\u7684\u5339\u914d\u5668\uff0c \u60f3\u8981\u770b\u5230\u5b8c\u6574\u7684\u5217\u8868\uff0c\u8bf7\u67e5\u9605 expect API \u7684\u6587\u6863\u3002",source:"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/version-29.6/UsingMatchers.md",sourceDirName:".",slug:"/using-matchers",permalink:"/zh-Hans/docs/using-matchers",draft:!1,unlisted:!1,editUrl:"https://crowdin.com/project/jest-v2/zh-CN",tags:[],version:"29.6",frontMatter:{id:"using-matchers",title:"\u5339\u914d\u5668\u7684\u4f7f\u7528"},sidebar:"docs",previous:{title:"\u5feb\u901f\u5f00\u59cb",permalink:"/zh-Hans/docs/getting-started"},next:{title:"\u6d4b\u8bd5\u5f02\u6b65\u4ee3\u7801",permalink:"/zh-Hans/docs/asynchronous"}},d={},l=[{value:"\u5e38\u7528\u7684\u5339\u914d\u5668",id:"\u5e38\u7528\u7684\u5339\u914d\u5668",level:2},{value:"\u771f\u503c",id:"\u771f\u503c",level:2},{value:"\u6570\u5b57",id:"\u6570\u5b57",level:2},{value:"\u5b57\u7b26\u4e32",id:"\u5b57\u7b26\u4e32",level:2},{value:"\u6570\u7ec4\u548c\u53ef\u8fed\u4ee3\u5bf9\u8c61",id:"\u6570\u7ec4\u548c\u53ef\u8fed\u4ee3\u5bf9\u8c61",level:2},{value:"\u4f8b\u5916",id:"\u4f8b\u5916",level:2},{value:"\u4ee5\u53ca\u66f4\u591a",id:"\u4ee5\u53ca\u66f4\u591a",level:2}];function a(e){const n=Object.assign({p:"p",a:"a",code:"code",h2:"h2",pre:"pre",admonition:"admonition",ul:"ul",li:"li"},(0,o.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["Jest\u4f7f\u7528\u201c\u5339\u914d\u5668\u201d\u7684\u673a\u5236\u8ba9\u4f60\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u65b9\u6cd5\u8fdb\u884c\u6d4b\u8bd5 \u8fd9\u7bc7\u6587\u6863\u5c06\u5411\u4f60\u4ecb\u7ecd\u4e00\u4e9b\u5e38\u7528\u7684\u5339\u914d\u5668\uff0c \u60f3\u8981\u770b\u5230\u5b8c\u6574\u7684\u5217\u8868\uff0c\u8bf7\u67e5\u9605 ",(0,t.jsxs)(n.a,{href:"/zh-Hans/docs/expect",children:[(0,t.jsx)(n.code,{children:"expect"})," API \u7684\u6587\u6863"]}),"\u3002"]}),"\n",(0,t.jsx)(n.h2,{id:"\u5e38\u7528\u7684\u5339\u914d\u5668",children:"\u5e38\u7528\u7684\u5339\u914d\u5668"}),"\n",(0,t.jsx)(n.p,{children:"\u6700\u7b80\u5355\u6d4b\u8bd5\u4e00\u4e2a\u503c\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u7cbe\u786e\u5339\u914d\u7684\u65b9\u6cd5\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"test('two plus two is four', () => {\n  expect(2 + 2).toBe(4);\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c",(0,t.jsx)(n.code,{children:"expect (2 + 2)"}),' \u8fd4\u56de\u4e86\u4e00\u4e2a"\u9884\u671f"\u7684\u5bf9\u8c61\u3002 \u4f60\u901a\u5e38\u4e0d\u4f1a\u5bf9\u8fd9\u4e9b\u671f\u671b\u5bf9\u8c61\u8c03\u7528\u8fc7\u591a\u7684\u5339\u914d\u5668\u3002 \u5728\u6b64\u4ee3\u7801\u4e2d\uff0c',(0,t.jsx)(n.code,{children:".toBe(4)"})," \u662f\u5339\u914d\u5668\u3002 \u5f53 Jest \u8fd0\u884c\u65f6\uff0c\u5b83\u4f1a\u8ddf\u8e2a\u6240\u6709\u5931\u8d25\u7684\u5339\u914d\u5668\uff0c\u4ee5\u4fbf\u5b83\u53ef\u4ee5\u4e3a\u4f60\u6253\u5370\u51fa\u5f88\u597d\u7684\u9519\u8bef\u6d88\u606f\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"toBe"}),"\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"Object.is"}),"\u6765\u8fdb\u884c\u7cbe\u51c6\u5339\u914d\u7684\u6d4b\u8bd5\u3002 If you want to check the value of an object, use ",(0,t.jsx)(n.code,{children:"toEqual"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"test('\u5bf9\u8c61\u8d4b\u503c', () => {\n  const data = {one: 1};\n  data['two'] = 2;\n  expect(data).toEqual({one: 1, two: 2});\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"toEqual"})," \u9012\u5f52\u68c0\u67e5\u5bf9\u8c61\u6216\u6570\u7ec4\u7684\u6bcf\u4e2a\u5b57\u6bb5\u3002"]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"toEqual"})," ignores object keys with ",(0,t.jsx)(n.code,{children:"undefined"})," properties, ",(0,t.jsx)(n.code,{children:"undefined"})," array items, array sparseness, or object type mismatch. To take these into account use ",(0,t.jsx)(n.code,{children:"toStrictEqual"})," instead."]})}),"\n",(0,t.jsxs)(n.p,{children:["\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4e0e\u5339\u914d\u76f8\u53cd\u7684 ",(0,t.jsx)(n.code,{children:"not"})," \u6765\u8fdb\u884c\u6d4b\u8bd5\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"test('adding positive numbers is not zero', () => {\n  for (let a = 1; a < 10; a++) {\n    for (let b = 1; b < 10; b++) {\n      expect(a + b).not.toBe(0);\n    }\n  }\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u771f\u503c",children:"\u771f\u503c"}),"\n",(0,t.jsxs)(n.p,{children:["\u4ee3\u7801\u4e2d\u7684",(0,t.jsx)(n.code,{children:"undefined"}),", ",(0,t.jsx)(n.code,{children:"null"}),", and ",(0,t.jsx)(n.code,{children:"false"}),"\u6709\u4e0d\u540c\u542b\u4e49\uff0c\u82e5\u4f60\u5728\u6d4b\u8bd5\u65f6\u4e0d\u60f3\u533a\u5206\u4ed6\u4eec\uff0c\u53ef\u4ee5\u7528\u771f\u503c\u5224\u65ad\u3002 Jest\u63d0\u4f9bhelpers\u4f9b\u4f60\u4f7f\u7528\u3002"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"toBeNull"})," \u53ea\u5339\u914d ",(0,t.jsx)(n.code,{children:"null"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"toBeUndefined"})," \u53ea\u5339\u914d ",(0,t.jsx)(n.code,{children:"undefined"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"toBeDefined"})," \u4e0e ",(0,t.jsx)(n.code,{children:"toBeUndefined"})," \u76f8\u53cd"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"toBeTruthy"})," \u5339\u914d\u4efb\u4f55 ",(0,t.jsx)(n.code,{children:"if"})," \u8bed\u53e5\u4e3a\u771f"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"toBeFalsy"})," \u5339\u914d\u4efb\u4f55 ",(0,t.jsx)(n.code,{children:"if"})," \u8bed\u53e5\u4e3a\u5047"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u4f8b\u5982\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"test('null', () => {\n  const n = null;\n  expect(n).toBeNull();\n  expect(n).toBeDefined();\n  expect(n).not.toBeUndefined();\n  expect(n).not.toBeTruthy();\n  expect(n).toBeFalsy();\n});\n\ntest('zero', () => {\n  const z = 0;\n  expect(z).not.toBeNull();\n  expect(z).toBeDefined();\n  expect(z).not.toBeUndefined();\n  expect(z).not.toBeTruthy();\n  expect(z).toBeFalsy();\n});\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u4f60\u5e94\u8be5\u4f7f\u7528\u6700\u7cbe\u786e\u5339\u914d\u7684\u5339\u914d\u5668\u6765\u6d4b\u8bd5\u4f60\u671f\u671b\u4f60\u7684\u4ee3\u7801\u80fd\u5e72\u4ec0\u4e48\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u6570\u5b57",children:"\u6570\u5b57"}),"\n",(0,t.jsx)(n.p,{children:"\u5927\u591a\u6570\u7684\u6bd4\u8f83\u6570\u5b57\u6709\u7b49\u4ef7\u7684\u5339\u914d\u5668\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"test('two plus two', () => {\n  const value = 2 + 2;\n  expect(value).toBeGreaterThan(3);\n  expect(value).toBeGreaterThanOrEqual(3.5);\n  expect(value).toBeLessThan(5);\n  expect(value).toBeLessThanOrEqual(4.5);\n\n  // toBe and toEqual are equivalent for numbers\n  expect(value).toBe(4);\n  expect(value).toEqual(4);\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u5bf9\u4e8e\u6bd4\u8f83\u6d6e\u70b9\u6570\u76f8\u7b49\uff0c\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"toBeCloseTo"})," \u800c\u4e0d\u662f ",(0,t.jsx)(n.code,{children:"toEqual"}),"\uff0c\u56e0\u4e3a\u4f60\u4e0d\u5e0c\u671b\u6d4b\u8bd5\u53d6\u51b3\u4e8e\u4e00\u4e2a\u5c0f\u5c0f\u7684\u820d\u5165\u8bef\u5dee\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"test('\u4e24\u4e2a\u6d6e\u70b9\u6570\u5b57\u76f8\u52a0', () => {\n  const value = 0.1 + 0.2;\n  //expect(value).toBe(0.3);           \u8fd9\u53e5\u4f1a\u62a5\u9519\uff0c\u56e0\u4e3a\u6d6e\u70b9\u6570\u6709\u820d\u5165\u8bef\u5dee\n  expect(value).toBeCloseTo(0.3); // \u8fd9\u53e5\u53ef\u4ee5\u8fd0\u884c\n});\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u5b57\u7b26\u4e32",children:"\u5b57\u7b26\u4e32"}),"\n",(0,t.jsxs)(n.p,{children:["\u60a8\u53ef\u4ee5\u68c0\u67e5\u5bf9\u5177\u6709 ",(0,t.jsx)(n.code,{children:"toMatch"})," \u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u5b57\u7b26\u4e32\ufe30"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"test('there is no I in team', () => {\n  expect('team').not.toMatch(/I/);\n});\n\ntest('but there is a \"stop\" in Christoph', () => {\n  expect('Christoph').toMatch(/stop/);\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u6570\u7ec4\u548c\u53ef\u8fed\u4ee3\u5bf9\u8c61",children:"\u6570\u7ec4\u548c\u53ef\u8fed\u4ee3\u5bf9\u8c61"}),"\n",(0,t.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u901a\u8fc7 ",(0,t.jsx)(n.code,{children:"toContain"}),"\u6765\u68c0\u67e5\u4e00\u4e2a\u6570\u7ec4\u6216\u53ef\u8fed\u4ee3\u5bf9\u8c61\u662f\u5426\u5305\u542b\u67d0\u4e2a\u7279\u5b9a\u9879\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const shoppingList = [\n  'diapers',\n  'kleenex',\n  'trash bags',\n  'paper towels',\n  'milk',\n];\n\ntest('shoppingList\u6570\u7ec4\u4e2d\u5305\u542bmilk', () => {\n  expect(shoppingList).toContain('milk');\n  expect(new Set(shoppingList)).toContain('milk');\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u4f8b\u5916",children:"\u4f8b\u5916"}),"\n",(0,t.jsxs)(n.p,{children:["\u82e5\u4f60\u60f3\u6d4b\u8bd5\u67d0\u51fd\u6570\u5728\u8c03\u7528\u65f6\u662f\u5426\u629b\u51fa\u4e86\u9519\u8bef\uff0c\u4f60\u9700\u8981\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"toThrow"}),"\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"function compileAndroidCode() {\n  throw new Error('you are using the wrong JDK!');\n}\n\ntest('compiling android goes as expected', () => {\n  expect(() => compileAndroidCode()).toThrow();\n  expect(() => compileAndroidCode()).toThrow(Error);\n\n  // You can also use a string that must be contained in the error message or a regexp\n  expect(() => compileAndroidCode()).toThrow('you are using the wrong JDK');\n  expect(() => compileAndroidCode()).toThrow(/JDK/);\n\n  // Or you can match an exact error message using a regexp like below\n  expect(() => compileAndroidCode()).toThrow(/^you are using the wrong JDK$/); // Test fails\n  expect(() => compileAndroidCode()).toThrow(/^you are using the wrong JDK!$/); // Test pass\n});\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["The function that throws an exception needs to be invoked within a wrapping function otherwise the ",(0,t.jsx)(n.code,{children:"toThrow"})," assertion will fail."]})}),"\n",(0,t.jsx)(n.h2,{id:"\u4ee5\u53ca\u66f4\u591a",children:"\u4ee5\u53ca\u66f4\u591a"}),"\n",(0,t.jsxs)(n.p,{children:["\u8fd9\u4e9b\u53ea\u662f\u6d45\u5c1d\u8f84\u6b62\u3002 \u5339\u914d\u5668\u7684\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u67e5\u9605 ",(0,t.jsx)(n.a,{href:"/zh-Hans/docs/expect",children:" \u53c2\u8003\u6587\u6863"}),"\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u4e00\u65e6\u4f60\u5b66\u4f1a\u4e86\u5982\u4f55\u4f7f\u7528\u5339\u914d\u5668\u540e\uff0c\u63a5\u4e0b\u6765\u53ef\u4ee5\u5b66\u4e60 Jest \u662f\u5982\u4f55\u8ba9\u4f60\u53ef\u4ee5 ",(0,t.jsx)(n.a,{href:"/zh-Hans/docs/asynchronous",children:" \u6d4b\u8bd5\u5f02\u6b65\u4ee3\u7801"}),"\u7684\u3002"]})]})}const h=function(e={}){const{wrapper:n}=Object.assign({},(0,o.ah)(),e.components);return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(a,e)})):a(e)}},1670:(e,n,s)=>{s.d(n,{Zo:()=>r,ah:()=>c});var t=s(7378);const o=t.createContext({});function c(e){const n=t.useContext(o);return t.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const i={};function r({components:e,children:n,disableParentContext:s}){let r;return r=s?"function"==typeof e?e({}):e||i:c(e),t.createElement(o.Provider,{value:r},n)}}}]);