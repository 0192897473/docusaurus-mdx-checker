"use strict";(self.webpackChunkjest_website=self.webpackChunkjest_website||[]).push([[7192],{5703:(e,n,c)=>{c.r(n),c.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>m,frontMatter:()=>s,metadata:()=>l,toc:()=>i});var o=c(4246),t=c(1670);const s={id:"mock-functions",title:"\u6a21\u62df\u51fd\u6570"},a=void 0,l={unversionedId:"mock-functions",id:"version-29.5/mock-functions",title:"\u6a21\u62df\u51fd\u6570",description:"Mock \u51fd\u6570\u5141\u8bb8\u4f60\u6d4b\u8bd5\u4ee3\u7801\u4e4b\u95f4\u7684\u8fde\u63a5\u2014\u2014\u5b9e\u73b0\u65b9\u5f0f\u5305\u62ec\uff1a\u64e6\u9664\u51fd\u6570\u7684\u5b9e\u9645\u5b9e\u73b0\u3001\u6355\u83b7\u5bf9\u51fd\u6570\u7684\u8c03\u7528 ( \u4ee5\u53ca\u5728\u8fd9\u4e9b\u8c03\u7528\u4e2d\u4f20\u9012\u7684\u53c2\u6570) \u3001\u5728\u4f7f\u7528 new \u5b9e\u4f8b\u5316\u65f6\u6355\u83b7\u6784\u9020\u51fd\u6570\u7684\u5b9e\u4f8b\u3001\u5141\u8bb8\u6d4b\u8bd5\u65f6\u914d\u7f6e\u8fd4\u56de\u503c\u3002",source:"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/version-29.5/MockFunctions.md",sourceDirName:".",slug:"/mock-functions",permalink:"/zh-Hans/docs/29.5/mock-functions",draft:!1,unlisted:!1,editUrl:"https://crowdin.com/project/jest-v2/zh-CN",tags:[],version:"29.5",frontMatter:{id:"mock-functions",title:"\u6a21\u62df\u51fd\u6570"},sidebar:"docs",previous:{title:"\u5b89\u88c5\u548c\u79fb\u9664",permalink:"/zh-Hans/docs/29.5/setup-teardown"},next:{title:"Jest \u5e73\u53f0\u5de5\u5177",permalink:"/zh-Hans/docs/29.5/jest-platform"}},r={},i=[{value:"\u4f7f\u7528 mock \u51fd\u6570",id:"\u4f7f\u7528-mock-\u51fd\u6570",level:2},{value:"<code>.mock</code> \u5c5e\u6027",id:"mock-\u5c5e\u6027",level:2},{value:"Mock \u7684\u8fd4\u56de\u503c",id:"mock-\u7684\u8fd4\u56de\u503c",level:2},{value:"\u6a21\u62df\u6a21\u5757",id:"\u6a21\u62df\u6a21\u5757",level:2},{value:"\u6a21\u62df \u90e8\u5206\u6a21\u5757",id:"\u6a21\u62df-\u90e8\u5206\u6a21\u5757",level:2},{value:"Mock \u5b9e\u73b0",id:"mock-\u5b9e\u73b0",level:2},{value:"Mock \u540d\u79f0",id:"mock-\u540d\u79f0",level:2},{value:"\u81ea\u5b9a\u4e49\u5339\u914d\u5668",id:"\u81ea\u5b9a\u4e49\u5339\u914d\u5668",level:2}];function d(e){const n=Object.assign({p:"p",code:"code",a:"a",h2:"h2",pre:"pre"},(0,t.ah)(),e.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["Mock \u51fd\u6570\u5141\u8bb8\u4f60\u6d4b\u8bd5\u4ee3\u7801\u4e4b\u95f4\u7684\u8fde\u63a5\u2014\u2014\u5b9e\u73b0\u65b9\u5f0f\u5305\u62ec\uff1a\u64e6\u9664\u51fd\u6570\u7684\u5b9e\u9645\u5b9e\u73b0\u3001\u6355\u83b7\u5bf9\u51fd\u6570\u7684\u8c03\u7528 ( \u4ee5\u53ca\u5728\u8fd9\u4e9b\u8c03\u7528\u4e2d\u4f20\u9012\u7684\u53c2\u6570) \u3001\u5728\u4f7f\u7528 ",(0,o.jsx)(n.code,{children:"new"})," \u5b9e\u4f8b\u5316\u65f6\u6355\u83b7\u6784\u9020\u51fd\u6570\u7684\u5b9e\u4f8b\u3001\u5141\u8bb8\u6d4b\u8bd5\u65f6\u914d\u7f6e\u8fd4\u56de\u503c\u3002"]}),"\n",(0,o.jsxs)(n.p,{children:["\u6709\u4e24\u79cd\u65b9\u6cd5\u53ef\u4ee5\u6a21\u62df\u51fd\u6570\uff1a\u8981\u4e48\u5728\u6d4b\u8bd5\u4ee3\u7801\u4e2d\u521b\u5efa\u4e00\u4e2a mock \u51fd\u6570\uff0c\u8981\u4e48\u7f16\u5199\u4e00\u4e2a",(0,o.jsx)(n.a,{href:"/zh-Hans/docs/29.5/manual-mocks",children:(0,o.jsx)(n.code,{children:"\u624b\u52a8 mock"})}),"\u6765\u8986\u76d6\u6a21\u5757\u4f9d\u8d56\u3002"]}),"\n",(0,o.jsx)(n.h2,{id:"\u4f7f\u7528-mock-\u51fd\u6570",children:"\u4f7f\u7528 mock \u51fd\u6570"}),"\n",(0,o.jsxs)(n.p,{children:["\u5047\u8bbe\u6211\u4eec\u8981\u6d4b\u8bd5\u51fd\u6570 ",(0,o.jsx)(n.code,{children:"forEach"})," \u7684\u5185\u90e8\u5b9e\u73b0\uff0c\u8fd9\u4e2a\u51fd\u6570\u4e3a\u4f20\u5165\u7684\u6570\u7ec4\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u8c03\u7528\u4e00\u6b21\u56de\u8c03\u51fd\u6570\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="forEach.js"',children:"export function forEach(items, callback) {\n  for (let index = 0; index < items.length; index++) {\n    callback(items[index]);\n  }\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u4e3a\u4e86\u6d4b\u8bd5\u6b64\u51fd\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a mock \u51fd\u6570\uff0c\u7136\u540e\u68c0\u67e5 mock \u51fd\u6570\u7684\u72b6\u6001\u6765\u786e\u4fdd\u56de\u8c03\u51fd\u6570\u5982\u671f\u8c03\u7528\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="forEach.test.js"',children:"const forEach = require('./forEach');\n\nconst mockCallback = jest.fn(x => 42 + x);\n\ntest('forEach mock function', () => {\n  forEach([0, 1], mockCallback);\n\n  // The mock function was called twice\n  expect(mockCallback.mock.calls).toHaveLength(2);\n\n  // The first argument of the first call to the function was 0\n  expect(mockCallback.mock.calls[0][0]).toBe(0);\n\n  // The first argument of the second call to the function was 1\n  expect(mockCallback.mock.calls[1][0]).toBe(1);\n\n  // The return value of the first call to the function was 42\n  expect(mockCallback.mock.results[0].value).toBe(42);\n});\n"})}),"\n",(0,o.jsxs)(n.h2,{id:"mock-\u5c5e\u6027",children:[(0,o.jsx)(n.code,{children:".mock"})," \u5c5e\u6027"]}),"\n",(0,o.jsxs)(n.p,{children:["\u6240\u6709\u7684 mock \u51fd\u6570\u90fd\u6709\u8fd9\u4e2a\u7279\u6b8a\u7684 ",(0,o.jsx)(n.code,{children:".mock"}),"\u5c5e\u6027\uff0c\u5b83\u4fdd\u5b58\u4e86\u5173\u4e8e\u6b64\u51fd\u6570\u5982\u4f55\u88ab\u8c03\u7528\u3001\u8c03\u7528\u65f6\u7684\u8fd4\u56de\u503c\u7684\u4fe1\u606f\u3002 ",(0,o.jsx)(n.code,{children:".mock"})," \u5c5e\u6027\u8fd8\u8ffd\u8e2a\u6bcf\u6b21\u8c03\u7528\u65f6 ",(0,o.jsx)(n.code,{children:"this"}),"\u7684\u503c\uff0c\u6240\u4ee5\u6211\u4eec\u540c\u6837\u53ef\u4ee5\u4e5f\u68c0\u89c6\uff08inspect\uff09 ",(0,o.jsx)(n.code,{children:"this"}),"\uff1a"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const myMock1 = jest.fn();\nconst a = new myMock1();\nconsole.log(myMock1.mock.instances);\n// > [ <a> ]\n\nconst myMock2 = jest.fn();\nconst b = {};\nconst bound = myMock2.bind(b);\nbound();\nconsole.log(myMock2.mock.contexts);\n// > [ <b> ]\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u8fd9\u4e9b mock \u6210\u5458\u53d8\u91cf\u5728\u6d4b\u8bd5\u4e2d\u975e\u5e38\u6709\u7528\uff0c\u7528\u4e8e\u8bf4\u660e\u8fd9\u4e9b function \u662f\u5982\u4f55\u88ab\u8c03\u7528\u3001\u5b9e\u4f8b\u5316\u6216\u8fd4\u56de\u7684\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"// The function was called exactly once\nexpect(someMockFunction.mock.calls).toHaveLength(1);\n\n// The first arg of the first call to the function was 'first arg'\nexpect(someMockFunction.mock.calls[0][0]).toBe('first arg');\n\n// The second arg of the first call to the function was 'second arg'\nexpect(someMockFunction.mock.calls[0][1]).toBe('second arg');\n\n// The return value of the first call to the function was 'return value'\nexpect(someMockFunction.mock.results[0].value).toBe('return value');\n\n// The function was called with a certain `this` context: the `element` object.\nexpect(someMockFunction.mock.contexts[0]).toBe(element);\n\n// This function was instantiated exactly twice\nexpect(someMockFunction.mock.instances.length).toBe(2);\n\n// The object returned by the first instantiation of this function\n// had a `name` property whose value was set to 'test'\nexpect(someMockFunction.mock.instances[0].name).toBe('test');\n\n// The first argument of the last call to the function was 'test'\nexpect(someMockFunction.mock.lastCall[0]).toBe('test');\n"})}),"\n",(0,o.jsx)(n.h2,{id:"mock-\u7684\u8fd4\u56de\u503c",children:"Mock \u7684\u8fd4\u56de\u503c"}),"\n",(0,o.jsx)(n.p,{children:"Mock \u51fd\u6570\u4e5f\u53ef\u4ee5\u7528\u4e8e\u5728\u6d4b\u8bd5\u671f\u95f4\u5c06\u6d4b\u8bd5\u503c\u6ce8\u5165\u4ee3\u7801\ufe30"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const myMock = jest.fn();\nconsole.log(myMock());\n// > undefined\n\nmyMock.mockReturnValueOnce(10).mockReturnValueOnce('x').mockReturnValue(true);\n\nconsole.log(myMock(), myMock(), myMock(), myMock());\n// > 10, 'x', true, true\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u5728\u51fd\u6570\u8fde\u7eed\u4f20\u9012\u98ce\u683c\uff08functional continuation-passing style\uff09\u7684\u4ee3\u7801\u4e2d\u65f6\uff0cMock \u51fd\u6570\u4e5f\u975e\u5e38\u6709\u6548\u3002 \u4ee5\u8fd9\u79cd\u4ee3\u7801\u98ce\u683c\u6709\u52a9\u4e8e\u907f\u514d\u590d\u6742\u7684\u4e2d\u95f4\u64cd\u4f5c\uff0c\u4fbf\u4e8e\u76f4\u89c2\u8868\u73b0\u7ec4\u4ef6\u7684\u771f\u5b9e\u610f\u56fe\uff0c\u8fd9\u6709\u5229\u4e8e\u5728\u5b83\u4eec\u88ab\u8c03\u7528\u4e4b\u524d\uff0c\u5c06\u503c\u76f4\u63a5\u6ce8\u5165\u5230\u6d4b\u8bd5\u4e2d\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const filterTestFn = jest.fn();\n\n// Make the mock return `true` for the first call,\n// and `false` for the second call\nfilterTestFn.mockReturnValueOnce(true).mockReturnValueOnce(false);\n\nconst result = [11, 12].filter(num => filterTestFn(num));\n\nconsole.log(result);\n// > [11]\nconsole.log(filterTestFn.mock.calls[0][0]); // 11\nconsole.log(filterTestFn.mock.calls[1][0]); // 12\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u5927\u591a\u6570\u73b0\u5b9e\u4e16\u754c\u4f8b\u5b50\u4e2d\uff0c\u5b9e\u9645\u662f\u5728\u4f9d\u8d56\u7684\u7ec4\u4ef6\u4e0a\u914d\u4e00\u4e2a\u6a21\u62df\u51fd\u6570\u5e76\u914d\u7f6e\u5b83\uff0c\u4f46\u624b\u6cd5\u662f\u76f8\u540c\u7684\u3002 \u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\uff0c\u5c3d\u91cf\u907f\u514d\u5728\u975e\u771f\u6b63\u60f3\u8981\u8fdb\u884c\u6d4b\u8bd5\u7684\u4efb\u4f55\u51fd\u6570\u5185\u5b9e\u73b0\u903b\u8f91\u3002"}),"\n",(0,o.jsx)(n.h2,{id:"\u6a21\u62df\u6a21\u5757",children:"\u6a21\u62df\u6a21\u5757"}),"\n",(0,o.jsxs)(n.p,{children:["\u5047\u5b9a\u6709\u4e2a\u4ece API \u83b7\u53d6\u7528\u6237\u7684\u7c7b\u3002 \u8be5\u7c7b\u7528 ",(0,o.jsx)(n.a,{href:"https://github.com/axios/axios",children:"axios"})," \u8c03\u7528 API \u7136\u540e\u8fd4\u56de ",(0,o.jsx)(n.code,{children:"data"}),"\uff0c\u5176\u4e2d\u5305\u542b\u6240\u6709\u7528\u6237\u7684\u5c5e\u6027\uff1a"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="users.js"',children:"import axios from 'axios';\n\nclass Users {\n  static all() {\n    return axios.get('/users.json').then(resp => resp.data);\n  }\n}\n\nexport default Users;\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u73b0\u5728\uff0c\u4e3a\u6d4b\u8bd5\u8be5\u65b9\u6cd5\u800c\u4e0d\u5b9e\u9645\u8c03\u7528 API (\u4f7f\u6d4b\u8bd5\u7f13\u6162\u4e0e\u8106\u5f31)\uff0c\u6211\u4eec\u53ef\u4ee5\u7528 ",(0,o.jsx)(n.code,{children:"jest.mock(...)"})," \u51fd\u6570\u81ea\u52a8\u6a21\u62df axios \u6a21\u5757\u3002"]}),"\n",(0,o.jsxs)(n.p,{children:["\u4e00\u65e6\u6a21\u62df\u6a21\u5757\uff0c\u6211\u4eec\u53ef\u4e3a ",(0,o.jsx)(n.code,{children:".get"})," \u63d0\u4f9b\u4e00\u4e2a ",(0,o.jsx)(n.code,{children:"mockResolvedValue"})," \uff0c\u5b83\u4f1a\u8fd4\u56de\u5047\u6570\u636e\u7528\u4e8e\u6d4b\u8bd5\u3002 \u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u60f3\u8bf4\u7684\u662f\u6211\u4eec\u60f3\u8ba9",(0,o.jsx)(n.code,{children:"axios.get('/users.json')"})," \u6709\u4e2a\u4f2a\u9020\u7684\u54cd\u5e94\u7ed3\u679c\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="users.test.js"',children:"import axios from 'axios';\nimport Users from './users';\n\njest.mock('axios');\n\ntest('should fetch users', () => {\n  const users = [{name: 'Bob'}];\n  const resp = {data: users};\n  axios.get.mockResolvedValue(resp);\n\n  // or you could use the following depending on your use case:\n  // axios.get.mockImplementation(() => Promise.resolve(resp))\n\n  return Users.all().then(data => expect(data).toEqual(users));\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u6a21\u62df-\u90e8\u5206\u6a21\u5757",children:"\u6a21\u62df \u90e8\u5206\u6a21\u5757"}),"\n",(0,o.jsx)(n.p,{children:"\u6a21\u5757\u7684\u5b50\u96c6\u53ef\u4ee5\u88ab\u6a21\u62df\uff0c\u6a21\u5757\u7684\u5176\u4ed6\u90e8\u5206\u53ef\u4ee5\u7ef4\u6301\u5f53\u524d\u5b9e\u73b0\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="foo-bar-baz.js"',children:"export const foo = 'foo';\nexport const bar = () => 'bar';\nexport default () => 'baz';\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"//test.js\nimport defaultExport, {bar, foo} from '../foo-bar-baz';\n\njest.mock('../foo-bar-baz', () => {\n  const originalModule = jest.requireActual('../foo-bar-baz');\n\n  //Mock the default export and named export 'foo'\n  return {\n    __esModule: true,\n    ...originalModule,\n    default: jest.fn(() => 'mocked baz'),\n    foo: 'mocked foo',\n  };\n});\n\ntest('should do a partial mock', () => {\n  const defaultExportResult = defaultExport();\n  expect(defaultExportResult).toBe('mocked baz');\n  expect(defaultExport).toHaveBeenCalled();\n\n  expect(foo).toBe('mocked foo');\n  expect(bar()).toBe('bar');\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"mock-\u5b9e\u73b0",children:"Mock \u5b9e\u73b0"}),"\n",(0,o.jsxs)(n.p,{children:["\u8fd8\u6709\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u7528Mock\u51fd\u6570\u66ff\u6362\u6307\u5b9a\u8fd4\u56de\u503c\u662f\u975e\u5e38\u6709\u7528\u7684\u3002 \u53ef\u4ee5\u7528 ",(0,o.jsx)(n.code,{children:"jest.fn"})," \u6216 ",(0,o.jsx)(n.code,{children:"mockImplementationOnce"}),"\u65b9\u6cd5\u6765\u5b9e\u73b0Mock\u51fd\u6570\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const myMockFn = jest.fn(cb => cb(null, true));\n\nmyMockFn((err, val) => console.log(val));\n// > true\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u5f53\u4f60\u9700\u8981\u6839\u636e\u522b\u7684\u6a21\u5757\u5b9a\u4e49\u9ed8\u8ba4\u7684Mock\u51fd\u6570\u5b9e\u73b0\u65f6\uff0c",(0,o.jsx)(n.code,{children:"mockImplementation"})," \u65b9\u6cd5\u662f\u975e\u5e38\u6709\u7528\u7684\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="foo.js"',children:"module.exports = function () {\n  // some implementation;\n};\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:'title="test.js"',children:"jest.mock('../foo'); // this happens automatically with automocking\nconst foo = require('../foo');\n\n// foo is a mock function\nfoo.mockImplementation(() => 42);\nfoo();\n// > 42\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u5f53\u4f60\u9700\u8981\u6a21\u62df\u67d0\u4e2a\u51fd\u6570\u8c03\u7528\u8fd4\u56de\u4e0d\u540c\u7ed3\u679c\u65f6\uff0c\u8bf7\u4f7f\u7528 ",(0,o.jsx)(n.code,{children:"mockImplementationOnce"})," \u65b9\u6cd5\ufe30"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const myMockFn = jest\n  .fn()\n  .mockImplementationOnce(cb => cb(null, true))\n  .mockImplementationOnce(cb => cb(null, false));\n\nmyMockFn((err, val) => console.log(val));\n// > true\n\nmyMockFn((err, val) => console.log(val));\n// > false\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u5f53 ",(0,o.jsx)(n.code,{children:"mockImplementationOne"}),"\u5b9a\u4e49\u7684\u5b9e\u73b0\u9010\u4e2a\u8c03\u7528\u5b8c\u6bd5\u65f6\uff0c \u5982\u679c\u5b9a\u4e49\u4e86",(0,o.jsx)(n.code,{children:"jest.fn "}),"\uff0c\u5b83\u5c06\u4f7f\u7528 ",(0,o.jsx)(n.code,{children:"jest.fn "}),"\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const myMockFn = jest\n  .fn(() => 'default')\n  .mockImplementationOnce(() => 'first call')\n  .mockImplementationOnce(() => 'second call');\n\nconsole.log(myMockFn(), myMockFn(), myMockFn(), myMockFn());\n// > 'first call', 'second call', 'default', 'default'\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u51fd\u6570\u8c03\u7528\u90fd\u662f\u94fe\u5f0f\u7684\uff0c\u5982\u679c\u4f60\u5e0c\u671b\u521b\u5efa\u7684\u51fd\u6570\u652f\u6301\u94fe\u5f0f\u8c03\u7528\uff08\u56e0\u4e3a\u8fd4\u56de\u4e86this\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528",(0,o.jsx)(n.code,{children:".mockReturnThis()"})," \u51fd\u6570\u6765\u652f\u6301\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const myObj = {\n  myMethod: jest.fn().mockReturnThis(),\n};\n\n// is the same as\n\nconst otherObj = {\n  myMethod: jest.fn(function () {\n    return this;\n  }),\n};\n"})}),"\n",(0,o.jsx)(n.h2,{id:"mock-\u540d\u79f0",children:"Mock \u540d\u79f0"}),"\n",(0,o.jsxs)(n.p,{children:["You can optionally provide a name for your mock functions, which will be displayed instead of ",(0,o.jsx)(n.code,{children:"'jest.fn()'"})," in the test error output. Use ",(0,o.jsx)(n.a,{href:"MockFunctionAPI.md/#mockfnmocknamename",children:(0,o.jsx)(n.code,{children:".mockName()"})})," if you want to be able to quickly identify the mock function reporting an error in your test output."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const myMockFn = jest\n  .fn()\n  .mockReturnValue('default')\n  .mockImplementation(scalar => 42 + scalar)\n  .mockName('add42');\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u81ea\u5b9a\u4e49\u5339\u914d\u5668",children:"\u81ea\u5b9a\u4e49\u5339\u914d\u5668"}),"\n",(0,o.jsx)(n.p,{children:"\u6700\u540e\uff0c\u6d4b\u8bd5Mock\u51fd\u6570\u9700\u8981\u5199\u5927\u91cf\u7684\u65ad\u8a00\uff0c\u4e3a\u4e86\u51cf\u5c11\u4ee3\u7801\u91cf\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e9b\u81ea\u5b9a\u4e49\u5339\u914d\u5668\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"// The mock function was called at least once\nexpect(mockFunc).toHaveBeenCalled();\n\n// The mock function was called at least once with the specified args\nexpect(mockFunc).toHaveBeenCalledWith(arg1, arg2);\n\n// The last call to the mock function was called with the specified args\nexpect(mockFunc).toHaveBeenLastCalledWith(arg1, arg2);\n\n// All calls and the name of the mock is written as a snapshot\nexpect(mockFunc).toMatchSnapshot();\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u8fd9\u4e9b\u5339\u914d\u5668\u662f\u65ad\u8a00Mock\u51fd\u6570\u7684\u8bed\u6cd5\u7cd6\u3002 \u4f60\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u81ea\u884c\u9009\u62e9\u5339\u914d\u5668\u3002"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"// The mock function was called at least once\nexpect(mockFunc.mock.calls.length).toBeGreaterThan(0);\n\n// The mock function was called at least once with the specified args\nexpect(mockFunc.mock.calls).toContainEqual([arg1, arg2]);\n\n// The last call to the mock function was called with the specified args\nexpect(mockFunc.mock.calls[mockFunc.mock.calls.length - 1]).toEqual([\n  arg1,\n  arg2,\n]);\n\n// The first arg of the last call to the mock function was `42`\n// (note that there is no sugar helper for this specific of an assertion)\nexpect(mockFunc.mock.calls[mockFunc.mock.calls.length - 1][0]).toBe(42);\n\n// A snapshot will check that a mock was invoked the same number of times,\n// in the same order, with the same arguments. \u5b83\u8fd8\u4f1a\u5728\u540d\u79f0\u4e0a\u65ad\u8a00\u3002 \u5b83\u8fd8\u4f1a\u5728\u540d\u79f0\u4e0a\u65ad\u8a00\u3002\nexpect(mockFunc.mock.calls).toEqual([[arg1, arg2]]);\nexpect(mockFunc.getMockName()).toBe('a mock name');\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u5339\u914d\u5668\u7684\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u67e5\u9605 ",(0,o.jsx)(n.a,{href:"/zh-Hans/docs/29.5/expect",children:" \u53c2\u8003\u6587\u6863"}),"\u3002"]})]})}const m=function(e={}){const{wrapper:n}=Object.assign({},(0,t.ah)(),e.components);return n?(0,o.jsx)(n,Object.assign({},e,{children:(0,o.jsx)(d,e)})):d(e)}},1670:(e,n,c)=>{c.d(n,{Zo:()=>l,ah:()=>s});var o=c(7378);const t=o.createContext({});function s(e){const n=o.useContext(t);return o.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const a={};function l({components:e,children:n,disableParentContext:c}){let l;return l=c?"function"==typeof e?e({}):e||a:s(e),o.createElement(t.Provider,{value:l},n)}}}]);