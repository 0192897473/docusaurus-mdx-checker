"use strict";(self.webpackChunkjest_website=self.webpackChunkjest_website||[]).push([[4871],{2599:(e,n,t)=>{t.d(n,{Z:()=>o});t(7378);var s=t(7140);const r={tabItem:"tabItem_wHwb"};var a=t(4246);function o(e){let{children:n,hidden:t,className:o}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,s.Z)(r.tabItem,o),hidden:t,children:n})}},8447:(e,n,t)=>{t.d(n,{Z:()=>k});var s=t(7378),r=t(7140),a=t(9169),o=t(3620),l=t(9749),i=t(8981),c=t(56),u=t(8796);function d(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,s.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:t,attributes:s,default:r}}=e;return{value:n,label:t,attributes:s,default:r}}))}(t);return function(e){const n=(0,c.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function h(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:t}=e;const r=(0,o.k6)(),a=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,i._X)(a),(0,s.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(r.location.search);n.set(a,e),r.replace({...r.location,search:n.toString()})}),[a,r])]}function b(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,a=p(e),[o,i]=(0,s.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const s=t.find((e=>e.default))??t[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:a}))),[c,d]=m({queryString:t,groupId:r}),[b,x]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,a]=(0,u.Nk)(t);return[r,(0,s.useCallback)((e=>{t&&a.set(e)}),[t,a])]}({groupId:r}),v=(()=>{const e=c??b;return h({value:e,tabValues:a})?e:null})();(0,l.Z)((()=>{v&&i(v)}),[v]);return{selectedValue:o,selectValue:(0,s.useCallback)((e=>{if(!h({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);i(e),d(e),x(e)}),[d,x,a]),tabValues:a}}var x=t(362);const v={tabList:"tabList_J5MA",tabItem:"tabItem_l0OV"};var j=t(4246);function f(e){let{className:n,block:t,selectedValue:s,selectValue:o,tabValues:l}=e;const i=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.o5)(),u=e=>{const n=e.currentTarget,t=i.indexOf(n),r=l[t].value;r!==s&&(c(n),o(r))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const t=i.indexOf(e.currentTarget)+1;n=i[t]??i[0];break}case"ArrowLeft":{const t=i.indexOf(e.currentTarget)-1;n=i[t]??i[i.length-1];break}}n?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":t},n),children:l.map((e=>{let{value:n,label:t,attributes:a}=e;return(0,j.jsx)("li",{role:"tab",tabIndex:s===n?0:-1,"aria-selected":s===n,ref:e=>i.push(e),onKeyDown:d,onClick:u,...a,className:(0,r.Z)("tabs__item",v.tabItem,a?.className,{"tabs__item--active":s===n}),children:t??n},n)}))})}function g(e){let{lazy:n,children:t,selectedValue:r}=e;const a=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=a.find((e=>e.props.value===r));return e?(0,s.cloneElement)(e,{className:"margin-top--md"}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:a.map(((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==r})))})}function y(e){const n=b(e);return(0,j.jsxs)("div",{className:(0,r.Z)("tabs-container",v.tabList),children:[(0,j.jsx)(f,{...e,...n}),(0,j.jsx)(g,{...e,...n})]})}function k(e){const n=(0,x.Z)();return(0,j.jsx)(y,{...e,children:d(e.children)},String(n))}},5719:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>c,toc:()=>d});var s=t(4246),r=t(1670),a=t(8447),o=t(2599);const l={id:"tutorial-react",title:"Tester des Applications React"},i=void 0,c={unversionedId:"tutorial-react",id:"version-29.4/tutorial-react",title:"Tester des Applications React",description:"Chez Facebook, nous utilisons Jest pour tester les applications React.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-29.4/TutorialReact.md",sourceDirName:".",slug:"/tutorial-react",permalink:"/fr/docs/29.4/tutorial-react",draft:!1,unlisted:!1,editUrl:"https://crowdin.com/project/jest-v2/fr",tags:[],version:"29.4",frontMatter:{id:"tutorial-react",title:"Tester des Applications React"},sidebar:"docs",previous:{title:"Architecture",permalink:"/fr/docs/29.4/architecture"},next:{title:"Tester des Applications React Native",permalink:"/fr/docs/29.4/tutorial-react-native"}},u={},d=[{value:"Configuration",id:"configuration",level:2},{value:"Configuration avec Create React App",id:"configuration-avec-create-react-app",level:3},{value:"Configuration sans Create React App",id:"configuration-sans-create-react-app",level:3},{value:"Test Snapshot",id:"test-snapshot",level:3},{value:"Tests de snapshots avec des simulations, Enzyme et React 16+",id:"tests-de-snapshots-avec-des-simulations-enzyme-et-react-16",level:4},{value:"Test du DOM",id:"test-du-dom",level:3},{value:"react-testing-library",id:"react-testing-library",level:4},{value:"Enzyme",id:"enzyme",level:4},{value:"Transformateurs personnalis\xe9s",id:"transformateurs-personnalis\xe9s",level:3}];function p(e){const n=Object.assign({p:"p",a:"a",h2:"h2",h3:"h3",code:"code",pre:"pre",strong:"strong",admonition:"admonition",h4:"h4",ol:"ol",li:"li"},(0,r.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Chez Facebook, nous utilisons Jest pour tester les applications ",(0,s.jsx)(n.a,{href:"https://reactjs.org/",children:"React"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsx)(n.h3,{id:"configuration-avec-create-react-app",children:"Configuration avec Create React App"}),"\n",(0,s.jsxs)(n.p,{children:["Si vous d\xe9butez avec React, nous vous recommandons d'utiliser ",(0,s.jsx)(n.a,{href:"https://create-react-app.dev/",children:"Create React App"}),". Il est pr\xeat \xe0 \xeatre utilis\xe9 et ",(0,s.jsx)(n.a,{href:"https://create-react-app.dev/docs/running-tests/#docsNav",children:"est livr\xe9 avec Jest"}),"\xa0! Vous n'aurez besoin d'ajouter que ",(0,s.jsx)(n.code,{children:"react-test-renderer"})," pour le rendu des snapshots."]}),"\n",(0,s.jsx)(n.p,{children:"Ex\xe9cuter"}),"\n",(0,s.jsxs)(a.Z,{groupId:"npm2yarn",children:[(0,s.jsx)(o.Z,{value:"npm",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install --save-dev react-test-renderer\n"})})}),(0,s.jsx)(o.Z,{value:"yarn",label:"Yarn",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"yarn add --dev react-test-renderer\n"})})}),(0,s.jsx)(o.Z,{value:"pnpm",label:"pnpm",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pnpm add --save-dev react-test-renderer\n"})})})]}),"\n",(0,s.jsx)(n.h3,{id:"configuration-sans-create-react-app",children:"Configuration sans Create React App"}),"\n",(0,s.jsxs)(n.p,{children:["Si vous avez d\xe9j\xe0 une application, vous aurez besoin d'installer quelques paquets pour faire tout fonctionner. Nous utilisons le paquet ",(0,s.jsx)(n.code,{children:"babel-jest"})," et le pr\xe9set babel ",(0,s.jsx)(n.code,{children:"react"})," pour transformer notre code \xe0 l\u2019int\xe9rieur de l\u2019environnement de test. Voir aussi ",(0,s.jsx)(n.a,{href:"/fr/docs/29.4/getting-started#using-babel",children:" l'utilisation de babel"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Ex\xe9cuter"}),"\n",(0,s.jsxs)(a.Z,{groupId:"npm2yarn",children:[(0,s.jsx)(o.Z,{value:"npm",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install --save-dev jest babel-jest @babel/preset-env @babel/preset-react react-test-renderer\n"})})}),(0,s.jsx)(o.Z,{value:"yarn",label:"Yarn",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"yarn add --dev jest babel-jest @babel/preset-env @babel/preset-react react-test-renderer\n"})})}),(0,s.jsx)(o.Z,{value:"pnpm",label:"pnpm",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pnpm add --save-dev jest babel-jest @babel/preset-env @babel/preset-react react-test-renderer\n"})})})]}),"\n",(0,s.jsxs)(n.p,{children:["Votre ",(0,s.jsx)(n.code,{children:"package.json"})," devrait ressembler \xe0 ceci (o\xf9 ",(0,s.jsx)(n.code,{children:"<current-version>"})," est la version la plus r\xe9cente du paquet). Ajoutez les scripts et la configuration Jest au fichier:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "dependencies": {\n    "react": "<current-version>",\n    "react-dom": "<current-version>"\n  },\n  "devDependencies": {\n    "@babel/preset-env": "<current-version>",\n    "@babel/preset-react": "<current-version>",\n    "babel-jest": "<current-version>",\n    "jest": "<current-version>",\n    "react-test-renderer": "<current-version>"\n  },\n  "scripts": {\n    "test": "jest"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:'title="babel.config.js"',children:"module.exports = {\n  presets: [\n    '@babel/preset-env',\n    ['@babel/preset-react', {runtime: 'automatic'}],\n  ],\n};\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Et vous voil\xe0 pr\xeat \xe0 partir\xa0!"})}),"\n",(0,s.jsx)(n.h3,{id:"test-snapshot",children:"Test Snapshot"}),"\n",(0,s.jsxs)(n.p,{children:["Nous allons cr\xe9er un ",(0,s.jsx)(n.a,{href:"/fr/docs/29.4/snapshot-testing",children:" snapshot"})," pour un composant lien qui afficher des liens hypertexte:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",metastring:'title="Link.js"',children:"import {useState} from 'react';\n\nconst STATUS = {\n  HOVERED: 'hovered',\n  NORMAL: 'normal',\n};\n\nexport default function Link({page, children}) {\n  const [status, setStatus] = useState(STATUS.NORMAL);\n\n  const onMouseEnter = () => {\n    setStatus(STATUS.HOVERED);\n  };\n\n  const onMouseLeave = () => {\n    setStatus(STATUS.NORMAL);\n  };\n\n  return (\n    <a\n      className={status}\n      href={page || '#'}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n    >\n      {children}\n    </a>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.admonition,{title:"remarque",type:"note",children:(0,s.jsxs)(n.p,{children:["Examples are using Function components, but Class components can be tested in the same way. Consultez ",(0,s.jsx)(n.a,{href:"https://reactjs.org/docs/components-and-props.html#function-and-class-components",children:"React\xa0: Fonctions composants et composants \xe0 base de classes"}),". ",(0,s.jsx)(n.strong,{children:"Rappellez-vous"})," qu'avec les composants \xe0 base de classe, nous attendons que Jest soit utilis\xe9 pour tester des props et non pas des m\xe9thodes directement."]})}),"\n",(0,s.jsx)(n.p,{children:"Utilisons maintenant le moteur de rendu de React and la fonctionnalit\xe9 de snapshot de Jest pour capturer le rendu du composant dans un fichier:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",metastring:'title="Link.test.js"',children:"import renderer from 'react-test-renderer';\nimport Link from '../Link';\n\nit('change la classe lorsqu\\'on le survole', () => {\n  const component = renderer.create(\n    <Link page=\"http://www.facebook.com\">Facebook</Link>,\n  );\n  let tree = component.toJSON();\n  expect(tree).toMatchSnapshot();\n\n  // d\xe9clenche manuellement le callback\n  renderer.act(() => {\n    tree.props.onMouseEnter();\n  });\n  // re-rendu\n  tree = component.toJSON();\n  expect(tree).toMatchSnapshot();\n\n  // d\xe9clenche manuellement le callback\n  renderer.act(() => {\n    tree.props.onMouseLeave();\n  });\n  // re-rendu\n  tree = component.toJSON();\n  expect(tree).toMatchSnapshot();\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Lorsque vous ex\xe9cutez ",(0,s.jsx)(n.code,{children:"yarn test"})," ou ",(0,s.jsx)(n.code,{children:"jest"}),", cela produira un fichier de sortie comme ceci\xa0:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",metastring:'title="__tests__/__snapshots__/Link.test.js.snap"',children:'exports[`change la classe lorsqu\'on le survole 1`] = `\n<a\n  className="normal"\n  href="http://www.facebook.com"\n  onMouseEnter={[Function]}\n  onMouseLeave={[Function]}\n>\n  Facebook\n</a>\n`;\n\nexports[`change la classe lorsqu\'on le survole 2`] = `\n<a\n  className="hovered"\n  href="http://www.facebook.com"\n  onMouseEnter={[Function]}\n  onMouseLeave={[Function]}\n>\n  Facebook\n</a>\n`;\n\nexports[`change la classe lorsqu\'on le survole 3`] = `\n<a\n  className="normal"\n  href="http://www.facebook.com"\n  onMouseEnter={[Function]}\n  onMouseLeave={[Function]}\n>\n  Facebook\n</a>\n`;\n'})}),"\n",(0,s.jsxs)(n.p,{children:["La prochaine fois que vous ex\xe9cuterez les tests, la sortie rendue sera compar\xe9e au snapshot pr\xe9c\xe9demment cr\xe9\xe9. Le snapshot doit \xeatre committ\xe9 avec les changements de code. Lorsqu'un test de snapshot \xe9choue, vous devez v\xe9rifier s'il s'agit d'un changement intentionnel ou non intentionnel. Si le changement est attendu, vous pouvez appeler Jest avec ",(0,s.jsx)(n.code,{children:"jest -u"})," pour \xe9craser le snapshot existant."]}),"\n",(0,s.jsxs)(n.p,{children:["The code for this example is available at ",(0,s.jsx)(n.a,{href:"https://github.com/jestjs/jest/tree/main/examples/snapshot",children:"examples/snapshot"}),"."]}),"\n",(0,s.jsx)(n.h4,{id:"tests-de-snapshots-avec-des-simulations-enzyme-et-react-16",children:"Tests de snapshots avec des simulations, Enzyme et React 16+"}),"\n",(0,s.jsx)(n.p,{children:"Il y a une mise en garde autour des tests de snapshot lorsque vous utilisez Enzyme et React 16+. Si vous simulez un module en utilisant le style suivant\xa0:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"jest.mock('../SomeDirectory/SomeComponent', () => 'SomeComponent');\n"})}),"\n",(0,s.jsx)(n.p,{children:"Ensuite, vous verrez des avertissements dans la console\xa0:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"Warning: <SomeComponent /> is using uppercase HTML. Always use lowercase HTML tags in React.\n\n# Ou\xa0:\nWarning: The tag <SomeComponent> is unrecognized in this browser. Si vous vouliez rendre un composant React, commencez son nom avec une lettre majuscule.\n"})}),"\n",(0,s.jsx)(n.p,{children:"React 16 d\xe9clenche ces avertissements en raison de la fa\xe7on dont il v\xe9rifie les types d'\xe9l\xe9ments, et le module simul\xe9 \xe9choue \xe0 ces v\xe9rifications. Vos options sont\xa0:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Rendre en tant que texte. De cette fa\xe7on, vous ne verrez pas les propri\xe9t\xe9s pass\xe9es au composant simul\xe9 dans l'instantan\xe9, mais c'est simple\xa0:","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"jest.mock('./SomeComponent', () => () => 'SomeComponent');\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Rendre en tant qu'\xe9l\xe9ment personnalis\xe9. Les \xab\xa0\xe9l\xe9ments personnalis\xe9s\xa0\xbb du DOM ne sont pas v\xe9rifi\xe9s et ne devraient pas d\xe9clencher d'avertissements. Ils sont en minuscule et ont un tiret dans le nom.","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"jest.mock('./Widget', () => () => <mock-widget />);\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Utiliser ",(0,s.jsx)(n.code,{children:"react-test-renderer"}),". Le moteur de rendu de test ne se soucie pas des types d'\xe9l\xe9ment et acceptera volontiers par exemple ",(0,s.jsx)(n.code,{children:"SomeComponent"}),". Vous pouvez v\xe9rifier les instantan\xe9s en utilisant le moteur de rendu de test et v\xe9rifier le comportement des composants s\xe9par\xe9ment en utilisant Enzyme."]}),"\n",(0,s.jsxs)(n.li,{children:["D\xe9sactiver les avertissements dans leur ensemble (devrait \xeatre fait dans votre fichier de configuration de jest)\xa0:","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"jest.mock('fbjs/lib/warning', () => require('fbjs/lib/emptyFunction'));\n"})}),"\n","Cela ne devrait normalement pas \xeatre votre choix car des avertissements utiles pourraient \xeatre perdus. Cependant, dans certains cas, par exemple lorsque nous testons les composants de react-natif, nous rendons les balises react-native dans le DOM et de nombreux avertissements ne sont pas pertinents. Une autre option est de swizzler la console.warn et supprimer les avertissements sp\xe9cifiques."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"test-du-dom",children:"Test du DOM"}),"\n",(0,s.jsxs)(n.p,{children:["If you'd like to assert, and manipulate your rendered components you can use ",(0,s.jsx)(n.a,{href:"https://github.com/testing-library/react-testing-library",children:"react-testing-library"}),", ",(0,s.jsx)(n.a,{href:"https://enzymejs.github.io/enzyme/",children:"Enzyme"}),", or React's ",(0,s.jsx)(n.a,{href:"https://reactjs.org/docs/test-utils.html",children:"TestUtils"}),". Les deux exemples suivants utilisent react-testing-library et Enzyme."]}),"\n",(0,s.jsx)(n.h4,{id:"react-testing-library",children:"react-testing-library"}),"\n",(0,s.jsxs)(a.Z,{groupId:"npm2yarn",children:[(0,s.jsx)(o.Z,{value:"npm",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install --save-dev @testing-library/react\n"})})}),(0,s.jsx)(o.Z,{value:"yarn",label:"Yarn",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"yarn add --dev @testing-library/react\n"})})}),(0,s.jsx)(o.Z,{value:"pnpm",label:"pnpm",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pnpm add --save-dev @testing-library/react\n"})})})]}),"\n",(0,s.jsx)(n.p,{children:"Impl\xe9mentons une case \xe0 cocher qui permute entre deux libell\xe9s\xa0:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",metastring:'title="CheckboxWithLabel.js"',children:"import {useState} from 'react';\n\nexport default function CheckboxWithLabel({labelOn, labelOff}) {\n  const [isChecked, setIsChecked] = useState(false);\n\n  const onChange = () => {\n    setIsChecked(!isChecked);\n  };\n\n  return (\n    <label>\n      <input type=\"checkbox\" checked={isChecked} onChange={onChange} />\n      {isChecked ? labelOn : labelOff}\n    </label>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",metastring:'title="__tests__/CheckboxWithLabel-test.js"',children:"import {cleanup, fireEvent, render} from '@testing-library/react';\nimport CheckboxWithLabel from '../CheckboxWithLabel';\n\n// Remarque : l'ex\xe9cution du nettoyage afterEach se fait automatiquement pour vous dans @testing-library/react@9.0.0 ou une version sup\xe9rieure.\n// D\xe9monte et nettoie le DOM apr\xe8s que le test soit termin\xe9.\nafterEach(cleanup);\n\nit('CheckboxWithLabel change le texte apr\xe8s click', () => {\n  const {queryByLabelText, getByLabelText} = render(\n    <CheckboxWithLabel labelOn=\"On\" labelOff=\"Off\" />,\n  );\n\n  expect(queryByLabelText(/off/i)).toBeTruthy();\n\n  fireEvent.click(getByLabelText(/off/i));\n\n  expect(queryByLabelText(/on/i)).toBeTruthy();\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The code for this example is available at ",(0,s.jsx)(n.a,{href:"https://github.com/jestjs/jest/tree/main/examples/react-testing-library",children:"examples/react-testing-library"}),"."]}),"\n",(0,s.jsx)(n.h4,{id:"enzyme",children:"Enzyme"}),"\n",(0,s.jsxs)(a.Z,{groupId:"npm2yarn",children:[(0,s.jsx)(o.Z,{value:"npm",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install --save-dev enzyme\n"})})}),(0,s.jsx)(o.Z,{value:"yarn",label:"Yarn",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"yarn add --dev enzyme\n"})})}),(0,s.jsx)(o.Z,{value:"pnpm",label:"pnpm",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pnpm add --save-dev enzyme\n"})})})]}),"\n",(0,s.jsxs)(n.p,{children:["Si vous utilisez une version de React inf\xe9rieure \xe0 15.5.0, vous devrez \xe9galement installer ",(0,s.jsx)(n.code,{children:"react-addons-test-utills"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["R\xe9\xe9crivons le test ci-dessus en utilisant Enzyme au lieu de react-testing-library. Nous utilisons le ",(0,s.jsx)(n.a,{href:"https://enzymejs.github.io/enzyme/docs/api/shallow.html",children:"moteur de rendu shallow"})," d'Enzyme dans cet exemple."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",metastring:'title="__tests__/CheckboxWithLabel-test.js"',children:"import Enzyme, {shallow} from 'enzyme';\nimport Adapter from 'enzyme-adapter-react-16';\nimport CheckboxWithLabel from '../CheckboxWithLabel';\n\nEnzyme.configure({adapter: new Adapter()});\n\nit('CheckboxWithLabel changes the text after click', () => {\n  // Render a checkbox with label in the document\n  const checkbox = shallow(<CheckboxWithLabel labelOn=\"On\" labelOff=\"Off\" />);\n\n  expect(checkbox.text()).toBe('Off');\n\n  checkbox.find('input').simulate('change');\n\n  expect(checkbox.text()).toBe('On');\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"transformateurs-personnalis\xe9s",children:"Transformateurs personnalis\xe9s"}),"\n",(0,s.jsxs)(n.p,{children:["Si vous avez besoin de fonctionnalit\xe9s plus avanc\xe9es, vous pouvez \xe9galement construire votre propre transformateur. Au lieu d'utiliser ",(0,s.jsx)(n.code,{children:"babel-jest"}),", voici un exemple d'utilisation de ",(0,s.jsx)(n.code,{children:"@babel/core"}),"\xa0:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",metastring:'title="custom-transformer.js"',children:"'use strict';\n\nconst {transform} = require('@babel/core');\nconst jestPreset = require('babel-preset-jest');\n\nmodule.exports = {\n  process(src, filename) {\n    const result = transform(src, {\n      filename,\n      presets: [jestPreset],\n    });\n\n    return result || src;\n  },\n};\n"})}),"\n",(0,s.jsxs)(n.p,{children:["N'oubliez pas d'installer les paquets ",(0,s.jsx)(n.code,{children:"@babel/core"})," et ",(0,s.jsx)(n.code,{children:"babel-preset-jest"})," pour que cet exemple fonctionne."]}),"\n",(0,s.jsxs)(n.p,{children:["Pour que cela fonctionne avec Jest, vous devez mettre \xe0 jour votre configuration Jest avec ceci\xa0: ",(0,s.jsx)(n.code,{children:'"transform": {"\\\\.js$": "path/to/custom-transformer.js"}'}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Si vous souhaitez construire un transformateur avec le support de babel, vous pouvez \xe9galement utiliser ",(0,s.jsx)(n.code,{children:"babel-jest"})," pour en composer un et y passer vos options de configuration personnalis\xe9es\xa0:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const babelJest = require('babel-jest');\n\nmodule.exports = babelJest.createTransformer({\n  presets: ['my-custom-preset'],\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Consultez ",(0,s.jsx)(n.a,{href:"/fr/docs/29.4/code-transformation#writing-custom-transformers",children:"la documentation d\xe9di\xe9e"})," pour plus de d\xe9tails."]})]})}const h=function(e={}){const{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,s.jsx)(n,Object.assign({},e,{children:(0,s.jsx)(p,e)})):p(e)}},1670:(e,n,t)=>{t.d(n,{Zo:()=>l,ah:()=>a});var s=t(7378);const r=s.createContext({});function a(e){const n=s.useContext(r);return s.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const o={};function l({components:e,children:n,disableParentContext:t}){let l;return l=t?"function"==typeof e?e({}):e||o:a(e),s.createElement(r.Provider,{value:l},n)}}}]);