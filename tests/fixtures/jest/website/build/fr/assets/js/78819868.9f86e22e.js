"use strict";(self.webpackChunkjest_website=self.webpackChunkjest_website||[]).push([[7673],{1078:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var s=t(4246),i=t(1670);const o={title:"Jest 11.0",author:"Christoph Nakazawa",authorURL:"http://twitter.com/cpojer",authorFBID:0x5af311d9a1c8},r=void 0,a={permalink:"/fr/blog/2016/04/12/jest-11",editUrl:"https://github.com/jestjs/jest/tree/main/website/blog/2016-04-12-jest-11.md",source:"@site/i18n/fr/docusaurus-plugin-content-blog/2016-04-12-jest-11.md",title:"Jest 11.0",description:"Aujourd'hui, nous annon\xe7ons un passage \xe0 la version majeure de Jest avec Jest 11.0 comme premi\xe8re version majeure. Jest a \xe9t\xe9 utilis\xe9 par les ing\xe9nieurs de Facebook et sur nos syst\xe8mes d\u2019int\xe9gration continue depuis des ann\xe9es et nous pensons que Jest a \xe9t\xe9 bien plus qu\u2019un \u201c1. \xbb pour une longue p\xe9riode. Ceci est similaire \xe0 un changement l'\xe9quipe React a fait.",date:"2016-04-12T00:00:00.000Z",formattedDate:"12 avril 2016",tags:[],readingTime:4.595,hasTruncateMarker:!0,authors:[{name:"Christoph Nakazawa",url:"http://twitter.com/cpojer"}],frontMatter:{title:"Jest 11.0",author:"Christoph Nakazawa",authorURL:"http://twitter.com/cpojer",authorFBID:0x5af311d9a1c8},unlisted:!1,prevItem:{title:"Jest 13.0: Flow & REPL",permalink:"/fr/blog/2016/06/22/jest-13"},nextItem:{title:"Performance des tests unitaires JavaScript",permalink:"/fr/blog/2016/03/11/javascript-unit-testing-performance"}},u={authorsImageUrls:[void 0]},c=[{value:"New in Jest 11.0",id:"new-in-jest-110",level:3},{value:"Int\xe9gration de Babel et configuration simplifi\xe9e",id:"int\xe9gration-de-babel-et-configuration-simplifi\xe9e",level:4},{value:"(Auto)Mocking Am\xe9liorations",id:"automocking-am\xe9liorations",level:4},{value:"Performance",id:"performance",level:4},{value:"Am\xe9liorations du Jasmine et du Test Assertion",id:"am\xe9liorations-du-jasmine-et-du-test-assertion",level:4},{value:"Autres modifications",id:"autres-modifications",level:4},{value:"Contributions et avenir de Jest",id:"contributions-et-avenir-de-jest",level:3}];function l(e){const n=Object.assign({p:"p",a:"a",h3:"h3",h4:"h4",code:"code",pre:"pre"},(0,i.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Aujourd'hui, nous annon\xe7ons un passage \xe0 la version majeure de Jest avec Jest 11.0 comme premi\xe8re version majeure. Jest a \xe9t\xe9 utilis\xe9 par les ing\xe9nieurs de Facebook et sur nos syst\xe8mes d\u2019int\xe9gration continue depuis des ann\xe9es et nous pensons que Jest a \xe9t\xe9 bien plus qu\u2019un \u201c1. \xbb pour une longue p\xe9riode. Ceci est similaire \xe0 un changement ",(0,s.jsx)(n.a,{href:"http://facebook.github.io/react/blog/2016/02/19/new-versioning-scheme.html",children:"l'\xe9quipe React a fait"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Si vous utilisez Jest 0.9 ou Jest 0.10, la mise \xe0 jour devrait \xeatre transparente. Tous les changements de ces derniers mois ont \xe9t\xe9 introduits dans Jest 11.0."}),"\n",(0,s.jsx)(n.h3,{id:"new-in-jest-110",children:"New in Jest 11.0"}),"\n",(0,s.jsx)(n.h4,{id:"int\xe9gration-de-babel-et-configuration-simplifi\xe9e",children:"Int\xe9gration de Babel et configuration simplifi\xe9e"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"babel-jest"})," was adopted within the newly modularized Jest ",(0,s.jsx)(n.a,{href:"https://github.com/jestjs/jest/tree/main/packages",children:"repository"})," and it is now seamlessly integrated into Jest. Si vous effectuez une mise \xe0 jour depuis une ancienne version de Jest ou si vous souhaitez adopter Jest, Nous vous recommandons de lire le ",(0,s.jsx)(n.a,{href:"/docs/getting-started",children:"guide pour commencer"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Jest a pr\xe9c\xe9demment fourni des API telles que ",(0,s.jsx)(n.code,{children:"jest.dontMock"})," qui d\xe9moque un module qui est par la suite requis en utilisant la fonction ",(0,s.jsx)(n.code,{children:"require"}),". Les tests de code ressemblaient g\xe9n\xe9ralement \xe0 ceci :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"jest.dontMock('LikeButton');\nconst LikeButton = require('LikeButton'); // LikeButton est d\xe9mocked\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Cependant, avec les d\xe9clarations d'importation ES2015, cela ne fonctionnera plus. Par la sp\xe9cification ",(0,s.jsx)(n.code,{children:"import"}),"s sont hiss\xe9s en haut de leur bloc de code. Code \xe9crit comme ceci :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"jest.dontMock('LikeButton');\nimportez le LikeButton depuis 'LikeButton';\n"})}),"\n",(0,s.jsx)(n.p,{children:"lorsqu'il est ex\xe9cut\xe9, serait en fait ex\xe9cut\xe9 dans cet ordre:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"import LikeButton depuis 'LikeButton'; // Cela se produit avant l'appel de dontMock.\njest.dontMock('LikeButton');\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Le module LikeButton serait donc bouch\xe9, m\xeame si nous appelons explicitement ",(0,s.jsx)(n.code,{children:"dontMock"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Quand les derni\xe8res versions de Jest et babel-jest sont utilis\xe9es ensemble, appelle aux nouvelles APIs ",(0,s.jsx)(n.code,{children:"jest. nmock"}),", ",(0,s.jsx)(n.code,{children:"jest.mock"}),", ",(0,s.jsx)(n.code,{children:"jest. isableAutomock"})," et ",(0,s.jsx)(n.code,{children:"jest.enableAutomock"})," sont hiss\xe9s en haut de leur bloc, avant les instructions d'importation ES2015."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"jest.dontMock('LikeButton');\nconst LikeButton = require('LikeButton'); // LikeButton est d\xe9mocked!\n"})}),"\n",(0,s.jsx)(n.h4,{id:"automocking-am\xe9liorations",children:"(Auto)Mocking Am\xe9liorations"}),"\n",(0,s.jsxs)(n.p,{children:["Nous avons apport\xe9 de nombreuses am\xe9liorations et corrections de bugs \xe0 la fonctionnalit\xe9 d'automocking de Jest, am\xe9lior\xe9 le support de npm3 et ajout\xe9 de nouvelles API manuelles. De nombreuses personnes ont exprim\xe9 un d\xe9sir d'utiliser Jest avec la fonction d'automatisation d\xe9sactiv\xe9e. Une option de configuration globale ",(0,s.jsx)(n.a,{href:"/docs/api#automock-boolean",children:(0,s.jsx)(n.code,{children:"automock"})}),", qui peut \xeatre d\xe9finie \xe0 ",(0,s.jsx)(n.code,{children:"false"}),", a \xe9t\xe9 ajout\xe9e."]}),"\n",(0,s.jsxs)(n.p,{children:["Nous avons \xe9galement ajout\xe9 deux nouvelles API pour simplifier les bouchons manuels. ",(0,s.jsx)(n.code,{children:"jest.mock"})," sp\xe9cifie une usine manuelle de bouchon pour un test sp\xe9cifique :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// Impl\xe9mente un bouchon pour un module hypoth\xe9tique \"sum\".\njest.mock('sum', () => {\n  return (a, b) => a + b;\n});\n\nconst sum = require('sum');\nsum(1, 4); // 5\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Et ",(0,s.jsx)(n.code,{children:"jest.fn"})," a \xe9t\xe9 ajout\xe9 pour faciliter la cr\xe9ation de fonctions de bouchon :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// Create a mock function\nconst mockFn = jest.fn(() => 42);\nmockFn(); // 42\nexpect(mockFn.calls.length).toBe(1);\n"})}),"\n",(0,s.jsx)(n.h4,{id:"performance",children:"Performance"}),"\n",(0,s.jsxs)(n.p,{children:["Nous avons r\xe9cemment \xe9crit sur quelques ",(0,s.jsx)(n.a,{href:"/blog/2016/03/11/javascript-unit-testing-performance",children:"am\xe9liorations de performance"})," que nous avons faites \xe0 Jest. Plus particuli\xe8rement, le temps de d\xe9marrage a \xe9t\xe9 am\xe9lior\xe9 et nous sommes maintenant dans un endroit confortable en ce qui concerne les performances."]}),"\n",(0,s.jsx)(n.h4,{id:"am\xe9liorations-du-jasmine-et-du-test-assertion",children:"Am\xe9liorations du Jasmine et du Test Assertion"}),"\n",(0,s.jsxs)(n.p,{children:["Quand Jest a \xe9t\xe9 open source, il a \xe9t\xe9 exp\xe9di\xe9 avec Jasmine 1. Jest was designed to work with any test assertion library and optional Jasmine 2 support was added through an ",(0,s.jsx)(n.a,{href:"https://github.com/jestjs/jest/pull/330",children:"external contribution"})," at the end of last year. Ce changement apporte de meilleures performances et fournit de meilleures APIs par rapport \xe0 la version pr\xe9c\xe9dente de Jasmine. Ainsi, nous avons converti tous nos tests JavaScript sur Facebook en Jasmine 2. Avec Jest 11, nous faisons de Jasmine 2 la nouvelle valeur par d\xe9faut. Jasmine 1 peut \xeatre activ\xe9 via l'option de configuration ",(0,s.jsx)(n.a,{href:"/docs/api#testrunner-string",children:(0,s.jsx)(n.code,{children:"testRunner"})}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Nous avons \xe9galement fait de nombreuses mises \xe0 jour autour de Jasmine. Les messages d'\xe9chec pour les correspondants personnalis\xe9s fournis pour les fonctions de bouchon de Jest ont \xe9t\xe9 am\xe9lior\xe9s et fonctionneront maintenant aussi pour les espions Jasmine. Les tests ignor\xe9s, lorsque vous utilisez ",(0,s.jsx)(n.code,{children:"fit"})," ou ",(0,s.jsx)(n.code,{children:"fdescribe,"})," sont maintenant correctement signal\xe9s \xe0 la fin d'une ex\xe9cution de test."]}),"\n",(0,s.jsx)(n.h4,{id:"autres-modifications",children:"Autres modifications"}),"\n",(0,s.jsxs)(n.p,{children:["La commande ",(0,s.jsx)(n.code,{children:"jest --watch"})," a \xe9t\xe9 r\xe9\xe9crite et am\xe9lior\xe9e. Par d\xe9faut, il ex\xe9cute maintenant uniquement les tests li\xe9s aux fichiers modifi\xe9s. Si vous voulez ex\xe9cuter tous les tests \xe0 chaque modification, vous pouvez ex\xe9cuter ",(0,s.jsx)(n.code,{children:"jest --watch=all"}),". La sortie du journal d\xe9taill\xe9 a \xe9galement \xe9t\xe9 am\xe9lior\xe9e et nous avons ajout\xe9 des avertissements et des messages d'erreur plus utiles. Nous avons ajout\xe9 une option de configuration ",(0,s.jsx)(n.a,{href:"/docs/api#testenvironment-string",children:(0,s.jsx)(n.code,{children:"testEnvironment"})})," pour personnaliser l'environnement de test. Par exemple, lors de la construction d'un service de n\u0153ud, un environnement sp\xe9cial ",(0,s.jsx)(n.code,{children:"node"})," au lieu de ",(0,s.jsx)(n.code,{children:"jsdom"})," peut \xeatre utilis\xe9. Enfin, le site web et toute la documentation ont \xe9t\xe9 enti\xe8rement r\xe9\xe9crits."]}),"\n",(0,s.jsxs)(n.p,{children:["All changes from the past few months can be found in the ",(0,s.jsx)(n.a,{href:"https://github.com/jestjs/jest/blob/main/CHANGELOG.md",children:"CHANGELOG"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"contributions-et-avenir-de-jest",children:"Contributions et avenir de Jest"}),"\n",(0,s.jsx)(n.p,{children:"Au cours des six derniers mois, Jest a re\xe7u des changements significatifs de la part d'un grand nombre de nouveaux contributeurs. J'aimerais remercier tous les contributeurs open source et les employ\xe9s de Facebook pour leur aide \xe0 rendre Jest meilleur pour tout le monde. Nouveaux contributeurs: Alexander Juarez, Christian Lentfort, Cristian Carlesso, Dan Abramov, Dmitrii Abramov, Evan Jacobs, James Friend, James Ide, Jeff Carpenter, Joe Lencioni, Michael Diolosa, Nik Graf, Pavel Prokopenko, Pavel Volokitin, Sebastian Mayr et ShihChi Huang."}),"\n",(0,s.jsx)(n.p,{children:"Avec votre soutien, nous sommes impatients de rendre Jest encore meilleur dans les mois \xe0 venir. Nous travaillons actuellement sur l'am\xe9lioration des tests React (Native), une meilleure prise en charge de la couverture de code et planifie d'ouvrir la source de notre ex\xe9cuteur de test interne qui permet \xe0 plusieurs projets Jest d'\xeatre ex\xe9cut\xe9s avec une seule commande d'ex\xe9cution."})]})}const d=function(e={}){const{wrapper:n}=Object.assign({},(0,i.ah)(),e.components);return n?(0,s.jsx)(n,Object.assign({},e,{children:(0,s.jsx)(l,e)})):l(e)}},1670:(e,n,t)=>{t.d(n,{Zo:()=>a,ah:()=>o});var s=t(7378);const i=s.createContext({});function o(e){const n=s.useContext(i);return s.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const r={};function a({components:e,children:n,disableParentContext:t}){let a;return a=t?"function"==typeof e?e({}):e||r:o(e),s.createElement(i.Provider,{value:a},n)}}}]);